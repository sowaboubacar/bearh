import{a as ue}from"/build/_shared/chunk-YWUCPBEQ.js";import{a as me}from"/build/_shared/chunk-CXU4QXE4.js";import{a as pe}from"/build/_shared/chunk-XSP4JB6A.js";import{a as de}from"/build/_shared/chunk-XKJ5LF2E.js";import{a as le}from"/build/_shared/chunk-CP3WB6KC.js";import{a as ce}from"/build/_shared/chunk-3DB3GQTY.js";import{a as c}from"/build/_shared/chunk-XDNDK56N.js";import{a as $,b as I,c as H,d as P,e as N}from"/build/_shared/chunk-NCY4KUS2.js";import"/build/_shared/chunk-Q6K63OHD.js";import"/build/_shared/chunk-KAUQO2FD.js";import"/build/_shared/chunk-7ZNTUDLC.js";import{a as oe}from"/build/_shared/chunk-6JFOYO3V.js";import{a as U}from"/build/_shared/chunk-L2TBXS32.js";import{a as M}from"/build/_shared/chunk-A762UFCP.js";import"/build/_shared/chunk-RHTBOEYQ.js";import"/build/_shared/chunk-HNF2M344.js";import"/build/_shared/chunk-IQV4D3C7.js";import"/build/_shared/chunk-H33OI7YH.js";import{a as l}from"/build/_shared/chunk-JBQJJPFB.js";import{b as u}from"/build/_shared/chunk-SS7AQOQ3.js";import{a as E,b as R,c as G}from"/build/_shared/chunk-2MHSPA7K.js";import"/build/_shared/chunk-M3TRH43M.js";import{a as L}from"/build/_shared/chunk-WZRQ3RQI.js";import"/build/_shared/chunk-XNZ6DBKW.js";import"/build/_shared/chunk-YYMCCM4Y.js";import{a as ne}from"/build/_shared/chunk-35S5HMBT.js";import"/build/_shared/chunk-2BPW44Z6.js";import"/build/_shared/chunk-5KYGR3MA.js";import"/build/_shared/chunk-KLKNQD3Q.js";import"/build/_shared/chunk-PGURRWG5.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as ie}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as r,b as i,c as o,e as n,f as F}from"/build/_shared/chunk-G5A27C7O.js";import{h as C}from"/build/_shared/chunk-NVGVVEPD.js";import{X as T,b as W,t as D}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as v,i as x,k as y,l as S,p as w,q as A}from"/build/_shared/chunk-GTSSQFHM.js";import{a as re,b as k}from"/build/_shared/chunk-BBTKOQ57.js";import{e as s}from"/build/_shared/chunk-UED2Q7CE.js";var h=s(re()),he=s(ne());var Ne=s(me()),be=s(oe()),Ce=s(de()),fe=s(pe()),ge=s(le()),ve=s(ce()),xe=s(ue()),ye=s(ie());var e=s(k());function q(){let{users:B,positions:j,teams:V,departments:z,hourGroups:O,access:J}=w(),f=A(),b=v(),[K,Q]=(0,h.useState)("Private"),[t,X]=(0,h.useState)({users:[],positions:[],teams:[],departments:[],hourGroups:[],access:[]}),[Y,Z]=(0,h.useState)([]),[Se,_]=(0,h.useState)(!1),g=b.state==="submitting",ee=x(),ae=a=>{a.preventDefault();let m=new FormData(a.currentTarget);Y.forEach(p=>{m.append("attachments",p.id)}),ee(m,{method:"post"})},te=a=>{Z(a)},d=(a,m)=>{X(p=>({...p,[a]:p[a].includes(m)?p[a].filter(se=>se!==m):[...p[a],m]}))};return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[(0,e.jsx)(C,{asChild:!0,variant:"outline",className:"mb-6 h-12 text-base",children:(0,e.jsxs)(y,{prefetch:"intent",to:"/o/note",children:[(0,e.jsx)(W,{className:"mr-2 h-5 w-5"}),"Retour \xE0 la liste"]})}),(0,e.jsxs)(r,{className:"max-w-2xl mx-auto",children:[(0,e.jsx)(i,{className:"p-4 sm:p-6",children:(0,e.jsx)(o,{className:"text-xl sm:text-2xl lg:text-3xl font-bold",children:"Nouvelle Note"})}),(0,e.jsxs)(S,{method:"post",onSubmit:ae,children:[(0,e.jsxs)(n,{className:"p-4 sm:p-6 space-y-6",children:[f?.error&&(0,e.jsxs)(E,{variant:"destructive",children:[(0,e.jsx)(D,{className:"h-5 w-5"}),(0,e.jsx)(R,{className:"text-base font-medium",children:"Erreur"}),(0,e.jsx)(G,{className:"text-base",children:f.error})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(u,{htmlFor:"title",className:"text-base font-medium",children:"Titre"}),(0,e.jsx)(L,{id:"title",name:"title",required:!0,className:"h-12 text-base"})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(u,{htmlFor:"content",className:"text-base font-medium",children:"Contenu"}),(0,e.jsx)(U,{id:"content",name:"content",required:!0,className:"min-h-[150px] text-base p-3"})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(u,{htmlFor:"visibility",className:"text-base font-medium",children:"Visibilit\xE9"}),(0,e.jsxs)($,{name:"visibility",onValueChange:Q,required:!0,children:[(0,e.jsx)(H,{className:"h-12 text-base",children:(0,e.jsx)(I,{placeholder:"S\xE9lectionnez la visibilit\xE9"})}),(0,e.jsxs)(P,{children:[(0,e.jsx)(N,{value:"Private",className:"text-base",children:"Priv\xE9e"}),(0,e.jsx)(N,{value:"Public",className:"text-base",children:"Publique"}),(0,e.jsx)(N,{value:"Shared",className:"text-base",children:"Partag\xE9e"})]})]})]}),K==="Shared"&&(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsx)(u,{className:"text-base font-medium",children:"Partag\xE9e avec"}),(0,e.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,e.jsxs)(r,{className:"shadow-none border",children:[(0,e.jsx)(i,{className:"p-4",children:(0,e.jsx)(o,{className:"text-base font-semibold",children:"Utilisateurs"})}),(0,e.jsx)(n,{className:"p-0",children:(0,e.jsx)(c,{className:"h-48 px-4",children:B.map(a=>(0,e.jsxs)("div",{className:"flex items-center gap-3 py-3",children:[(0,e.jsx)(l,{id:`user-${a.id}`,checked:t.users.includes(a.id),onCheckedChange:()=>d("users",a.id),className:"h-5 w-5"}),(0,e.jsxs)("label",{htmlFor:`user-${a.id}`,className:"text-base",children:[a.firstName," ",a.lastName]}),t.users.includes(a.id)&&(0,e.jsx)("input",{type:"hidden",name:"sharedWith.users",value:a.id})]},a.id))})})]}),(0,e.jsxs)(r,{className:"shadow-none border",children:[(0,e.jsx)(i,{className:"p-4",children:(0,e.jsx)(o,{className:"text-base font-semibold",children:"Postes"})}),(0,e.jsx)(n,{className:"p-0",children:(0,e.jsx)(c,{className:"h-48 px-4",children:j.map(a=>(0,e.jsxs)("div",{className:"flex items-center gap-3 py-3",children:[(0,e.jsx)(l,{id:`position-${a.id}`,checked:t.positions.includes(a.id),onCheckedChange:()=>d("positions",a.id),className:"h-5 w-5"}),(0,e.jsx)("label",{htmlFor:`position-${a.id}`,className:"text-base",children:a.title}),t.positions.includes(a.id)&&(0,e.jsx)("input",{type:"hidden",name:"sharedWith.positions",value:a.id})]},a.id))})})]}),(0,e.jsxs)(r,{className:"shadow-none border",children:[(0,e.jsx)(i,{className:"p-4",children:(0,e.jsx)(o,{className:"text-base font-semibold",children:"\xC9quipes"})}),(0,e.jsx)(n,{className:"p-0",children:(0,e.jsx)(c,{className:"h-48 px-4",children:V.map(a=>(0,e.jsxs)("div",{className:"flex items-center gap-3 py-3",children:[(0,e.jsx)(l,{id:`team-${a.id}`,checked:t.teams.includes(a.id),onCheckedChange:()=>d("teams",a.id),className:"h-5 w-5"}),(0,e.jsx)("label",{htmlFor:`team-${a.id}`,className:"text-base",children:a.name}),t.teams.includes(a.id)&&(0,e.jsx)("input",{type:"hidden",name:"sharedWith.teams",value:a.id})]},a.id))})})]}),(0,e.jsxs)(r,{className:"shadow-none border",children:[(0,e.jsx)(i,{className:"p-4",children:(0,e.jsx)(o,{className:"text-base font-semibold",children:"D\xE9partements"})}),(0,e.jsx)(n,{className:"p-0",children:(0,e.jsx)(c,{className:"h-48 px-4",children:z.map(a=>(0,e.jsxs)("div",{className:"flex items-center gap-3 py-3",children:[(0,e.jsx)(l,{id:`department-${a.id}`,checked:t.departments.includes(a.id),onCheckedChange:()=>d("departments",a.id),className:"h-5 w-5"}),(0,e.jsx)("label",{htmlFor:`department-${a.id}`,className:"text-base",children:a.name}),t.departments.includes(a.id)&&(0,e.jsx)("input",{type:"hidden",name:"sharedWith.departments",value:a.id})]},a.id))})})]}),(0,e.jsxs)(r,{className:"shadow-none border",children:[(0,e.jsx)(i,{className:"p-4",children:(0,e.jsx)(o,{className:"text-base font-semibold",children:"Groupes Horaires"})}),(0,e.jsx)(n,{className:"p-0",children:(0,e.jsx)(c,{className:"h-48 px-4",children:O.map(a=>(0,e.jsxs)("div",{className:"flex items-center gap-3 py-3",children:[(0,e.jsx)(l,{id:`hourGroup-${a.id}`,checked:t.hourGroups.includes(a.id),onCheckedChange:()=>d("hourGroups",a.id),className:"h-5 w-5"}),(0,e.jsx)("label",{htmlFor:`hourGroup-${a.id}`,className:"text-base",children:a.name}),t.hourGroups.includes(a.id)&&(0,e.jsx)("input",{type:"hidden",name:"sharedWith.hourGroups",value:a.id})]},a.id))})})]}),(0,e.jsxs)(r,{className:"shadow-none border",children:[(0,e.jsx)(i,{className:"p-4",children:(0,e.jsx)(o,{className:"text-base font-semibold",children:"Groupes d'Acc\xE8s"})}),(0,e.jsx)(n,{className:"p-0",children:(0,e.jsx)(c,{className:"h-48 px-4",children:J.map(a=>(0,e.jsxs)("div",{className:"flex items-center gap-3 py-3",children:[(0,e.jsx)(l,{id:`access-${a.id}`,checked:t.access.includes(a.id),onCheckedChange:()=>d("access",a.id),className:"h-5 w-5"}),(0,e.jsx)("label",{htmlFor:`access-${a.id}`,className:"text-base",children:a.name}),t.access.includes(a.id)&&(0,e.jsx)("input",{type:"hidden",name:"sharedWith.access",value:a.id})]},a.id))})})]})]})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(u,{htmlFor:"attachments",className:"text-base font-medium",children:"Images & Pi\xE8ces jointes"}),(0,e.jsx)(M,{onSelect:te,multiple:!0,accept:"image/*,application/pdf",maxSize:5*1024*1024,onBusyStateChange:_})]})]}),(0,e.jsx)(F,{className:"p-4 sm:p-6",children:(0,e.jsx)(C,{type:"submit",className:"w-full h-12 text-base",disabled:g||b.state==="submitting",children:g||b.state==="submitting"?(0,e.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,e.jsx)(T,{className:"h-5 w-5 animate-spin"}),"Cr\xE9ation en cours..."]}):"Cr\xE9er la note"})})]})]})]})}export{q as default};
