import{a as ue}from"/build/_shared/chunk-2BB2EQBE.js";import{a as X,b as ee}from"/build/_shared/chunk-ABDDDOIB.js";import{a as Y,b as Z,c as _,d as N,e as i,f as r}from"/build/_shared/chunk-IEDNE26R.js";import"/build/_shared/chunk-M3TRH43M.js";import{a as W}from"/build/_shared/chunk-WZRQ3RQI.js";import{a as b,b as v,c as C,d as D,e as y,f as T,g as L,h as B}from"/build/_shared/chunk-KLKNQD3Q.js";import"/build/_shared/chunk-PGURRWG5.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as de}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as O,b as U,c as q,e as V,f as I}from"/build/_shared/chunk-G5A27C7O.js";import{h as a}from"/build/_shared/chunk-NVGVVEPD.js";import{Ca as K,Da as Q,Ea as f,K as x,Q as M,W as G,f as h,oa as z,ra as J,xa as w}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as S,h as P,i as $,k as n,l as H,p as A,r as E}from"/build/_shared/chunk-GTSSQFHM.js";import{a as me,b as j}from"/build/_shared/chunk-BBTKOQ57.js";import{e as m}from"/build/_shared/chunk-UED2Q7CE.js";var te=m(me());var pe=m(ue());var ge=m(de());var e=m(j());function ae(){let{observations:o,search:d,view:se,page:c,limit:g,can:l}=A(),[u,le]=(0,te.useState)(!1),[ie,p]=P(),he=$(),re=E(),oe=S().state==="loading",s=ie.get("view")||se,R=t=>{le(!0),re.submit({id:t,action:"delete"},{method:"post"})},ne=t=>{t.preventDefault();let ce=new FormData(t.currentTarget).get("search");p({search:ce,view:s})},k=t=>{p({search:d,view:t})},F=t=>t==="Positive"?(0,e.jsx)(Q,{className:"h-4 w-4 text-green-500"}):(0,e.jsx)(K,{className:"h-4 w-4 text-red-500"});return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8 space-y-6",children:[(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,e.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold",children:"Remarques"}),l?.create&&(0,e.jsx)(a,{asChild:!0,className:"w-full sm:w-auto h-12 text-base",children:(0,e.jsxs)(n,{prefetch:"intent",to:"/o/observation/new",children:[(0,e.jsx)(z,{className:"mr-2 h-5 w-5"}),"Nouvelle Remarque"]})})]}),(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-4",children:[(0,e.jsxs)(H,{onSubmit:ne,className:"flex items-center gap-2 w-full sm:w-auto sm:flex-1",children:[(0,e.jsx)(W,{type:"search",name:"search",placeholder:"Rechercher des remarques...",defaultValue:d,className:"h-12 text-base"}),(0,e.jsx)(a,{type:"submit",className:"h-12 w-12 flex-shrink-0",children:(0,e.jsx)(J,{className:"h-5 w-5"})})]}),(0,e.jsxs)("div",{className:"flex gap-2",children:[(0,e.jsx)(a,{variant:s==="grid"?"default":"outline",onClick:()=>k("grid"),className:"flex-1 sm:flex-none h-12",children:(0,e.jsx)(M,{className:"h-5 w-5"})}),(0,e.jsx)(a,{variant:s==="list"?"default":"outline",onClick:()=>k("list"),className:"flex-1 sm:flex-none h-12",children:(0,e.jsx)(G,{className:"h-5 w-5"})})]})]}),oe?(0,e.jsx)(ee,{view:s,itemCount:g}):o.results.length>0?s==="grid"?(0,e.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:o.results.map(t=>(0,e.jsxs)(O,{children:[(0,e.jsx)(U,{className:"p-4 sm:p-6",children:(0,e.jsxs)(q,{className:"flex items-center justify-between text-lg font-bold",children:[(0,e.jsxs)("span",{children:[t.user.firstName," ",t.user.lastName]}),(0,e.jsxs)(h,{variant:t.type==="Positive"?"default":"destructive",className:"h-8 text-base px-3 py-1",children:[F(t.type),(0,e.jsx)("span",{className:"ml-2",children:t.type})]})]})}),(0,e.jsxs)(V,{className:"p-4 sm:p-6 pt-0 space-y-3",children:[(0,e.jsx)("p",{className:"text-base text-muted-foreground line-clamp-2",children:t.content}),(0,e.jsxs)("p",{className:"text-base text-muted-foreground",children:["Par : ",t.author.firstName," ",t.author.lastName]}),(0,e.jsxs)("p",{className:"text-base text-muted-foreground",children:["Date : ",new Date(t.createdAt).toLocaleString()]})]}),(0,e.jsxs)(I,{className:"p-4 sm:p-6 flex justify-between gap-3",children:[l?.view&&(0,e.jsx)(a,{asChild:!0,variant:"outline",className:"flex-1 h-12 text-base",children:(0,e.jsx)(n,{prefetch:"intent",to:`/o/observation/view/${t.id}`,children:(0,e.jsx)(x,{className:"mr-2 h-5 w-5"})})}),l?.edit&&(0,e.jsx)(a,{asChild:!0,variant:"outline",className:"flex-1 h-12 text-base",children:(0,e.jsx)(n,{prefetch:"intent",to:`/o/observation/edit/${t.id}`,children:(0,e.jsx)(w,{className:"mr-2 h-5 w-5"})})}),l?.delete&&(0,e.jsxs)(b,{children:[(0,e.jsx)(v,{asChild:!0,children:(0,e.jsx)(a,{variant:"destructive",className:"flex-1 h-12 text-base",children:(0,e.jsx)(f,{className:"mr-2 h-5 w-5"})})}),(0,e.jsxs)(D,{className:"sm:max-w-[425px]",children:[(0,e.jsxs)(y,{children:[(0,e.jsx)(L,{className:"text-xl",children:"\xCAtes-vous s\xFBr de vouloir supprimer cette remarque ?"}),(0,e.jsx)(B,{className:"text-base",children:"Cette action ne peut pas \xEAtre annul\xE9e."})]}),(0,e.jsxs)(T,{className:"gap-3 sm:gap-0",children:[(0,e.jsx)(C,{asChild:!0,children:(0,e.jsx)(a,{variant:"outline",className:"h-12 text-base",children:"Annuler"})}),(0,e.jsx)(a,{variant:"destructive",onClick:()=>R(t.id),disabled:u,className:"h-12 text-base",children:u?"Suppression...":""})]})]})]})]})]},t.id))}):(0,e.jsx)("div",{className:"rounded-lg border overflow-x-auto",children:(0,e.jsxs)(Y,{children:[(0,e.jsx)(Z,{children:(0,e.jsxs)(N,{children:[(0,e.jsx)(i,{className:"text-base whitespace-nowrap",children:"Employ\xE9 observ\xE9"}),(0,e.jsx)(i,{className:"text-base whitespace-nowrap",children:"Type"}),(0,e.jsx)(i,{className:"text-base whitespace-nowrap hidden md:table-cell",children:"Contenu"}),(0,e.jsx)(i,{className:"text-base whitespace-nowrap hidden sm:table-cell",children:"Auteur"}),(0,e.jsx)(i,{className:"text-base whitespace-nowrap hidden lg:table-cell",children:"Date"}),(0,e.jsx)(i,{className:"text-base text-right",children:"Actions"})]})}),(0,e.jsx)(_,{children:o.results.map(t=>(0,e.jsxs)(N,{children:[(0,e.jsxs)(r,{className:"font-medium text-base",children:[t.user.firstName," ",t.user.lastName]}),(0,e.jsx)(r,{children:(0,e.jsxs)(h,{variant:t.type==="Positive"?"default":"destructive",className:"h-8 text-base px-3 py-1",children:[F(t.type),(0,e.jsx)("span",{className:"ml-2",children:t.type})]})}),(0,e.jsx)(r,{className:"max-w-xs truncate hidden md:table-cell text-base",children:t.content}),(0,e.jsxs)(r,{className:"hidden sm:table-cell text-base",children:[t.author.firstName," ",t.author.lastName]}),(0,e.jsx)(r,{className:"hidden lg:table-cell text-base",children:new Date(t.createdAt).toLocaleString()}),(0,e.jsx)(r,{children:(0,e.jsxs)("div",{className:"flex justify-end gap-2",children:[l?.view&&(0,e.jsx)(a,{asChild:!0,variant:"outline",className:"h-12 text-base px-3",children:(0,e.jsx)(n,{prefetch:"intent",to:`/o/observation/view/${t.id}`,children:(0,e.jsx)(x,{className:"h-5 w-5"})})}),l?.edit&&(0,e.jsx)(a,{asChild:!0,variant:"outline",className:"h-12 text-base px-3",children:(0,e.jsx)(n,{prefetch:"intent",to:`/o/observation/edit/${t.id}`,children:(0,e.jsx)(w,{className:"h-5 w-5"})})}),l?.delete&&(0,e.jsxs)(b,{children:[(0,e.jsx)(v,{asChild:!0,children:(0,e.jsx)(a,{variant:"destructive",className:"h-12 text-base px-3",children:(0,e.jsx)(f,{className:"h-5 w-5"})})}),(0,e.jsxs)(D,{className:"sm:max-w-[425px]",children:[(0,e.jsxs)(y,{children:[(0,e.jsx)(L,{className:"text-xl",children:"\xCAtes-vous s\xFBr de vouloir supprimer cette remarque ?"}),(0,e.jsx)(B,{className:"text-base",children:"Cette action ne peut pas \xEAtre annul\xE9e."})]}),(0,e.jsxs)(T,{className:"gap-3 sm:gap-0",children:[(0,e.jsx)(C,{asChild:!0,children:(0,e.jsx)(a,{variant:"outline",className:"h-12 text-base",children:"Annuler"})}),(0,e.jsx)(a,{variant:"destructive",onClick:()=>R(t.id),disabled:u,className:"h-12 text-base",children:u?"Suppression...":""})]})]})]})]})})]},t.id))})]})}):(0,e.jsx)(X,{type:"observations",createLink:"/o/observation/new",view:s}),o.totalResults>0&&(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4",children:[(0,e.jsx)(a,{onClick:()=>p({search:d,view:s,page:(c-1).toString()}),disabled:c===1,className:"w-full sm:w-auto h-12 text-base",children:"Pr\xE9c\xE9dent"}),(0,e.jsxs)("span",{className:"text-base",children:["Page ",c," sur ",Math.ceil(o.totalResults/g)]}),(0,e.jsx)(a,{onClick:()=>p({search:d,view:s,page:(c+1).toString()}),disabled:c*g>=o.totalResults,className:"w-full sm:w-auto h-12 text-base",children:"Suivant"})]})]})}export{ae as default};
