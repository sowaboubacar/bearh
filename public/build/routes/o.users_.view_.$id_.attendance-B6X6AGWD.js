import{a as q,b as Q,c as W,d as F}from"/build/_shared/chunk-7KTFRF5Z.js";import"/build/_shared/chunk-NN26KXOX.js";import{a as pt}from"/build/_shared/chunk-NX6ZEDKE.js";import{a as et}from"/build/_shared/chunk-XDNDK56N.js";import{a as w,b as L}from"/build/_shared/chunk-HQRKW5NX.js";import{a as X,b as z,c as Y,d as R}from"/build/_shared/chunk-ZZRY6RNO.js";import{a as Z}from"/build/_shared/chunk-LZOQ52E6.js";import"/build/_shared/chunk-MRGZKXS3.js";import{a as _,b as tt,c as k,d as A}from"/build/_shared/chunk-Z7S4CDT2.js";import"/build/_shared/chunk-UNOET767.js";import{b as v}from"/build/_shared/chunk-FB4U2LCE.js";import"/build/_shared/chunk-Q6K63OHD.js";import"/build/_shared/chunk-KAUQO2FD.js";import"/build/_shared/chunk-7ZNTUDLC.js";import{a as mt}from"/build/_shared/chunk-6JFOYO3V.js";import{a as P}from"/build/_shared/chunk-OFTXZR4P.js";import"/build/_shared/chunk-2BPW44Z6.js";import"/build/_shared/chunk-5KYGR3MA.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as ut}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as b,b as C,c as h,e as T}from"/build/_shared/chunk-G5A27C7O.js";import{a as H,h as x}from"/build/_shared/chunk-NVGVVEPD.js";import{D as J,Fa as G,Ga as V,Ma as $,k as N}from"/build/_shared/chunk-PNJDYZ5P.js";import{d as j,p as K}from"/build/_shared/chunk-GTSSQFHM.js";import{a as U,b as y}from"/build/_shared/chunk-BBTKOQ57.js";import{e as g}from"/build/_shared/chunk-UED2Q7CE.js";var O=g(U());var l=g(U(),1);var rt="label";function at(a,s){typeof a=="function"?a(s):a&&(a.current=s)}function gt(a,s){let n=a.options;n&&s&&Object.assign(n,s)}function st(a,s){a.labels=s}function nt(a,s){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rt,m=[];a.datasets=s.map(i=>{let d=a.datasets.find(p=>p[n]===i[n]);return!d||!i.data||m.includes(d)?{...i}:(m.push(d),Object.assign(d,i),d)})}function ft(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rt,n={labels:[],datasets:[]};return st(n,a.labels),nt(n,a.datasets,s),n}function vt(a,s){let{height:n=150,width:m=300,redraw:i=!1,datasetIdKey:d,type:p,data:e,options:c,plugins:S=[],fallbackContent:f,updateMode:D,...E}=a,u=(0,l.useRef)(null),o=(0,l.useRef)(null),M=()=>{u.current&&(o.current=new R(u.current,{type:p,data:ft(e,d),options:c&&{...c},plugins:S}),at(s,o.current))},B=()=>{at(s,null),o.current&&(o.current.destroy(),o.current=null)};return(0,l.useEffect)(()=>{!i&&o.current&&c&&gt(o.current,c)},[i,c]),(0,l.useEffect)(()=>{!i&&o.current&&st(o.current.config.data,e.labels)},[i,e.labels]),(0,l.useEffect)(()=>{!i&&o.current&&e.datasets&&nt(o.current.config.data,e.datasets,d)},[i,e.datasets]),(0,l.useEffect)(()=>{o.current&&(i?(B(),setTimeout(M)):o.current.update(D))},[i,c,e.labels,e.datasets,D]),(0,l.useEffect)(()=>{o.current&&(B(),setTimeout(M))},[p]),(0,l.useEffect)(()=>(M(),()=>B()),[]),l.default.createElement("canvas",{ref:u,role:"img",height:n,width:m,...E},f)}var bt=(0,l.forwardRef)(vt);function I(a,s){return R.register(s),(0,l.forwardRef)((n,m)=>l.default.createElement(bt,{...n,ref:m,type:a}))}var it=I("line",z),ot=I("bar",X);var lt=I("pie",Y);var t=g(y());function dt({dailySummaries:a,overallSummary:s,charts:n}){let m={labels:n.lineChartData.map(e=>e.x),datasets:[{label:"Heures de travail (par jour)",data:n.lineChartData.map(e=>e.y),borderColor:"rgba(0, 120, 125, 1)",borderWidth:2,fill:!1}]},i={labels:n.statusData.map(e=>e.label),datasets:[{label:"Quantit\xE9",data:n.statusData.map(e=>e.value),backgroundColor:["rgba(10, 195, 201, 0.2)","rgba(0, 120, 125, 1)"],borderColor:["rgba(10, 195, 201, 0.2)","rgba(0, 120, 125, 1)"],borderWidth:1}]},d={labels:n.pieData.map(e=>e.label),datasets:[{data:n.pieData.map(e=>e.value),backgroundColor:["#00787d","#0ac3c9"]}]},p={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}}};return(0,t.jsxs)("div",{className:"space-y-6 p-4 md:p-6",children:[(0,t.jsx)(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,t.jsxs)(b,{className:"overflow-hidden",children:[(0,t.jsx)(C,{className:"bg-primary/5",children:(0,t.jsx)(h,{className:"text-2xl font-bold",children:"M\xE9triques Globales"})}),(0,t.jsx)(T,{className:"p-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(J,{className:"h-5 w-5 text-primary"}),(0,t.jsxs)("p",{children:["Total Heures de Travail: ",(0,t.jsxs)("span",{className:"font-semibold",children:[Math.round(s.totalWorkTime/60)," h"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(N,{className:"h-5 w-5 text-secondary"}),(0,t.jsxs)("p",{children:["Total Heures de Pause: ",(0,t.jsxs)("span",{className:"font-semibold",children:[Math.round(s.totalBreakTime/60)," h"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(V,{className:"h-5 w-5 text-warning"}),(0,t.jsxs)("p",{children:["Jours en Retard: ",(0,t.jsx)("span",{className:"font-semibold",children:s.lateCount})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)($,{className:"h-5 w-5 text-destructive"}),(0,t.jsxs)("p",{children:["Jours Absents: ",(0,t.jsx)("span",{className:"font-semibold",children:s.absentCount})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(G,{className:"h-5 w-5 text-primary"}),(0,t.jsxs)("p",{children:["Heures Moy. de Travail: ",(0,t.jsxs)("span",{className:"font-semibold",children:[Math.round(s.averageWorkTime/60)," h"]})]})]})]})})]})}),(0,t.jsxs)(_,{defaultValue:"line",className:"w-full",children:[(0,t.jsxs)(tt,{className:"grid w-full grid-cols-3 mb-4",children:[(0,t.jsx)(k,{value:"line",children:"\xC9volution"}),(0,t.jsx)(k,{value:"bar",children:"Statuts"}),(0,t.jsx)(k,{value:"pie",children:"Ratio"})]}),(0,t.jsx)(A,{value:"line",children:(0,t.jsx)(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},children:(0,t.jsxs)(b,{children:[(0,t.jsx)(C,{children:(0,t.jsx)(h,{children:"\xC9volution des Heures de Travail"})}),(0,t.jsx)(T,{children:(0,t.jsx)("div",{className:"h-[300px]",children:(0,t.jsx)(it,{data:m,options:p})})})]})})}),(0,t.jsx)(A,{value:"bar",children:(0,t.jsx)(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},children:(0,t.jsxs)(b,{children:[(0,t.jsx)(C,{children:(0,t.jsx)(h,{children:"Statuts (Retard, Absence)"})}),(0,t.jsx)(T,{children:(0,t.jsx)("div",{className:"h-[300px]",children:(0,t.jsx)(ot,{data:i,options:p})})})]})})}),(0,t.jsx)(A,{value:"pie",children:(0,t.jsx)(v.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},children:(0,t.jsxs)(b,{children:[(0,t.jsx)(C,{children:(0,t.jsx)(h,{children:"Ratio Travail vs Pause"})}),(0,t.jsx)(T,{children:(0,t.jsx)("div",{className:"h-[300px]",children:(0,t.jsx)(lt,{data:d,options:p})})})]})})})]}),(0,t.jsxs)(b,{children:[(0,t.jsx)(C,{children:(0,t.jsx)(h,{children:"D\xE9tails Quotidiens"})}),(0,t.jsx)(T,{children:(0,t.jsx)(et,{className:"h-[300px]",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("th",{className:"text-left p-2 font-medium",children:"Date"}),(0,t.jsx)("th",{className:"text-left p-2 font-medium",children:"Heures de Travail"}),(0,t.jsx)("th",{className:"text-left p-2 font-medium",children:"Heures de Pause"}),(0,t.jsx)("th",{className:"text-left p-2 font-medium",children:"Statut"})]})}),(0,t.jsx)("tbody",{children:a.map(e=>(0,t.jsxs)("tr",{className:"border-b last:border-b-0",children:[(0,t.jsx)("td",{className:"p-2",children:e.date}),(0,t.jsxs)("td",{className:"p-2",children:[Math.round(e.totalWorkTime/60)," h"]}),(0,t.jsxs)("td",{className:"p-2",children:[Math.round(e.totalBreakTime/60)," h"]}),(0,t.jsxs)("td",{className:"p-2",children:[e.isLate&&(0,t.jsx)(P,{variant:"warning",className:"mr-1",children:"Retard"}),e.isAbsent&&(0,t.jsx)(P,{variant:"destructive",children:"Absent"}),!e.isLate&&!e.isAbsent&&(0,t.jsx)(P,{variant:"secondary",children:"Pr\xE9sent"})]})]},e.date))})]})})})]})]})}var Ct=g(pt());var ht=g(mt());var Tt=g(ut());var r=g(y());function ct(){let{dailySummaries:a,overallSummary:s,charts:n,user:m,can:i}=K(),d=j(),p=a[0]?.date?L(a[0].date):new Date,e=a[a.length-1]?.date?L(a[a.length-1].date):new Date,[c,S]=(0,O.useState)(p),[f,D]=(0,O.useState)(e),E=()=>{let u=w(c),o=w(f);d(`?startDate=${u}&endDate=${o}`)};return(0,r.jsxs)("div",{className:"container mx-auto p-4 space-y-6 max-w-6xl",children:[(0,r.jsxs)("div",{className:"mb-2",children:[(0,r.jsx)(Z,{user:m,can:i}),(0,r.jsx)("h1",{className:"text-3xl font-bold mb-4 mt-2 text-center",children:"Analytiques des Pointages"})]}),(0,r.jsxs)(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6 p-4 md:p-6",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row  justify-center  items-start md:items-center space-y-4 md:space-y-0 md:space-x-4",children:[(0,r.jsx)("div",{className:"grid gap-2",children:(0,r.jsxs)(Q,{children:[(0,r.jsx)(W,{asChild:!0,children:(0,r.jsxs)(x,{variant:"outline",className:H("w-[240px] justify-start text-left font-normal",!c&&"text-muted-foreground"),children:[(0,r.jsx)(N,{className:"mr-2 h-4 w-4"}),c?w(c):(0,r.jsx)("span",{children:"Date de d\xE9but"})]})}),(0,r.jsx)(F,{className:"w-auto p-0",align:"start",children:(0,r.jsx)(q,{mode:"single",selected:c,onSelect:u=>u&&S(u),initialFocus:!0})})]})}),(0,r.jsx)("div",{className:"grid gap-2",children:(0,r.jsxs)(Q,{children:[(0,r.jsx)(W,{asChild:!0,children:(0,r.jsxs)(x,{variant:"outline",className:H("w-[240px] justify-start text-left font-normal",!f&&"text-muted-foreground"),children:[(0,r.jsx)(N,{className:"mr-2 h-4 w-4"}),f?w(f):(0,r.jsx)("span",{children:"Date de fin"})]})}),(0,r.jsx)(F,{className:"w-auto p-0",align:"start",children:(0,r.jsx)(q,{mode:"single",selected:f,onSelect:u=>u&&D(u),initialFocus:!0})})]})}),(0,r.jsx)(x,{onClick:E,className:"w-full md:w-auto",children:"Mettre \xE0 jour"})]}),(0,r.jsx)(dt,{dailySummaries:a,overallSummary:s,charts:n})]})]})}export{ct as default};
