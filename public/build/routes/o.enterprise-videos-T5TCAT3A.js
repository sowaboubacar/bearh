import{a as ne}from"/build/_shared/chunk-K42CPUDW.js";import{a as J,b as X}from"/build/_shared/chunk-ABDDDOIB.js";import{a as K,b as Q,c as W,d as x,e as u,f as p}from"/build/_shared/chunk-IEDNE26R.js";import"/build/_shared/chunk-M3TRH43M.js";import{a as z}from"/build/_shared/chunk-WZRQ3RQI.js";import{a as v,b as N,c as b,d as C,e as D,f as T,g as y,h as B}from"/build/_shared/chunk-KLKNQD3Q.js";import"/build/_shared/chunk-PGURRWG5.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as le}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as j,b as A,c as U,e as V,f as M}from"/build/_shared/chunk-G5A27C7O.js";import{h as a}from"/build/_shared/chunk-NVGVVEPD.js";import{Ea as f,K as h,Q as I,W as G,oa as O,ra as q,xa as w}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as k,h as F,i as R,k as o,l as E,p as H,r as P}from"/build/_shared/chunk-GTSSQFHM.js";import{a as oe,b as $}from"/build/_shared/chunk-BBTKOQ57.js";import{e as n}from"/build/_shared/chunk-UED2Q7CE.js";var Y=n(oe());var ce=n(ne());var me=n(le());var e=n($());function Z(){let{videos:r,search:c,view:_,page:l,limit:g,can:i}=H(),[m,ee]=(0,Y.useState)(!1),[te,d]=F(),de=R(),ae=P(),se=k().state==="loading",s=te.get("view")||_,L=t=>{ee(!0),ae.submit({id:t},{method:"delete"})},ie=t=>{t.preventDefault();let re=new FormData(t.currentTarget).get("search");d({search:re,view:s})},S=t=>{d({search:c,view:t})};return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8 space-y-6",children:[(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,e.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold",children:"Base de Connaissances G\xE9n\xE9rale"}),i?.create&&(0,e.jsx)(a,{asChild:!0,className:"w-full sm:w-auto h-11 text-base",children:(0,e.jsxs)(o,{prefetch:"intent",to:"/o/enterprise-videos/new",children:[(0,e.jsx)(O,{className:"mr-2 h-5 w-5"}),"Nouvelle Entr\xE9e"]})})]}),(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,e.jsxs)(E,{onSubmit:ie,className:"flex w-full sm:w-auto items-center gap-2",children:[(0,e.jsx)(z,{type:"search",name:"search",placeholder:"Search videos...",defaultValue:c,className:"h-11 text-base w-full sm:w-[300px]"}),(0,e.jsx)(a,{type:"submit",className:"h-11 w-11",children:(0,e.jsx)(q,{className:"h-5 w-5"})})]}),(0,e.jsxs)("div",{className:"flex gap-2 w-full sm:w-auto",children:[(0,e.jsx)(a,{variant:s==="grid"?"default":"outline",onClick:()=>S("grid"),className:"flex-1 sm:flex-none h-11 w-11",children:(0,e.jsx)(I,{className:"h-5 w-5"})}),(0,e.jsx)(a,{variant:s==="list"?"default":"outline",onClick:()=>S("list"),className:"flex-1 sm:flex-none h-11 w-11",children:(0,e.jsx)(G,{className:"h-5 w-5"})})]})]}),se?(0,e.jsx)(X,{view:s,itemCount:g}):r.results.length>0?s==="grid"?(0,e.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:r.results.map(t=>(0,e.jsxs)(j,{children:[(0,e.jsx)(A,{className:"p-4 sm:p-6",children:(0,e.jsx)(U,{className:"text-lg sm:text-xl",children:t.title})}),(0,e.jsx)(V,{className:"p-4 sm:p-6 pt-0",children:(0,e.jsxs)("p",{className:"text-base text-muted-foreground",children:[t.description?.slice(0,100),"..."]})}),(0,e.jsxs)(M,{className:"p-4 sm:p-6 flex justify-between gap-2",children:[i?.view&&(0,e.jsx)(a,{asChild:!0,variant:"outline",className:"h-11 w-11",children:(0,e.jsx)(o,{prefetch:"intent",to:`/o/enterprise-videos/view/${t.id}`,children:(0,e.jsx)(h,{className:"h-5 w-5"})})}),i?.edit&&(0,e.jsx)(a,{asChild:!0,variant:"outline",className:"h-11 w-11",children:(0,e.jsx)(o,{prefetch:"intent",to:`/o/enterprise-videos/edit/${t.id}`,children:(0,e.jsx)(w,{className:"h-5 w-5"})})}),i?.delete&&(0,e.jsxs)(v,{children:[(0,e.jsx)(N,{asChild:!0,children:(0,e.jsx)(a,{variant:"destructive",className:"h-11 w-11",children:(0,e.jsx)(f,{className:"h-5 w-5"})})}),(0,e.jsxs)(C,{className:"sm:max-w-[425px]",children:[(0,e.jsxs)(D,{children:[(0,e.jsx)(y,{className:"text-lg sm:text-xl",children:"\xCAtes-vous s\xFBr de vouloir supprimer cette unit\xE9 de connaissance ?"}),(0,e.jsx)(B,{className:"text-base",children:"Cette action ne peut \xEAtre annul\xE9e!"})]}),(0,e.jsxs)(T,{className:"gap-3",children:[(0,e.jsx)(b,{asChild:!0,children:(0,e.jsx)(a,{variant:"outline",className:"h-11 text-base",children:"Annuler"})}),(0,e.jsx)(a,{variant:"destructive",onClick:()=>L(t.id),disabled:m,className:"h-11 text-base",children:m?"Suppression...":"Supprimer"})]})]})]})]})]},t.id))}):(0,e.jsx)("div",{className:"rounded-lg border overflow-x-auto",children:(0,e.jsxs)(K,{children:[(0,e.jsx)(Q,{children:(0,e.jsxs)(x,{children:[(0,e.jsx)(u,{className:"text-base",children:"Titre"}),(0,e.jsx)(u,{className:"text-base hidden sm:table-cell",children:"Description"}),(0,e.jsx)(u,{className:"text-base text-right",children:"Actions"})]})}),(0,e.jsx)(W,{children:r.results.map(t=>(0,e.jsxs)(x,{children:[(0,e.jsx)(p,{className:"font-medium text-base",children:t.title}),(0,e.jsxs)(p,{className:"text-base hidden sm:table-cell",children:[t.description?.slice(0,50),"..."]}),(0,e.jsx)(p,{children:(0,e.jsxs)("div",{className:"flex justify-end gap-2",children:[i?.view&&(0,e.jsx)(a,{asChild:!0,variant:"outline",className:"h-11 w-11",children:(0,e.jsx)(o,{prefetch:"intent",to:`/o/enterprise-videos/view/${t.id}`,children:(0,e.jsx)(h,{className:"h-5 w-5"})})}),i?.edit&&(0,e.jsx)(a,{asChild:!0,variant:"outline",className:"h-11 w-11",children:(0,e.jsx)(o,{prefetch:"intent",to:`/o/enterprise-videos/edit/${t.id}`,children:(0,e.jsx)(w,{className:"h-5 w-5"})})}),i?.delete&&(0,e.jsxs)(v,{children:[(0,e.jsx)(N,{asChild:!0,children:(0,e.jsx)(a,{variant:"destructive",className:"h-11 w-11",children:(0,e.jsx)(f,{className:"h-5 w-5"})})}),(0,e.jsxs)(C,{className:"sm:max-w-[425px]",children:[(0,e.jsxs)(D,{children:[(0,e.jsx)(y,{className:"text-lg sm:text-xl",children:"\xCAtes-vous s\xFBr de vouloir supprimer cette unit\xE9 de connaissance ?"}),(0,e.jsx)(B,{className:"text-base",children:"Cette action ne peut \xEAtre annul\xE9e!"})]}),(0,e.jsxs)(T,{className:"gap-3",children:[(0,e.jsx)(b,{asChild:!0,children:(0,e.jsx)(a,{variant:"outline",className:"h-11 text-base",children:"Annuler"})}),(0,e.jsx)(a,{variant:"destructive",onClick:()=>L(t.id),disabled:m,className:"h-11 text-base",children:m?"Suppression...":"Supprimer"})]})]})]})]})})]},t.id))})]})}):(0,e.jsx)(J,{type:"Entr\xE9e",createLink:"/o/enterprise-videos/new",view:s}),r.totalResults>0&&(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4",children:[(0,e.jsx)(a,{onClick:()=>d({search:c,view:s,page:(l-1).toString()}),disabled:l===1,className:"w-full sm:w-auto h-11 text-base",children:"Previous"}),(0,e.jsxs)("span",{className:"text-base",children:["Page ",l," of ",Math.ceil(r.totalResults/g)]}),(0,e.jsx)(a,{onClick:()=>d({search:c,view:s,page:(l+1).toString()}),disabled:l*g>=r.totalResults,className:"w-full sm:w-auto h-11 text-base",children:"Next"})]})]})}export{Z as default};
