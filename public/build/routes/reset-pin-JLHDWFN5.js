import{a as G,b as q,c as z}from"/build/_shared/chunk-HYL2BHUQ.js";import{a as l,b as c,c as m}from"/build/_shared/chunk-2MHSPA7K.js";import{a as b,b as y,c as k,d as A,e as D}from"/build/_shared/chunk-G5A27C7O.js";import{h as p}from"/build/_shared/chunk-NVGVVEPD.js";import{F as C,X as I,Z as L,b as P,t as i}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as g,k as d,l as h,p as v,q as N}from"/build/_shared/chunk-GTSSQFHM.js";import{a as F,b as w}from"/build/_shared/chunk-BBTKOQ57.js";import{c as M,e as a}from"/build/_shared/chunk-UED2Q7CE.js";var H=M((K,T)=>{T.exports={}});var r=a(F());var O=a(H()),U=a(q()),W=a(G()),Y=a(z()),e=a(w()),_=()=>[{rel:"preload",as:"image",href:"https://images.unsplash.com/photo-1562243061-204550d8a2c9?q=80&w=1887&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{rel:"preload",as:"image",href:"/img/logo-rect-white.png"},{rel:"preload",as:"image",href:"/img/logo-rect-dark.png"}];function J(){return[{name:"description",content:"Demandez un nouveau PIN pour acc\xE9der \xE0 la plateforme RH de la Pharmacie Val d'Oise."},{title:"Demander un nouveau PIN - Pharmacie Val d'Oise"}]}function j(){let[f,V]=(0,r.useState)(null),[B,R]=(0,r.useState)("light"),o=N(),{token:u,tokenIsValid:n}=v(),x=g();(0,r.useEffect)(()=>{(!u||!n)&&V("Lien invalide ou expir\xE9. Veuillez demander une nouvelle r\xE9initialisation de PIN.")},[u,n]),(0,r.useEffect)(()=>{(async()=>{try{let t=await fetch("/api/set-theme");if(t.ok){let E=await t.json();R(E.theme||"light")}else console.error("Erreur lors de la r\xE9cup\xE9ration du th\xE8me :",t.statusText)}catch(t){console.error("Erreur lors de la r\xE9cup\xE9ration du th\xE8me :",t)}})()},[]);let S=()=>{if(o?.pin){navigator.clipboard.writeText(o.pin);let s=document.querySelector(".copy-button");if(s){let t=s.innerHTML;s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5 w-5 text-green-500"><polyline points="20 6 9 17 4 12"></polyline></svg>',setTimeout(()=>{s.innerHTML=t},2e3)}}};return(0,e.jsxs)("div",{className:"flex min-h-screen flex-col lg:flex-row",children:[(0,e.jsx)("div",{className:"flex w-full lg:w-1/2",children:(0,e.jsx)("div",{className:"w-full max-w-md mx-auto px-4 sm:px-6 py-8 sm:py-12",children:(0,e.jsxs)("div",{className:"space-y-6",children:[B==="dark"?(0,e.jsx)("img",{src:"/img/logo-rect-dark.png",alt:"logo",className:"h-12 sm:h-14 w-auto mx-auto"}):(0,e.jsx)("img",{src:"/img/logo-rect-white.png",alt:"logo",className:"h-12 sm:h-14 w-auto mx-auto"}),(0,e.jsx)("p",{className:"text-center text-base text-muted-foreground font-semibold",children:"Portail RH de la Pharmacie Val d'Oise"}),(0,e.jsxs)(b,{className:"w-full",children:[(0,e.jsxs)(y,{className:"space-y-3 p-6",children:[(0,e.jsx)(k,{className:"text-center",children:(0,e.jsx)("h5",{className:"text-xl sm:text-2xl font-bold",children:"G\xE9n\xE9rer un nouveau PIN"})}),(0,e.jsx)(A,{className:"text-base",children:n?"Cliquez sur le bouton ci-dessous pour g\xE9n\xE9rer votre nouveau PIN":"Votre lien de r\xE9initialisation n'est pas valide"})]}),(0,e.jsxs)(D,{className:"p-6 space-y-6",children:[f?o?.pin?(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsxs)(l,{children:[(0,e.jsx)(i,{className:"h-5 w-5"}),(0,e.jsx)(c,{className:"text-base font-medium",children:"Votre nouveau PIN"}),(0,e.jsx)(m,{children:(0,e.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,e.jsx)("code",{className:"bg-muted p-3 rounded text-base",children:o.pin}),(0,e.jsx)(p,{variant:"outline",className:"copy-button h-12 w-12",onClick:S,children:(0,e.jsx)(C,{className:"h-5 w-5"})})]})})]}),(0,e.jsxs)(l,{className:"bg-yellow-100",children:[(0,e.jsx)(i,{className:"h-5 w-5"}),(0,e.jsx)(c,{className:"text-base font-medium",children:"Attention"}),(0,e.jsx)(m,{className:"text-base",children:"Ce PIN ne sera affich\xE9 qu'une seule fois. Assurez-vous de le copier avant de quitter cette page."})]}),(0,e.jsxs)(d,{to:"/login",className:"inline-flex items-center justify-center w-full h-12 text-base font-medium text-white bg-primary rounded-md hover:bg-primary/90",children:[(0,e.jsx)(L,{className:"mr-2 h-5 w-5"}),"Se connecter maintenant"]})]}):(0,e.jsxs)(l,{variant:"destructive",children:[(0,e.jsx)(i,{className:"h-5 w-5"}),(0,e.jsx)(c,{className:"text-base font-medium",children:"Erreur"}),(0,e.jsx)(m,{className:"text-base",children:f})]}):n?(0,e.jsxs)(h,{method:"post",children:[(0,e.jsx)("input",{type:"hidden",name:"token",value:u}),(0,e.jsx)("input",{type:"hidden",name:"action",value:"generate"}),(0,e.jsx)(p,{type:"submit",className:"w-full h-12 text-base",disabled:x.state==="submitting",children:x.state==="submitting"?(0,e.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,e.jsx)(I,{className:"h-5 w-5 animate-spin"}),"G\xE9n\xE9ration en cours..."]}):"G\xE9n\xE9rer un nouveau PIN"})]}):null,!o?.pin&&(0,e.jsx)("div",{className:"pt-4",children:(0,e.jsxs)(d,{to:"/",prefetch:"intent",className:"inline-flex items-center text-base text-muted-foreground hover:text-primary",children:[(0,e.jsx)(P,{className:"mr-2 h-5 w-5"}),"Retour \xE0 la page de connexion"]})})]})]}),(0,e.jsx)("div",{className:"text-center text-base text-muted-foreground",children:"\xA9 2024 Pharm. Val Doise - By Selys-Africa"})]})})}),(0,e.jsx)("div",{className:"hidden lg:block w-1/2 relative",children:(0,e.jsx)("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:"url('https://images.unsplash.com/photo-1562243061-204550d8a2c9?q=80&w=1887&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D')"},children:(0,e.jsx)("div",{className:"absolute inset-0 bg-primary/70 backdrop-blur-sm",children:(0,e.jsxs)("div",{className:"flex h-full flex-col items-center justify-center px-12 text-center text-primary-foreground",children:[(0,e.jsx)("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold mb-6",children:"S\xE9curit\xE9 renforc\xE9e"}),(0,e.jsx)("p",{className:"text-lg sm:text-xl",children:"La g\xE9n\xE9ration d'un nouveau PIN garantit la s\xE9curit\xE9 de votre compte. Assurez-vous de le m\xE9moriser ou de le stocker en lieu s\xFBr."})]})})})})]})}export{j as default,_ as links,J as meta};
