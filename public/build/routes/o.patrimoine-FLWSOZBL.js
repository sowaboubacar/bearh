import{a as ge}from"/build/_shared/chunk-XEDCDRJP.js";import{a as _,b as se}from"/build/_shared/chunk-ABDDDOIB.js";import{a as ee,b as ae,c as te,d as w,e as i,f as o}from"/build/_shared/chunk-IEDNE26R.js";import"/build/_shared/chunk-M3TRH43M.js";import{a as Z}from"/build/_shared/chunk-WZRQ3RQI.js";import{a as N,b as v,c as T,d as C,e as D,f as y,g as S,h as $}from"/build/_shared/chunk-KLKNQD3Q.js";import"/build/_shared/chunk-PGURRWG5.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as pe}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as M,b as G,c as V,e as J,f as O}from"/build/_shared/chunk-G5A27C7O.js";import{h as t}from"/build/_shared/chunk-NVGVVEPD.js";import{Ea as f,K as x,Q as z,W as K,ka as Q,oa as W,ra as Y,w as X,xa as b,z as q}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as R,h as F,i as A,k as l,l as E,p as j,r as U}from"/build/_shared/chunk-GTSSQFHM.js";import{a as ue,b as I}from"/build/_shared/chunk-BBTKOQ57.js";import{e as m}from"/build/_shared/chunk-UED2Q7CE.js";var ie=m(ue());var he=m(ge());var xe=m(pe());var e=m(I());function oe(){let{patrimoines:n,search:d,view:ne,page:c,limit:g,can:r}=j(),[u,re]=(0,ie.useState)(!1),[le,p]=F(),be=A(),ce=U(),me=R().state==="loading",s=le.get("view")||ne,B=a=>{re(!0),ce.submit({id:a,action:"delete"},{method:"post"})},de=a=>{a.preventDefault();let h=new FormData(a.currentTarget).get("search");p({search:h,view:s})},L=a=>{p({search:d,view:a})},k=a=>{switch(a){case"Active":return(0,e.jsx)(X,{className:"h-6 w-6 text-green-500"});case"Under Maintenance":return(0,e.jsx)(Q,{className:"h-6 w-6 text-yellow-500"});case"Out of Service":return(0,e.jsx)(q,{className:"h-6 w-6 text-red-500"});default:return null}},P=a=>["users","positions","teams","departments","hourGroups","access"].reduce((H,h)=>H+(a[h]?.length||0),0);return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8 space-y-6",children:[(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,e.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold",children:"Patrimoine"}),r?.create&&(0,e.jsx)(t,{asChild:!0,className:"w-full sm:w-auto h-12 text-base",children:(0,e.jsxs)(l,{prefetch:"intent",to:"/o/patrimoine/new",children:[(0,e.jsx)(W,{className:"mr-2 h-5 w-5"}),"Nouvel actif"]})})]}),(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-4",children:[(0,e.jsxs)(E,{onSubmit:de,className:"flex items-center gap-2 w-full sm:w-auto sm:flex-1",children:[(0,e.jsx)(Z,{type:"search",name:"search",placeholder:"Rechercher dans le patrimoine...",defaultValue:d,className:"h-12 text-base"}),(0,e.jsx)(t,{type:"submit",className:"h-12 w-12 flex-shrink-0",children:(0,e.jsx)(Y,{className:"h-5 w-5"})})]}),(0,e.jsxs)("div",{className:"flex gap-2",children:[(0,e.jsx)(t,{variant:s==="grid"?"default":"outline",onClick:()=>L("grid"),className:"flex-1 sm:flex-none h-12",children:(0,e.jsx)(z,{className:"h-5 w-5"})}),(0,e.jsx)(t,{variant:s==="list"?"default":"outline",onClick:()=>L("list"),className:"flex-1 sm:flex-none h-12",children:(0,e.jsx)(K,{className:"h-5 w-5"})})]})]}),me?(0,e.jsx)(se,{view:s,itemCount:g}):n.results.length>0?s==="grid"?(0,e.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:n.results.map(a=>(0,e.jsxs)(M,{children:[(0,e.jsx)(G,{className:"p-4 sm:p-6",children:(0,e.jsxs)(V,{className:"flex items-center justify-between text-lg font-bold",children:[(0,e.jsx)("span",{children:a.name}),(0,e.jsxs)("div",{className:"flex items-center h-8 text-base px-3 py-1 bg-secondary text-secondary-foreground rounded-md whitespace-nowrap overflow-hidden text-ellipsis",children:[k(a.status),(0,e.jsx)("span",{className:"ml-2 text-xs sm:text-sm truncate",children:a.status})]})]})}),(0,e.jsxs)(J,{className:"p-4 sm:p-6 pt-0 space-y-3",children:[(0,e.jsxs)("p",{className:"text-base text-muted-foreground",children:["Type: ",a.type.name]}),(0,e.jsxs)("p",{className:"text-base text-muted-foreground",children:["Date d'achat: ",new Date(a.purchaseDate).toLocaleString()]}),(0,e.jsxs)("p",{className:"text-base text-muted-foreground",children:["Statut: ",a.status]}),(0,e.jsxs)("p",{className:"text-base text-muted-foreground",children:["Pi\xE8ces Jointes: ",a.attachments.length]}),(0,e.jsxs)("p",{className:"text-base text-muted-foreground",children:["Assign\xE9 \xE0 ",P(a.assignedTo)," entit\xE9(s)"]})]}),(0,e.jsxs)(O,{className:"p-4 sm:p-6 flex justify-between gap-3",children:[(0,e.jsx)(t,{asChild:!0,variant:"outline",className:"flex-1 h-12 text-base",children:(0,e.jsx)(l,{prefetch:"intent",to:`/o/patrimoine/view/${a.id}`,children:(0,e.jsx)(x,{className:"mr-2 h-5 w-5"})})}),r?.edit&&(0,e.jsx)(t,{asChild:!0,variant:"outline",className:"flex-1 h-12 text-base",children:(0,e.jsx)(l,{prefetch:"intent",to:`/o/patrimoine/edit/${a.id}`,children:(0,e.jsx)(b,{className:"mr-2 h-5 w-5"})})}),r?.delete&&(0,e.jsxs)(N,{children:[(0,e.jsx)(v,{asChild:!0,children:(0,e.jsx)(t,{variant:"destructive",className:"flex-1 h-12 text-base",children:(0,e.jsx)(f,{className:"mr-2 h-5 w-5"})})}),(0,e.jsxs)(C,{className:"sm:max-w-[425px]",children:[(0,e.jsxs)(D,{children:[(0,e.jsx)(S,{className:"text-xl",children:"\xCAtes-vous s\xFBr de vouloir supprimer ce patrimoine ?"}),(0,e.jsx)($,{className:"text-base",children:"Cette action ne peut pas \xEAtre annul\xE9e."})]}),(0,e.jsxs)(y,{className:"gap-3 sm:gap-0",children:[(0,e.jsx)(T,{asChild:!0,children:(0,e.jsx)(t,{variant:"outline",className:"h-12 text-base",children:"Annuler"})}),(0,e.jsx)(t,{variant:"destructive",onClick:()=>B(a.id),disabled:u,className:"h-12 text-base",children:u?"Suppression...":"Supprimer"})]})]})]})]})]},a.id))}):(0,e.jsx)("div",{className:"rounded-lg border overflow-x-auto",children:(0,e.jsxs)(ee,{children:[(0,e.jsx)(ae,{children:(0,e.jsxs)(w,{children:[(0,e.jsx)(i,{className:"text-base whitespace-nowrap",children:"Nom"}),(0,e.jsx)(i,{className:"text-base whitespace-nowrap hidden sm:table-cell",children:"Type"}),(0,e.jsx)(i,{className:"text-base whitespace-nowrap hidden lg:table-cell",children:"Date d'achat"}),(0,e.jsx)(i,{className:"text-base whitespace-nowrap",children:"Statut"}),(0,e.jsx)(i,{className:"text-base whitespace-nowrap hidden md:table-cell",children:"Pi\xE8ces Jointes"}),(0,e.jsx)(i,{className:"text-base whitespace-nowrap hidden lg:table-cell",children:"Assign\xE9 \xE0"}),(0,e.jsx)(i,{className:"text-base text-right",children:"Actions"})]})}),(0,e.jsx)(te,{children:n.results.map(a=>(0,e.jsxs)(w,{children:[(0,e.jsx)(o,{className:"font-medium text-base",children:a.name}),(0,e.jsx)(o,{className:"hidden sm:table-cell text-base",children:a.type.name}),(0,e.jsx)(o,{className:"hidden lg:table-cell text-base",children:new Date(a.purchaseDate).toLocaleString()}),(0,e.jsx)(o,{children:(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[k(a.status),(0,e.jsx)("span",{className:"text-base",children:a.status})]})}),(0,e.jsx)(o,{className:"hidden md:table-cell text-base",children:a.attachments.length}),(0,e.jsxs)(o,{className:"hidden lg:table-cell text-base",children:[P(a.assignedTo)," entit\xE9(s)"]}),(0,e.jsx)(o,{children:(0,e.jsxs)("div",{className:"flex justify-end gap-2",children:[r?.view&&(0,e.jsx)(t,{asChild:!0,variant:"outline",className:"h-12 text-base px-3",children:(0,e.jsx)(l,{prefetch:"intent",to:`/o/patrimoine/view/${a.id}`,children:(0,e.jsx)(x,{className:"h-5 w-5"})})}),r?.edit&&(0,e.jsx)(t,{asChild:!0,variant:"outline",className:"h-12 text-base px-3",children:(0,e.jsx)(l,{prefetch:"intent",to:`/o/patrimoine/edit/${a.id}`,children:(0,e.jsx)(b,{className:"h-5 w-5"})})}),r?.delete&&(0,e.jsxs)(N,{children:[(0,e.jsx)(v,{asChild:!0,children:(0,e.jsx)(t,{variant:"destructive",className:"h-12 text-base px-3",children:(0,e.jsx)(f,{className:"h-5 w-5"})})}),(0,e.jsxs)(C,{className:"sm:max-w-[425px]",children:[(0,e.jsxs)(D,{children:[(0,e.jsx)(S,{className:"text-xl",children:"\xCAtes-vous s\xFBr de vouloir supprimer ce patrimoine ?"}),(0,e.jsx)($,{className:"text-base",children:"Cette action ne peut pas \xEAtre annul\xE9e."})]}),(0,e.jsxs)(y,{className:"gap-3 sm:gap-0",children:[(0,e.jsx)(T,{asChild:!0,children:(0,e.jsx)(t,{variant:"outline",className:"h-12 text-base",children:"Annuler"})}),(0,e.jsx)(t,{variant:"destructive",onClick:()=>B(a.id),disabled:u,className:"h-12 text-base",children:u?"Suppression...":"Supprimer"})]})]})]})]})})]},a.id))})]})}):(0,e.jsx)(_,{type:"patrimoine",createLink:"/o/patrimoine/new",view:s}),n.totalResults>0&&(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4",children:[(0,e.jsx)(t,{onClick:()=>p({search:d,view:s,page:(c-1).toString()}),disabled:c===1,className:"w-full sm:w-auto h-12 text-base",children:"Pr\xE9c\xE9dent"}),(0,e.jsxs)("span",{className:"text-base",children:["Page ",c," sur ",Math.ceil(n.totalResults/g)]}),(0,e.jsx)(t,{onClick:()=>p({search:d,view:s,page:(c+1).toString()}),disabled:c*g>=n.totalResults,className:"w-full sm:w-auto h-12 text-base",children:"Suivant"})]})]})}export{oe as default};
