import{a as B}from"/build/_shared/chunk-6QXFNV75.js";import{a as ue}from"/build/_shared/chunk-3DB3GQTY.js";import{a as _,b as ae}from"/build/_shared/chunk-ABDDDOIB.js";import{a as G,b as ee,c as te,d as N,e as s,f as l}from"/build/_shared/chunk-IEDNE26R.js";import"/build/_shared/chunk-M3TRH43M.js";import{a as Z}from"/build/_shared/chunk-WZRQ3RQI.js";import{a as v,b as C,c as D,d as T,e as S,f as y,g as A,h as L}from"/build/_shared/chunk-KLKNQD3Q.js";import"/build/_shared/chunk-PGURRWG5.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as ge}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as V,b as I,c as q,d as z,e as J,f as K}from"/build/_shared/chunk-G5A27C7O.js";import{h as a}from"/build/_shared/chunk-NVGVVEPD.js";import{Ea as f,K as b,Q,W,oa as X,ra as Y,xa as x}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as R,h as j,i as E,k as r,l as M,p as U,r as $}from"/build/_shared/chunk-GTSSQFHM.js";import{a as de,b as O}from"/build/_shared/chunk-BBTKOQ57.js";import{e as m}from"/build/_shared/chunk-UED2Q7CE.js";var H=m(de());var pe=m(ue());var he=m(ge());var e=m(O());function se(){let{hourGroups:o,search:d,view:le,page:c,limit:h,can:n}=U(),[g,ie]=(0,H.useState)(!1),[ne,u]=j(),we=E(),oe=$(),re=R().state==="loading",[P,w]=(0,H.useState)(null),i=ne.get("view")||le,F=t=>{ie(!0),oe.submit({id:t,action:"delete"},{method:"post"}),w(null)},ce=t=>{t.preventDefault();let me=new FormData(t.currentTarget).get("search");u({search:me,view:i})},k=t=>{u({search:d,view:t})};return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8 space-y-6",children:[(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,e.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold",children:"Programme"}),n?.create&&(0,e.jsx)(a,{asChild:!0,className:"w-full sm:w-auto h-11 text-base",children:(0,e.jsxs)(r,{prefetch:"intent",to:"/o/hour-group/new",children:[(0,e.jsx)(X,{className:"mr-2 h-5 w-5"}),"Nouveau Programmes"]})})]}),(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,e.jsxs)(M,{onSubmit:ce,className:"flex w-full sm:w-auto items-center gap-2",children:[(0,e.jsx)(Z,{type:"search",name:"search",placeholder:"Rechercher des groupes d'heures...",defaultValue:d,className:"h-11 text-base"}),(0,e.jsx)(a,{type:"submit",className:"h-11 w-11",children:(0,e.jsx)(Y,{className:"h-5 w-5"})})]}),(0,e.jsxs)("div",{className:"flex gap-2 w-full sm:w-auto",children:[(0,e.jsx)(a,{variant:i==="grid"?"default":"outline",onClick:()=>k("grid"),className:"flex-1 sm:flex-none h-11",children:(0,e.jsx)(Q,{className:"h-5 w-5"})}),(0,e.jsx)(a,{variant:i==="list"?"default":"outline",onClick:()=>k("list"),className:"flex-1 sm:flex-none h-11",children:(0,e.jsx)(W,{className:"h-5 w-5"})})]})]}),re?(0,e.jsx)(ae,{view:i,itemCount:h}):o.results.length>0?i==="grid"?(0,e.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:o.results.map(t=>(0,e.jsxs)(V,{className:"flex flex-col",children:[(0,e.jsxs)(I,{className:"space-y-3",children:[(0,e.jsxs)(q,{className:"text-xl",children:[t.name||"",t.attachments.length>0&&(0,e.jsx)("img",{src:B(t.attachments)?.file?.url,alt:B(t.attachments)?.label||"",className:"w-full h-40 object-cover rounded-md mt-2"})]}),(0,e.jsx)(z,{className:"text-base",children:t.note||"Aucune note"})]}),(0,e.jsxs)(J,{className:"space-y-2",children:[(0,e.jsxs)("p",{className:"text-base text-muted-foreground",children:["P\xE9riode : ",new Date(t.startAt).toLocaleString()," - ",new Date(t.endAt).toLocaleString()]}),(0,e.jsxs)("p",{className:"text-base text-muted-foreground",children:["Pause : ",t.restShouldStartAt.slice(0,5)," - ",t.restShouldEndAt.slice(0,5)]}),(0,e.jsxs)("p",{className:"text-base text-muted-foreground",children:["Membre(s): ",t.members?.length]})]}),(0,e.jsx)(K,{className:"mt-auto pt-4",children:(0,e.jsxs)("div",{className:"flex justify-between w-full gap-2",children:[n?.view&&(0,e.jsx)(a,{asChild:!0,variant:"outline",className:"flex-1 h-11",children:(0,e.jsx)(r,{prefetch:"intent",to:`/o/hour-group/view/${t.id}`,children:(0,e.jsx)(b,{className:"mr-2 h-5 w-5"})})}),n?.edit&&(0,e.jsx)(a,{asChild:!0,variant:"outline",className:"flex-1 h-11",children:(0,e.jsx)(r,{prefetch:"intent",to:`/o/hour-group/edit/${t.id}`,children:(0,e.jsx)(x,{className:"mr-2 h-5 w-5"})})}),n?.delete&&(0,e.jsxs)(v,{open:P===t.id,onOpenChange:p=>w(p?t.id:null),children:[(0,e.jsx)(C,{asChild:!0,children:(0,e.jsx)(a,{variant:"destructive",className:"h-11 w-11",children:(0,e.jsx)(f,{className:"h-5 w-5"})})}),(0,e.jsxs)(T,{className:"sm:max-w-[425px]",children:[(0,e.jsxs)(S,{children:[(0,e.jsx)(A,{className:"text-lg sm:text-xl",children:"\xCAtes-vous s\xFBr de vouloir supprimer ce programmes ?"}),(0,e.jsx)(L,{className:"text-base",children:"Cette action ne peut pas \xEAtre annul\xE9e."})]}),(0,e.jsxs)(y,{className:"gap-3",children:[(0,e.jsx)(D,{asChild:!0,children:(0,e.jsx)(a,{variant:"outline",className:"h-11 text-base",children:"Annuler"})}),(0,e.jsx)(a,{variant:"destructive",onClick:()=>F(t.id),disabled:g,className:"h-11 text-base",children:g?"Suppression...":"Supprimer"})]})]})]})]})})]},t.id))}):(0,e.jsx)("div",{className:"rounded-lg border overflow-x-auto",children:(0,e.jsxs)(G,{children:[(0,e.jsx)(ee,{children:(0,e.jsxs)(N,{children:[(0,e.jsx)(s,{className:"text-base whitespace-nowrap",children:"Programme"}),(0,e.jsx)(s,{className:"text-base whitespace-nowrap hidden md:table-cell",children:"Note"}),(0,e.jsx)(s,{className:"text-base whitespace-nowrap hidden sm:table-cell",children:"Pi\xE8ces jointes"}),(0,e.jsx)(s,{className:"text-base whitespace-nowrap",children:"Membres"}),(0,e.jsx)(s,{className:"text-base whitespace-nowrap",children:"D\xE9but"}),(0,e.jsx)(s,{className:"text-base whitespace-nowrap hidden sm:table-cell",children:"Fin"}),(0,e.jsx)(s,{className:"text-base whitespace-nowrap hidden md:table-cell",children:"Pause"}),(0,e.jsx)(s,{className:"text-base text-right",children:"Actions"})]})}),(0,e.jsx)(te,{children:o.results.map(t=>(0,e.jsxs)(N,{children:[(0,e.jsx)(l,{className:"font-medium text-base",children:t.name||"Aucune note"}),(0,e.jsx)(l,{className:"text-base hidden md:table-cell",children:t.note||"Aucune note"}),(0,e.jsx)(l,{className:"text-base hidden sm:table-cell",children:t.attachments?.length}),(0,e.jsx)(l,{className:"text-base",children:t.members?.length}),(0,e.jsx)(l,{className:"text-base",children:new Date(t.startAt).toLocaleString()}),(0,e.jsx)(l,{className:"text-base hidden sm:table-cell",children:new Date(t.endAt).toLocaleString()}),(0,e.jsxs)(l,{className:"text-base hidden md:table-cell",children:[t.restShouldStartAt.slice(0,5)," - ",t.restShouldEndAt.slice(0,5)]}),(0,e.jsx)(l,{children:(0,e.jsxs)("div",{className:"flex justify-end gap-2",children:[n?.view&&(0,e.jsx)(a,{asChild:!0,variant:"outline",className:"h-11 w-11",children:(0,e.jsx)(r,{prefetch:"intent",to:`/o/hour-group/view/${t.id}`,children:(0,e.jsx)(b,{className:"h-5 w-5"})})}),n?.edit&&(0,e.jsx)(a,{asChild:!0,variant:"outline",className:"h-11 w-11",children:(0,e.jsx)(r,{prefetch:"intent",to:`/o/hour-group/edit/${t.id}/`,children:(0,e.jsx)(x,{className:"h-5 w-5"})})}),n?.delete&&(0,e.jsxs)(v,{open:P===t.id,onOpenChange:p=>w(p?t.id:null),children:[(0,e.jsx)(C,{asChild:!0,children:(0,e.jsx)(a,{variant:"destructive",className:"h-11 w-11",children:(0,e.jsx)(f,{className:"h-5 w-5"})})}),(0,e.jsxs)(T,{className:"sm:max-w-[425px]",children:[(0,e.jsxs)(S,{children:[(0,e.jsx)(A,{className:"text-lg sm:text-xl",children:"\xCAtes-vous s\xFBr de vouloir supprimer ce programmes ?"}),(0,e.jsx)(L,{className:"text-base",children:"Cette action ne peut pas \xEAtre annul\xE9e."})]}),(0,e.jsxs)(y,{className:"gap-3",children:[(0,e.jsx)(D,{asChild:!0,children:(0,e.jsx)(a,{variant:"outline",className:"h-11 text-base",children:"Annuler"})}),(0,e.jsx)(a,{variant:"destructive",onClick:()=>F(t.id),disabled:g,className:"h-11 text-base",children:g?"Suppression...":"Supprimer"})]})]})]})]})})]},t.id))})]})}):(0,e.jsx)(_,{type:"groupes d'heures",createLink:"/o/hour-group/new",view:i}),o.totalResults>0&&(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4",children:[(0,e.jsx)(a,{onClick:()=>u({search:d,view:i,page:(c-1).toString()}),disabled:c===1,className:"w-full sm:w-auto h-11 text-base",children:"Pr\xE9c\xE9dent"}),(0,e.jsxs)("span",{className:"text-base",children:["Page ",c," sur ",Math.ceil(o.totalResults/h)]}),(0,e.jsx)(a,{onClick:()=>u({search:d,view:i,page:(c+1).toString()}),disabled:c*h>=o.totalResults,className:"w-full sm:w-auto h-11 text-base",children:"Suivant"})]})]})}export{se as default};
