import{a as j}from"/build/_shared/chunk-MF2GPUAM.js";import{a as L,b as H}from"/build/_shared/chunk-ABDDDOIB.js";import{a as R,b as P,c as k,d as u,e as s,f as l}from"/build/_shared/chunk-IEDNE26R.js";import"/build/_shared/chunk-M3TRH43M.js";import{a as F}from"/build/_shared/chunk-WZRQ3RQI.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as V}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as N,b as w,c as v,e as T}from"/build/_shared/chunk-G5A27C7O.js";import{h as i}from"/build/_shared/chunk-NVGVVEPD.js";import{Q as D,W as y,d as C,ra as S}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as g,h as b,l as f,p as h}from"/build/_shared/chunk-GTSSQFHM.js";import{b as x}from"/build/_shared/chunk-BBTKOQ57.js";import{e as m}from"/build/_shared/chunk-UED2Q7CE.js";var U=m(j());var I=m(V());var e=m(x());function B(){let{primes:o,search:n,view:A,page:r,limit:d}=h(),[$,c]=b(),E=g().state==="loading",t=$.get("view")||A,q=a=>{a.preventDefault();let M=new FormData(a.currentTarget).get("search");c({search:M,view:t})},p=a=>{c({search:n,view:a})};return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8 space-y-6",children:[(0,e.jsx)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:(0,e.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold",children:"Gestion des Primes"})}),(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-4",children:[(0,e.jsxs)(f,{onSubmit:q,className:"flex items-center gap-2 w-full sm:w-auto sm:flex-1",children:[(0,e.jsx)(F,{type:"search",name:"search",placeholder:"Rechercher des primes...",defaultValue:n,className:"h-12 text-base"}),(0,e.jsx)(i,{type:"submit",className:"h-12 w-12 flex-shrink-0",children:(0,e.jsx)(S,{className:"h-5 w-5"})})]}),(0,e.jsxs)("div",{className:"flex gap-2",children:[(0,e.jsx)(i,{variant:t==="grid"?"default":"outline",onClick:()=>p("grid"),className:"flex-1 sm:flex-none h-12",children:(0,e.jsx)(D,{className:"h-5 w-5"})}),(0,e.jsx)(i,{variant:t==="list"?"default":"outline",onClick:()=>p("list"),className:"flex-1 sm:flex-none h-12",children:(0,e.jsx)(y,{className:"h-5 w-5"})})]})]}),E?(0,e.jsx)(H,{view:t,itemCount:d}):o?.length>0?t==="grid"?(0,e.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:o.map(a=>(0,e.jsxs)(N,{children:[(0,e.jsx)(w,{className:"p-4 sm:p-6",children:(0,e.jsxs)(v,{className:"flex items-center text-lg font-bold",children:[(0,e.jsx)(C,{className:"mr-3 h-5 w-5"}),(0,e.jsxs)("div",{className:"space-y-1",children:[(0,e.jsxs)("div",{children:["Prime de ",a.user?.firstName," ",a.user?.lastName]}),(0,e.jsxs)("div",{className:"text-base font-normal text-muted-foreground",children:[new Date(a.startTrackingDate).toLocaleString()," - ",new Date(a.endTrackingDate).toLocaleString()]})]})]})}),(0,e.jsxs)(T,{className:"p-4 sm:p-6 pt-0 space-y-6",children:[(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsxs)("p",{className:"text-base text-muted-foreground",children:["Montant total: ",a.totalAmount.toFixed(2)," F CFA"]}),(0,e.jsxs)("p",{className:"text-base text-muted-foreground",children:["Date de calcul: ",new Date(a.calculationDate).toLocaleString()]})]}),(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsx)("h5",{className:"text-lg font-semibold text-center",children:"Details du Calcul"}),(0,e.jsxs)("ol",{className:"space-y-3 text-base",children:[(0,e.jsxs)("li",{children:[(0,e.jsx)("span",{className:"font-medium",children:"KPIs:"})," ",a.calculationDetails.kpiValue?.title]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("span",{className:"font-medium",children:"Cat\xE9gorie:"})," ",a.calculationDetails.bonusCategory?.title]}),(0,e.jsxs)("li",{children:[(0,e.jsx)("span",{className:"font-medium",children:"Remarques:"})," ",a.calculationDetails.observations?.length," Remarque(s)"]}),(0,e.jsxs)("li",{className:"pt-2",children:[(0,e.jsx)("span",{className:"font-medium",children:"Formule:"})," ",(0,e.jsx)("i",{children:a.calculationDetails.formula})]})]})]})]})]},a.id))}):(0,e.jsx)("div",{className:"rounded-lg border overflow-x-auto",children:(0,e.jsxs)(R,{children:[(0,e.jsx)(P,{children:(0,e.jsxs)(u,{children:[(0,e.jsx)(s,{className:"text-base whitespace-nowrap",children:"Employ\xE9"}),(0,e.jsx)(s,{className:"text-base whitespace-nowrap hidden sm:table-cell",children:"P\xE9riode"}),(0,e.jsx)(s,{className:"text-base whitespace-nowrap",children:"Montant total"}),(0,e.jsx)(s,{className:"text-base whitespace-nowrap hidden lg:table-cell",children:"Bonus de performance"}),(0,e.jsx)(s,{className:"text-base whitespace-nowrap hidden lg:table-cell",children:"Bonus de remarque"}),(0,e.jsx)(s,{className:"text-base whitespace-nowrap hidden md:table-cell",children:"Remarques"}),(0,e.jsx)(s,{className:"text-base whitespace-nowrap hidden xl:table-cell",children:"Formule"})]})}),(0,e.jsx)(k,{children:o.map(a=>(0,e.jsxs)(u,{children:[(0,e.jsxs)(l,{className:"font-medium text-base",children:[a.user.firstName," ",a.user.lastName]}),(0,e.jsxs)(l,{className:"hidden sm:table-cell text-base",children:[new Date(a.startTrackingDate).toLocaleString()," -"," ",new Date(a.endTrackingDate).toLocaleString()]}),(0,e.jsxs)(l,{className:"text-base",children:[a.totalAmount.toFixed(2)," F CFA"]}),(0,e.jsx)(l,{className:"hidden lg:table-cell text-base",children:a.calculationDetails.kpiValue?.title}),(0,e.jsx)(l,{className:"hidden lg:table-cell text-base",children:a.calculationDetails.bonusCategory?.title}),(0,e.jsx)(l,{className:"hidden md:table-cell text-base",children:a.calculationDetails.observations?.length}),(0,e.jsx)(l,{className:"hidden xl:table-cell text-base",children:(0,e.jsx)("i",{children:a.calculationDetails.formula})})]},a.id))})]})}):(0,e.jsx)(L,{type:"Primes",view:t}),o.totalResults>0&&(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4",children:[(0,e.jsx)(i,{onClick:()=>c({search:n,view:t,page:(r-1).toString()}),disabled:r===1,className:"w-full sm:w-auto h-12 text-base",children:"Pr\xE9c\xE9dent"}),(0,e.jsxs)("span",{className:"text-base",children:["Page ",r," sur ",Math.ceil(o.totalResults/d)]}),(0,e.jsx)(i,{onClick:()=>c({search:n,view:t,page:(r+1).toString()}),disabled:r*d>=o.totalResults,className:"w-full sm:w-auto h-12 text-base",children:"Suivant"})]})]})}export{B as default};
