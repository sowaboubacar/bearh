import{a as oe}from"/build/_shared/chunk-NSM7WEXO.js";import{a as Ht}from"/build/_shared/chunk-HWMDRUXM.js";import{a as ae}from"/build/_shared/chunk-NX6ZEDKE.js";import{b as z}from"/build/_shared/chunk-FB4U2LCE.js";import{a as ne}from"/build/_shared/chunk-35S5HMBT.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as ee}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as At,b as It,c as Ot,d as Mt,e as jt}from"/build/_shared/chunk-G5A27C7O.js";import{a as Z,h as Lt}from"/build/_shared/chunk-NVGVVEPD.js";import{Y as Wt,b as Bt}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as kt,k as Nt,l as Tt,q as Dt}from"/build/_shared/chunk-GTSSQFHM.js";import{a as X,b as et}from"/build/_shared/chunk-BBTKOQ57.js";import{e as h}from"/build/_shared/chunk-UED2Q7CE.js";var ye=h(ne());var rt=h(X());var ot=h(X());var e=h(X(),1),at=h(X(),1),P=h(X(),1),re=Object.defineProperty,ie=Object.defineProperties,le=Object.getOwnPropertyDescriptors,nt=Object.getOwnPropertySymbols,Ft=Object.prototype.hasOwnProperty,Gt=Object.prototype.propertyIsEnumerable,_t=(n,o,a)=>o in n?re(n,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[o]=a,se=(n,o)=>{for(var a in o||(o={}))Ft.call(o,a)&&_t(n,a,o[a]);if(nt)for(var a of nt(o))Gt.call(o,a)&&_t(n,a,o[a]);return n},ue=(n,o)=>ie(n,le(o)),ce=(n,o)=>{var a={};for(var s in n)Ft.call(n,s)&&o.indexOf(s)<0&&(a[s]=n[s]);if(n!=null&&nt)for(var s of nt(n))o.indexOf(s)<0&&Gt.call(n,s)&&(a[s]=n[s]);return a};function pe(n){let o=setTimeout(n,0),a=setTimeout(n,10),s=setTimeout(n,50);return[o,a,s]}function de(n){let o=at.useRef();return at.useEffect(()=>{o.current=n}),o.current}var me=18,$t=40,fe=`${$t}px`,ge=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function he({containerRef:n,inputRef:o,pushPasswordManagerStrategy:a,isFocused:s}){let[v,u]=P.useState(!1),[O,C]=P.useState(!1),[T,M]=P.useState(!1),x=P.useMemo(()=>a==="none"?!1:(a==="increase-width"||a==="experimental-no-flickering")&&v&&O,[v,O,a]),E=P.useCallback(()=>{let f=n.current,D=o.current;if(!f||!D||T||a==="none")return;let w=f,k=w.getBoundingClientRect().left+w.offsetWidth,F=w.getBoundingClientRect().top+w.offsetHeight/2,c=k-me,V=F;document.querySelectorAll(ge).length===0&&document.elementFromPoint(c,V)===f||(u(!0),M(!0))},[n,o,T,a]);return P.useEffect(()=>{let f=n.current;if(!f||a==="none")return;function D(){let k=window.innerWidth-f.getBoundingClientRect().right;C(k>=$t)}D();let w=setInterval(D,1e3);return()=>{clearInterval(w)}},[n,a]),P.useEffect(()=>{let f=s||document.activeElement===o.current;if(a==="none"||!f)return;let D=setTimeout(E,0),w=setTimeout(E,2e3),k=setTimeout(E,5e3),F=setTimeout(()=>{M(!0)},6e3);return()=>{clearTimeout(D),clearTimeout(w),clearTimeout(k),clearTimeout(F)}},[o,s,a,E]),{hasPWMBadge:v,willPushPWMBadge:x,PWM_BADGE_SPACE_WIDTH:fe}}var ve=e.createContext({}),pt=e.forwardRef((n,o)=>{var a=n,{value:s,onChange:v,maxLength:u,textAlign:O="left",pattern:C,placeholder:T,inputMode:M="numeric",onComplete:x,pushPasswordManagerStrategy:E="increase-width",pasteTransformer:f,containerClassName:D,noScriptCSSFallback:w=be,render:k,children:F}=a,c=ce(a,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),V,gt,ht,vt,bt;let[Yt,Ut]=e.useState(typeof c.defaultValue=="string"?c.defaultValue:""),p=s??Yt,j=de(p),Y=e.useCallback(t=>{v?.(t),Ut(t)},[v]),R=e.useMemo(()=>C?typeof C=="string"?new RegExp(C):C:null,[C]),d=e.useRef(null),it=e.useRef(null),lt=e.useRef({value:p,onChange:Y,isIOS:typeof window<"u"&&((gt=(V=window?.CSS)==null?void 0:V.supports)==null?void 0:gt.call(V,"-webkit-touch-callout","none"))}),Q=e.useRef({prev:[(ht=d.current)==null?void 0:ht.selectionStart,(vt=d.current)==null?void 0:vt.selectionEnd,(bt=d.current)==null?void 0:bt.selectionDirection]});e.useImperativeHandle(o,()=>d.current,[]),e.useEffect(()=>{let t=d.current,r=it.current;if(!t||!r)return;lt.current.value!==t.value&&lt.current.onChange(t.value),Q.current.prev=[t.selectionStart,t.selectionEnd,t.selectionDirection];function m(){if(document.activeElement!==t){q(null),K(null);return}let l=t.selectionStart,g=t.selectionEnd,tt=t.selectionDirection,S=t.maxLength,B=t.value,N=Q.current.prev,A=-1,I=-1,W;if(B.length!==0&&l!==null&&g!==null){let Jt=l===g,Qt=l===B.length&&B.length<S;if(Jt&&!Qt){let H=l;if(H===0)A=0,I=1,W="forward";else if(H===S)A=H-1,I=H,W="backward";else if(S>1&&B.length>1){let ct=0;if(N[0]!==null&&N[1]!==null){W=H<N[1]?"backward":"forward";let te=N[0]===N[1]&&N[0]<S;W==="backward"&&!te&&(ct=-1)}A=ct+H,I=ct+H+1}}A!==-1&&I!==-1&&A!==I&&d.current.setSelectionRange(A,I,W)}let Et=A!==-1?A:l,Rt=I!==-1?I:g,Zt=W??tt;q(Et),K(Rt),Q.current.prev=[Et,Rt,Zt]}if(document.addEventListener("selectionchange",m,{capture:!0}),m(),document.activeElement===t&&st(!0),!document.getElementById("input-otp-style")){let l=document.createElement("style");if(l.id="input-otp-style",document.head.appendChild(l),l.sheet){let g="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";J(l.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),J(l.sheet,`[data-input-otp]:autofill { ${g} }`),J(l.sheet,`[data-input-otp]:-webkit-autofill { ${g} }`),J(l.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),J(l.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let b=()=>{r&&r.style.setProperty("--root-height",`${t.clientHeight}px`)};b();let y=new ResizeObserver(b);return y.observe(t),()=>{document.removeEventListener("selectionchange",m,{capture:!0}),y.disconnect()}},[]);let[yt,xt]=e.useState(!1),[U,st]=e.useState(!1),[L,q]=e.useState(null),[G,K]=e.useState(null);e.useEffect(()=>{pe(()=>{var t,r,m,b;(t=d.current)==null||t.dispatchEvent(new Event("input"));let y=(r=d.current)==null?void 0:r.selectionStart,l=(m=d.current)==null?void 0:m.selectionEnd,g=(b=d.current)==null?void 0:b.selectionDirection;y!==null&&l!==null&&(q(y),K(l),Q.current.prev=[y,l,g])})},[p,U]),e.useEffect(()=>{j!==void 0&&p!==j&&j.length<u&&p.length===u&&x?.(p)},[u,x,j,p]);let $=he({containerRef:it,inputRef:d,pushPasswordManagerStrategy:E,isFocused:U}),wt=e.useCallback(t=>{let r=t.currentTarget.value.slice(0,u);if(r.length>0&&R&&!R.test(r)){t.preventDefault();return}typeof j=="string"&&r.length<j.length&&document.dispatchEvent(new Event("selectionchange")),Y(r)},[u,Y,j,R]),St=e.useCallback(()=>{var t;if(d.current){let r=Math.min(d.current.value.length,u-1),m=d.current.value.length;(t=d.current)==null||t.setSelectionRange(r,m),q(r),K(m)}st(!0)},[u]),Pt=e.useCallback(t=>{var r,m;let b=d.current;if(!f&&(!lt.current.isIOS||!t.clipboardData||!b))return;let y=t.clipboardData.getData("text/plain"),l=f?f(y):y;t.preventDefault();let g=(r=d.current)==null?void 0:r.selectionStart,tt=(m=d.current)==null?void 0:m.selectionEnd,S=(g!==tt?p.slice(0,g)+l+p.slice(tt):p.slice(0,g)+l+p.slice(g)).slice(0,u);if(S.length>0&&R&&!R.test(S))return;b.value=S,Y(S);let B=Math.min(S.length,u-1),N=S.length;b.setSelectionRange(B,N),q(B),K(N)},[u,Y,R,p]),qt=e.useMemo(()=>({position:"relative",cursor:c.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[c.disabled]),Ct=e.useMemo(()=>({position:"absolute",inset:0,width:$.willPushPWMBadge?`calc(100% + ${$.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:$.willPushPWMBadge?`inset(0 ${$.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:O,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[$.PWM_BADGE_SPACE_WIDTH,$.willPushPWMBadge,O]),Kt=e.useMemo(()=>e.createElement("input",ue(se({autoComplete:c.autoComplete||"one-time-code"},c),{"data-input-otp":!0,"data-input-otp-placeholder-shown":p.length===0||void 0,"data-input-otp-mss":L,"data-input-otp-mse":G,inputMode:M,pattern:R?.source,"aria-placeholder":T,style:Ct,maxLength:u,value:p,ref:d,onPaste:t=>{var r;Pt(t),(r=c.onPaste)==null||r.call(c,t)},onChange:wt,onMouseOver:t=>{var r;xt(!0),(r=c.onMouseOver)==null||r.call(c,t)},onMouseLeave:t=>{var r;xt(!1),(r=c.onMouseLeave)==null||r.call(c,t)},onFocus:t=>{var r;St(),(r=c.onFocus)==null||r.call(c,t)},onBlur:t=>{var r;st(!1),(r=c.onBlur)==null||r.call(c,t)}})),[wt,St,Pt,M,Ct,u,G,L,c,R?.source,p]),ut=e.useMemo(()=>({slots:Array.from({length:u}).map((t,r)=>{var m;let b=U&&L!==null&&G!==null&&(L===G&&r===L||r>=L&&r<G),y=p[r]!==void 0?p[r]:null,l=p[0]!==void 0?null:(m=T?.[r])!=null?m:null;return{char:y,placeholderChar:l,isActive:b,hasFakeCaret:b&&y===null}}),isFocused:U,isHovering:!c.disabled&&yt}),[U,yt,u,G,L,c.disabled,p]),Xt=e.useMemo(()=>k?k(ut):e.createElement(ve.Provider,{value:ut},F),[F,ut,k]);return e.createElement(e.Fragment,null,w!==null&&e.createElement("noscript",null,e.createElement("style",null,w)),e.createElement("div",{ref:it,"data-input-otp-container":!0,style:qt,className:D},Xt,e.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},Kt)))});pt.displayName="Input";function J(n,o){try{n.insertRule(o)}catch{console.error("input-otp could not insert CSS rule:",o)}}var be=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;var _=h(et()),dt=ot.forwardRef(({className:n,containerClassName:o,...a},s)=>(0,_.jsx)(pt,{ref:s,containerClassName:Z("flex items-center gap-2 has-[:disabled]:opacity-50",o),className:Z("disabled:cursor-not-allowed",n),...a}));dt.displayName="InputOTP";var mt=ot.forwardRef(({className:n,...o},a)=>(0,_.jsx)("div",{ref:a,className:Z("flex items-center",n),...o}));mt.displayName="InputOTPGroup";var ft=ot.forwardRef(({char:n,hasFakeCaret:o,isActive:a,className:s,...v},u)=>(0,_.jsxs)("div",{ref:u,className:Z("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",a&&"z-10 ring-2 ring-offset-background ring-ring",s),...v,children:[n,o&&(0,_.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:(0,_.jsx)("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]}));ft.displayName="InputOTPSlot";var xe=h(ee()),zt=h(oe());var we=h(ae());var i=h(et()),Se=()=>[{rel:"preload",as:"image",href:"https://images.unsplash.com/photo-1562243061-204550d8a2c9?q=80&w=1887&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{rel:"preload",as:"image",href:"/img/logo-rect-white.png"},{rel:"preload",as:"image",href:"/img/logo-rect-dark.png"}];function Vt(){let[n,o]=(0,rt.useState)(""),a=Dt(),v=kt().state==="submitting",[u,O]=(0,rt.useState)(null),[C,T]=(0,rt.useState)(null),M=(x,E)=>{O(x),T(E)};return(0,i.jsx)("div",{style:{backgroundImage:"url('https://images.unsplash.com/photo-1562243061-204550d8a2c9?q=80&w=1887&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D')"},className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-100 to-indigo-100 p-4",children:(0,i.jsx)(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:(0,i.jsxs)(At,{className:"shadow-lg",children:[(0,i.jsxs)(It,{className:"space-y-1",children:[(0,i.jsx)("div",{className:"flex justify-center mb-4",children:(0,i.jsx)(z.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:260,damping:20},children:(0,i.jsx)(Wt,{className:"w-16 h-16 text-indigo-500"})})}),(0,i.jsx)(Ot,{className:"text-2xl sm:text-3xl font-bold text-center text-gray-800",children:"Checking S\xE9curis\xE9"}),(0,i.jsx)(Mt,{className:"text-center text-gray-600",children:"Entrez votre code PIN pour continuer."})]}),(0,i.jsxs)(jt,{children:[(0,i.jsx)(Ht,{onLocationObtained:M}),u&&C&&(0,i.jsxs)(Tt,{method:"post",className:"space-y-6",children:[a?.error&&(0,i.jsx)(z.p,{initial:{opacity:0},animate:{opacity:1},className:"text-red-500 text-center text-sm mt-2 mb-2",children:a.error}),(0,i.jsx)("input",{type:"hidden",name:"latitude",value:u?.toString()}),(0,i.jsx)("input",{type:"hidden",name:"longitude",value:C?.toString()}),(0,i.jsxs)("div",{className:"flex justify-center",children:[(0,i.jsx)(dt,{maxLength:4,value:n,onChange:x=>o(x),render:({slots:x})=>(0,i.jsx)(mt,{className:"gap-2 sm:gap-4",children:x.map((E,f)=>(0,i.jsx)(ft,{...E,className:"w-12 h-12 sm:w-16 sm:h-16 text-2xl sm:text-3xl"},f))})}),(0,i.jsx)("input",{type:"hidden",name:"pin",value:n})]}),(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)(Lt,{type:"submit",disabled:v||n.length!==4,className:"w-full sm:w-auto px-8 py-3 text-lg font-semibold transition-all duration-200 ease-in-out transform hover:scale-105",children:v?(0,i.jsx)(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:"V\xE9rification..."}):(0,i.jsx)(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:"Valider"})})}),(0,i.jsx)("div",{className:"text-center",children:(0,i.jsx)(Nt,{to:"/",children:(0,i.jsxs)("p",{className:"flex items-center justify-center text-sm text-gray-600",style:{color:"rgba(107, 114, 128, 1)"},children:[(0,i.jsx)(Bt,{className:"h-3.5 w-3.5 xs:w-4 xs:h-4"}),"Espace Personnel"]})})})]})]})]})})})}export{Vt as default,Se as links};
