import{a as ee}from"/build/_shared/chunk-YWUCPBEQ.js";import{a as Y}from"/build/_shared/chunk-OT2QTX4F.js";import{a as _}from"/build/_shared/chunk-XSP4JB6A.js";import{a as X}from"/build/_shared/chunk-XKJ5LF2E.js";import{a as Q}from"/build/_shared/chunk-CP3WB6KC.js";import{a as W}from"/build/_shared/chunk-3DB3GQTY.js";import{a as d}from"/build/_shared/chunk-XDNDK56N.js";import"/build/_shared/chunk-KAUQO2FD.js";import"/build/_shared/chunk-7ZNTUDLC.js";import{a as J}from"/build/_shared/chunk-6JFOYO3V.js";import{a as U}from"/build/_shared/chunk-L2TBXS32.js";import{a as c}from"/build/_shared/chunk-JBQJJPFB.js";import{b as p}from"/build/_shared/chunk-SS7AQOQ3.js";import{a as f,b as g,c as C}from"/build/_shared/chunk-2MHSPA7K.js";import{a as x}from"/build/_shared/chunk-WZRQ3RQI.js";import"/build/_shared/chunk-YYMCCM4Y.js";import{a as K}from"/build/_shared/chunk-35S5HMBT.js";import"/build/_shared/chunk-5KYGR3MA.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as Z}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as r,b as i,c as o,e as n,f as R}from"/build/_shared/chunk-G5A27C7O.js";import{h as N}from"/build/_shared/chunk-NVGVVEPD.js";import{X as H,b as $,t as b}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as A,k,l as S,p as D,q as F}from"/build/_shared/chunk-GTSSQFHM.js";import{a as V,b as L}from"/build/_shared/chunk-BBTKOQ57.js";import{e as t}from"/build/_shared/chunk-UED2Q7CE.js";var v=t(V()),se=t(K());var ae=t(Y()),te=t(J()),re=t(X()),ie=t(_()),oe=t(Q()),ne=t(W()),ce=t(ee()),de=t(Z());var e=t(L());function q(){let{users:G,quickUser:l,positions:E,teams:M,departments:j,hourGroups:B,access:I}=D(),y=F(),w=A(),[T,z]=(0,v.useState)(!1),[a,O]=(0,v.useState)({users:[],positions:[],teams:[],departments:[],hourGroups:[],access:[]}),m=(s,h)=>{O(u=>({...u,[s]:u[s].includes(h)?u[s].filter(P=>P!==h):[...u[s],h]}))};return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[(0,e.jsx)(N,{asChild:!0,variant:"outline",className:"mb-6 h-12 text-base",children:(0,e.jsxs)(k,{prefetch:"intent",to:"/o/task",children:[(0,e.jsx)($,{className:"mr-2 h-5 w-5"}),"Retour \xE0 la liste"]})}),(0,e.jsxs)(r,{className:"max-w-2xl mx-auto",children:[(0,e.jsx)(i,{className:"p-4 sm:p-6",children:(0,e.jsx)(o,{className:"text-2xl sm:text-3xl font-bold",children:"Nouvelle T\xE2che"})}),(0,e.jsxs)(S,{method:"post",onSubmit:()=>{z(!0)},children:[(0,e.jsxs)(n,{className:"p-4 sm:p-6 space-y-8",children:[y?.error&&(0,e.jsxs)(f,{variant:"destructive",children:[(0,e.jsx)(b,{className:"h-5 w-5"}),(0,e.jsx)(g,{className:"text-base font-medium",children:"Erreur"}),(0,e.jsx)(C,{className:"text-base",children:y.error})]}),l&&l.firstName&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(f,{variant:"default",className:"bg-primary text-white",children:[(0,e.jsx)(b,{className:"h-5 w-5"}),(0,e.jsx)(g,{className:"text-base font-medium",children:"Vous Assign\xE9 une t\xE2che \xE0 l'employ\xE9:"}),(0,e.jsxs)(C,{className:"text-base font-semibold",children:[l.firstName," ",l.lastName]})]}),(0,e.jsx)("input",{type:"hidden",name:"user",value:l.id})]}),(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(p,{htmlFor:"title",className:"text-base font-medium",children:"Titre"}),(0,e.jsx)(x,{type:"text",id:"title",name:"title",required:!0,className:"h-12 text-base"})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(p,{htmlFor:"description",className:"text-base font-medium",children:"Description"}),(0,e.jsx)(U,{id:"description",name:"description",rows:3,className:"min-h-[120px] text-base p-3 resize-y"})]})]}),!l&&(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsx)(p,{className:"text-base font-medium",children:"Assign\xE9 \xE0"}),(0,e.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,e.jsxs)(r,{className:"shadow-none border",children:[(0,e.jsx)(i,{className:"p-4",children:(0,e.jsx)(o,{className:"text-base font-semibold",children:"Utilisateurs"})}),(0,e.jsx)(n,{className:"p-0",children:(0,e.jsx)(d,{className:"h-[300px] px-4",children:G.map(s=>(0,e.jsxs)("div",{className:"flex items-center space-x-3 py-3 border-b last:border-0",children:[(0,e.jsx)(c,{id:`user-${s.id}`,checked:a.users.includes(s.id),onCheckedChange:()=>m("users",s.id),className:"h-5 w-5"}),(0,e.jsxs)("label",{htmlFor:`user-${s.id}`,className:"text-base",children:[s.firstName," ",s.lastName]}),a.users.includes(s.id)&&(0,e.jsx)("input",{type:"hidden",name:"assignedTo.users",value:s.id})]},s.id))})})]}),(0,e.jsxs)(r,{className:"shadow-none border",children:[(0,e.jsx)(i,{className:"p-4",children:(0,e.jsx)(o,{className:"text-base font-semibold",children:"Postes"})}),(0,e.jsx)(n,{className:"p-0",children:(0,e.jsx)(d,{className:"h-[300px] px-4",children:E.map(s=>(0,e.jsxs)("div",{className:"flex items-center space-x-3 py-3 border-b last:border-0",children:[(0,e.jsx)(c,{id:`position-${s.id}`,checked:a.positions.includes(s.id),onCheckedChange:()=>m("positions",s.id),className:"h-5 w-5"}),(0,e.jsx)("label",{htmlFor:`position-${s.id}`,className:"text-base",children:s.title}),a.positions.includes(s.id)&&(0,e.jsx)("input",{type:"hidden",name:"assignedTo.positions",value:s.id})]},s.id))})})]}),(0,e.jsxs)(r,{className:"shadow-none border",children:[(0,e.jsx)(i,{className:"p-4",children:(0,e.jsx)(o,{className:"text-base font-semibold",children:"\xC9quipes"})}),(0,e.jsx)(n,{className:"p-0",children:(0,e.jsx)(d,{className:"h-[300px] px-4",children:M.map(s=>(0,e.jsxs)("div",{className:"flex items-center space-x-3 py-3 border-b last:border-0",children:[(0,e.jsx)(c,{id:`team-${s.id}`,checked:a.teams.includes(s.id),onCheckedChange:()=>m("teams",s.id),className:"h-5 w-5"}),(0,e.jsx)("label",{htmlFor:`team-${s.id}`,className:"text-base",children:s.name}),a.teams.includes(s.id)&&(0,e.jsx)("input",{type:"hidden",name:"assignedTo.teams",value:s.id})]},s.id))})})]}),(0,e.jsxs)(r,{className:"shadow-none border",children:[(0,e.jsx)(i,{className:"p-4",children:(0,e.jsx)(o,{className:"text-base font-semibold",children:"D\xE9partements"})}),(0,e.jsx)(n,{className:"p-0",children:(0,e.jsx)(d,{className:"h-[300px] px-4",children:j.map(s=>(0,e.jsxs)("div",{className:"flex items-center space-x-3 py-3 border-b last:border-0",children:[(0,e.jsx)(c,{id:`department-${s.id}`,checked:a.departments.includes(s.id),onCheckedChange:()=>m("departments",s.id),className:"h-5 w-5"}),(0,e.jsx)("label",{htmlFor:`department-${s.id}`,className:"text-base",children:s.name}),a.departments.includes(s.id)&&(0,e.jsx)("input",{type:"hidden",name:"assignedTo.departments",value:s.id})]},s.id))})})]}),(0,e.jsxs)(r,{className:"shadow-none border",children:[(0,e.jsx)(i,{className:"p-4",children:(0,e.jsx)(o,{className:"text-base font-semibold",children:"Groupes Horaires"})}),(0,e.jsx)(n,{className:"p-0",children:(0,e.jsx)(d,{className:"h-[300px] px-4",children:B.map(s=>(0,e.jsxs)("div",{className:"flex items-center space-x-3 py-3 border-b last:border-0",children:[(0,e.jsx)(c,{id:`hourGroup-${s.id}`,checked:a.hourGroups.includes(s.id),onCheckedChange:()=>m("hourGroups",s.id),className:"h-5 w-5"}),(0,e.jsx)("label",{htmlFor:`hourGroup-${s.id}`,className:"text-base",children:s.name}),a.hourGroups.includes(s.id)&&(0,e.jsx)("input",{type:"hidden",name:"assignedTo.hourGroups",value:s.id})]},s.id))})})]}),(0,e.jsxs)(r,{className:"shadow-none border",children:[(0,e.jsx)(i,{className:"p-4",children:(0,e.jsx)(o,{className:"text-base font-semibold",children:"Groupes d'Acc\xE8s"})}),(0,e.jsx)(n,{className:"p-0",children:(0,e.jsx)(d,{className:"h-[300px] px-4",children:I.map(s=>(0,e.jsxs)("div",{className:"flex items-center space-x-3 py-3 border-b last:border-0",children:[(0,e.jsx)(c,{id:`access-${s.id}`,checked:a.access.includes(s.id),onCheckedChange:()=>m("access",s.id),className:"h-5 w-5"}),(0,e.jsx)("label",{htmlFor:`access-${s.id}`,className:"text-base",children:s.name}),a.access.includes(s.id)&&(0,e.jsx)("input",{type:"hidden",name:"assignedTo.access",value:s.id})]},s.id))})})]})]})]}),(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,e.jsx)(c,{id:"isRecurrent",name:"isRecurrent",className:"h-5 w-5"}),(0,e.jsx)(p,{htmlFor:"isRecurrent",className:"text-base font-medium",children:"T\xE2che r\xE9currente"})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(p,{htmlFor:"dueDate",className:"text-base font-medium",children:"Date d'\xE9ch\xE9ance"}),(0,e.jsx)(x,{type:"date",id:"dueDate",name:"dueDate",className:"h-12 text-base"})]})]})]}),(0,e.jsx)(R,{className:"p-4 sm:p-6",children:(0,e.jsx)(N,{type:"submit",className:"w-full h-12 text-base",disabled:T||w.state==="submitting",children:T||w.state==="submitting"?(0,e.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,e.jsx)(H,{className:"h-5 w-5 animate-spin"}),"Cr\xE9ation en cours..."]}):"Cr\xE9er la t\xE2che"})})]})]})]})}export{q as default};
