import{a as W}from"/build/_shared/chunk-YWUCPBEQ.js";import{a as S}from"/build/_shared/chunk-L2TBXS32.js";import{b as n}from"/build/_shared/chunk-SS7AQOQ3.js";import{a as b,b as g,c as v}from"/build/_shared/chunk-2MHSPA7K.js";import{a as O}from"/build/_shared/chunk-WZRQ3RQI.js";import{a as V}from"/build/_shared/chunk-35S5HMBT.js";import"/build/_shared/chunk-OMO5CWS2.js";import{a as h}from"/build/_shared/chunk-PVX4NJUU.js";import{a as R}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as D,b as B,c as P,e as E}from"/build/_shared/chunk-G5A27C7O.js";import{h as x}from"/build/_shared/chunk-NVGVVEPD.js";import{Ga as f,X as T,o as F,q as j}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as y,k as A,l as k,p as C,q as L}from"/build/_shared/chunk-GTSSQFHM.js";import{a as H,b as $}from"/build/_shared/chunk-BBTKOQ57.js";import{e as i}from"/build/_shared/chunk-UED2Q7CE.js";var m=i(H());var z=i(V());var G=i(W()),J=i(R());var e=i($());function q(){let{access:t}=C(),c=L(),I=y(),[d,M]=(0,m.useState)(null),[l,w]=(0,m.useState)(t.permissions),N=I.state==="submitting";(0,m.useEffect)(()=>{w(t.permissions)},[t.permissions]);let u=(s,o)=>{w(r=>{let a=r[s]?.includes(o)?r[s]?.filter(p=>p!==o):[...r[s]||[],o];return{...r,[s]:a}})},U=s=>{M(d===s?null:s)};return h?(0,e.jsxs)("div",{className:"w-full max-w-8xl mx-auto p-4 sm:p-6 lg:p-8",children:[(0,e.jsx)(x,{asChild:!0,variant:"outline",className:"mb-4 h-10 text-sm sm:h-11 sm:text-base",children:(0,e.jsxs)(A,{prefetch:"intent",to:"/o/access",children:[(0,e.jsx)(j,{className:"mr-2 h-4 w-4 sm:h-5 sm:w-5"}),"Retour \xE0 la liste"]})}),(0,e.jsxs)(D,{className:"bg-white border border-gray-200 rounded-xl shadow-sm dark:bg-slate-900 dark:border-gray-700",children:[(0,e.jsxs)(B,{className:"p-4 sm:p-6 lg:p-8",children:[(0,e.jsx)(P,{className:"text-center text-2xl sm:text-3xl font-bold text-gray-800 dark:text-white",children:"Modifier l'acc\xE8s"}),t.createdBy&&(0,e.jsxs)("i",{className:"text-center text-sm sm:text-base text-gray-500 dark:text-gray-400",children:["Cr\xE9\xE9 par ",t.createdBy.firstName," ",t.createdBy.lastName," \xE0"," ",new Date(t.createdAt).toLocaleString()," -"," ",t.updatedBy?`Edit\xE9 Par ${t.updatedBy.firstName} ${t.updatedBy.lastName} \xE0 ${new Date(t.updatedAt).toLocaleString()}`:""]})]}),(0,e.jsx)(E,{className:"p-4 sm:p-6 lg:p-8",children:(0,e.jsxs)(k,{method:"post",className:"space-y-4 sm:space-y-6",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(n,{htmlFor:"name",className:"text-sm sm:text-base font-medium",children:"Nom de l'acc\xE8s"}),(0,e.jsx)(O,{type:"text",id:"name",name:"name",required:!0,defaultValue:t.name,className:"mt-1.5 h-10 text-sm sm:h-11 sm:text-base"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(n,{htmlFor:"description",className:"text-sm sm:text-base font-medium",children:"Description"}),(0,e.jsx)(S,{id:"description",name:"description",rows:3,defaultValue:t.description,className:"mt-1.5 text-sm sm:text-base"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(n,{className:"text-sm sm:text-base font-medium",children:"Permissions"}),(0,e.jsx)("div",{className:"hs-accordion-group mt-3",children:Object.entries(h).map(([s,{label:o,actions:r}])=>(0,e.jsxs)("div",{className:"hs-accordion border-b border-gray-200 dark:border-gray-700",children:[(0,e.jsxs)("button",{type:"button",className:"hs-accordion-toggle hs-accordion-active:text-blue-600 inline-flex items-center gap-x-3 w-full font-semibold text-left text-gray-800 transition py-4 px-4 sm:px-5 hover:text-gray-500 dark:hs-accordion-active:text-blue-500 dark:text-gray-200 dark:hover:text-gray-400 text-sm sm:text-base","aria-controls":`accordion-${s}`,onClick:()=>U(s),children:[(0,e.jsx)("svg",{className:`w-4 h-4 sm:w-5 sm:h-5 text-gray-600 group-hover:text-gray-500 dark:text-gray-400 ${d===s?"rotate-180":""}`,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,e.jsx)("path",{d:"M2 5L8.16086 10.6869C8.35239 10.8637 8.64761 10.8637 8.83914 10.6869L15 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}),o]}),(0,e.jsx)("div",{id:`accordion-${s}`,className:`hs-accordion-content w-full overflow-hidden transition-[height] duration-300 ${d===s?"":"hidden"}`,children:(0,e.jsx)("div",{className:"p-4 sm:p-5",children:(0,e.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:Object.entries(r).map(([a,p])=>(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)("input",{type:"checkbox",id:`${s}-${a}`,name:`${s}-${a}`,checked:l[s]?.includes(a),onChange:()=>u(s,a),className:"sr-only"}),(0,e.jsx)("div",{className:`w-5 h-5 sm:w-6 sm:h-6 border-2 rounded-full transition-colors ${l[s]?.includes(a)?"bg-primary border-primary-600":"border-gray-300 dark:border-gray-600"}`,onClick:()=>u(s,a),children:l[s]?.includes(a)&&(0,e.jsx)(F,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})})]}),(0,e.jsx)("label",{htmlFor:`${s}-${a}`,className:"ml-3 text-sm sm:text-base text-gray-700 dark:text-gray-300 cursor-pointer",onClick:()=>u(s,a),children:p})]},a))})})})]},s))})]}),c?.message&&!c.success&&(0,e.jsxs)(b,{variant:"destructive",children:[(0,e.jsx)(f,{className:"h-4 w-4 sm:h-5 sm:w-5"}),(0,e.jsx)(g,{className:"text-sm sm:text-base",children:"Erreur"}),(0,e.jsx)(v,{className:"text-sm sm:text-base",children:c.message})]}),(0,e.jsx)(x,{type:"submit",className:"w-full h-10 text-sm sm:h-11 sm:text-base",disabled:N,children:N?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(T,{className:"mr-2 h-4 w-4 sm:h-5 sm:w-5 animate-spin"}),"Mise \xE0 jour en cours..."]}):"Mettre \xE0 jour l'acc\xE8s"})]})})]})]}):(0,e.jsxs)(b,{variant:"destructive",className:"mx-4 sm:mx-6 lg:mx-8",children:[(0,e.jsx)(f,{className:"h-4 w-4 sm:h-5 sm:w-5"}),(0,e.jsx)(g,{className:"text-sm sm:text-base",children:"Erreur"}),(0,e.jsx)(v,{className:"text-sm sm:text-base",children:"Les cat\xE9gories de permissions n'ont pas pu \xEAtre charg\xE9es."})]})}export{q as default};
