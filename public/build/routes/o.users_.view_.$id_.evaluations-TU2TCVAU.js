import{a as U}from"/build/_shared/chunk-FGQ3HQSB.js";import{a as y,b as R}from"/build/_shared/chunk-ABDDDOIB.js";import{a as x}from"/build/_shared/chunk-LZOQ52E6.js";import"/build/_shared/chunk-MRGZKXS3.js";import{a as N,b as T,c as S,d as u,e as r,f as i}from"/build/_shared/chunk-IEDNE26R.js";import{b as l}from"/build/_shared/chunk-FB4U2LCE.js";import{a as E}from"/build/_shared/chunk-6JFOYO3V.js";import"/build/_shared/chunk-M3TRH43M.js";import{a as g}from"/build/_shared/chunk-WZRQ3RQI.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as F}from"/build/_shared/chunk-B6OA2ZRE.js";import"/build/_shared/chunk-G5A27C7O.js";import{h as n}from"/build/_shared/chunk-NVGVVEPD.js";import{ra as v}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as p,h as f,l as b,p as h}from"/build/_shared/chunk-GTSSQFHM.js";import{b as w}from"/build/_shared/chunk-BBTKOQ57.js";import{e as o}from"/build/_shared/chunk-UED2Q7CE.js";var B=o(F());var M=o(E()),I=o(U());var e=o(w());function D(){let{evaluations:t,search:c,user:H,page:s,limit:m,can:L}=h(),[j,d]=f(),P=p().state==="loading",k=a=>{a.preventDefault();let C=new FormData(a.currentTarget).get("search");d({search:C})};return(0,e.jsxs)(l.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"container mx-auto p-4 space-y-6 max-w-8xl",children:[(0,e.jsxs)(l.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},className:"mb-6",children:[(0,e.jsx)(x,{user:H,can:L}),(0,e.jsx)("h1",{className:"text-3xl font-bold mt-4 text-center",children:"KPI & Historiques des Evaluations"})]}),(0,e.jsx)(l.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4,duration:.5},children:(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8 space-y-6",children:[(0,e.jsx)("div",{className:"flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-4",children:(0,e.jsxs)(b,{onSubmit:k,className:"flex items-center gap-2 w-full sm:w-auto sm:flex-1  rounded-full border-2 border-primary",children:[(0,e.jsx)(g,{type:"search",name:"search",placeholder:"Rechercher dans l'inventaire des evaluations...",defaultValue:c,className:"h-12 text-base"}),(0,e.jsx)(n,{type:"submit",className:"h-12 w-12 flex-shrink-0  rounded-full border-2 border-primary",children:(0,e.jsx)(v,{className:"h-5 w-5"})})]})}),P?(0,e.jsx)(R,{view:"list",itemCount:m}):t.results.length>0?(0,e.jsx)("div",{className:"rounded-lg border overflow-x-auto",children:(0,e.jsxs)(N,{children:[(0,e.jsx)(T,{children:(0,e.jsxs)(u,{children:[(0,e.jsx)(r,{className:"text-base whitespace-nowrap",children:"Employ\xE9"}),(0,e.jsx)(r,{className:"text-base whitespace-nowrap hidden sm:table-cell",children:"Date Evaluation"}),(0,e.jsx)(r,{className:"text-base whitespace-nowrap hidden sm:table-cell",children:"Evaluateur"}),(0,e.jsx)(r,{className:"text-base whitespace-nowrap",children:"Moyenne Des Notes"})]})}),(0,e.jsx)(S,{children:t.results?.map(a=>(0,e.jsxs)(u,{children:[(0,e.jsxs)(i,{className:"font-medium text-base",children:[a.user.firstName," ",a.user.lastName]}),(0,e.jsx)(i,{className:"hidden sm:table-cell text-base",children:new Date(a.createdAt).toLocaleString()}),(0,e.jsxs)(i,{className:"font-medium text-base",children:[a.evaluator?.firstName," ",a.evaluator?.lastName]}),(0,e.jsx)(i,{className:"text-base",children:a.meanScore.toFixed(2)})]},a.id))})]})}):(0,e.jsx)(y,{type:"tasks",createLink:"/o/task/new",view:"list"}),t.totalResults>0&&(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4",children:[(0,e.jsx)(n,{onClick:()=>d({search:c,page:(s-1).toString()}),disabled:s===1,className:"w-full sm:w-auto h-12 text-base",children:"Pr\xE9c\xE9dent"}),(0,e.jsxs)("span",{className:"text-base",children:["Page ",s," sur ",Math.ceil(t.totalResults/m)]}),(0,e.jsx)(n,{onClick:()=>d({search:c,page:(s+1).toString()}),disabled:s*m>=t.totalResults,className:"w-full sm:w-auto h-12 text-base",children:"Suivant"})]})]})})]})}export{D as default};
