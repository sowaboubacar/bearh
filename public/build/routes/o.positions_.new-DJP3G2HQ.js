import{a as me}from"/build/_shared/chunk-YWUCPBEQ.js";import{a as ce}from"/build/_shared/chunk-XKJ5LF2E.js";import{a as j}from"/build/_shared/chunk-XDNDK56N.js";import{a as F,b as L,c as T,d as I,e as P}from"/build/_shared/chunk-NCY4KUS2.js";import"/build/_shared/chunk-Q6K63OHD.js";import"/build/_shared/chunk-KAUQO2FD.js";import"/build/_shared/chunk-7ZNTUDLC.js";import{a as ie}from"/build/_shared/chunk-6JFOYO3V.js";import{a as R}from"/build/_shared/chunk-L2TBXS32.js";import{a as U}from"/build/_shared/chunk-A762UFCP.js";import"/build/_shared/chunk-RHTBOEYQ.js";import"/build/_shared/chunk-HNF2M344.js";import"/build/_shared/chunk-IQV4D3C7.js";import"/build/_shared/chunk-H33OI7YH.js";import{a as M}from"/build/_shared/chunk-JBQJJPFB.js";import{b as r}from"/build/_shared/chunk-SS7AQOQ3.js";import{a as E,b as k,c as B}from"/build/_shared/chunk-2MHSPA7K.js";import"/build/_shared/chunk-M3TRH43M.js";import{a as D}from"/build/_shared/chunk-WZRQ3RQI.js";import"/build/_shared/chunk-XNZ6DBKW.js";import"/build/_shared/chunk-YYMCCM4Y.js";import{a as ne}from"/build/_shared/chunk-35S5HMBT.js";import"/build/_shared/chunk-2BPW44Z6.js";import"/build/_shared/chunk-5KYGR3MA.js";import"/build/_shared/chunk-KLKNQD3Q.js";import"/build/_shared/chunk-PGURRWG5.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as re}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as n,b as v,c as x,e as y,f as C}from"/build/_shared/chunk-G5A27C7O.js";import{h as c}from"/build/_shared/chunk-NVGVVEPD.js";import{X as A,b as S,t as w}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as p,i as u,k as f,l as b,p as h,q as g}from"/build/_shared/chunk-GTSSQFHM.js";import{a as oe,b as N}from"/build/_shared/chunk-BBTKOQ57.js";import{e as a}from"/build/_shared/chunk-UED2Q7CE.js";var le=a(ne());var s=a(oe());var de=a(ce()),pe=a(me()),ue=a(re());var fe=a(ie());var e=a(N());function H(){let{accesses:W,users:$}=h(),m=g(),q=p(),[z,V]=(0,s.useState)(""),[O,G]=(0,s.useState)(""),[J,K]=(0,s.useState)(""),[Q,X]=(0,s.useState)([]),[Y,Z]=(0,s.useState)(!1),l=q.state==="submitting",_=u(),ee=t=>{t.preventDefault();let o=new FormData(t.currentTarget);Q.forEach(i=>{o.append("attachments",i.id)}),_(o,{method:"post"})},te=t=>{X(t)},[d,ae]=(0,s.useState)([]),se=t=>{ae(o=>o.includes(t)?o.filter(i=>i!==t):[...o,t])};return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[(0,e.jsx)(c,{asChild:!0,variant:"outline",className:"mb-6 h-12 text-base",children:(0,e.jsxs)(f,{prefetch:"intent",to:"/o/positions",children:[(0,e.jsx)(S,{className:"mr-2 h-5 w-5"}),"Retour \xE0 la liste"]})}),(0,e.jsxs)(n,{className:"max-w-2xl mx-auto",children:[(0,e.jsx)(v,{className:"p-4 sm:p-6",children:(0,e.jsx)(x,{className:"text-2xl sm:text-3xl font-bold",children:"Ajouter un Nouveau Poste"})}),(0,e.jsxs)(b,{method:"post",onSubmit:ee,children:[(0,e.jsxs)(y,{className:"p-4 sm:p-6 space-y-6",children:[m?.error&&(0,e.jsxs)(E,{variant:"destructive",children:[(0,e.jsx)(w,{className:"h-5 w-5"}),(0,e.jsx)(k,{className:"text-base font-medium",children:"Erreur"}),(0,e.jsx)(B,{className:"text-base",children:m.error})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(r,{htmlFor:"title",className:"text-base font-medium",children:"Titre du poste"}),(0,e.jsx)(D,{id:"title",name:"title",value:z,onChange:t=>V(t.target.value),required:!0,className:"h-12 text-base"})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(r,{htmlFor:"description",className:"text-base font-medium",children:"Description"}),(0,e.jsx)(R,{id:"description",name:"description",value:O,onChange:t=>G(t.target.value),rows:4,className:"min-h-[120px] text-base p-3 resize-y"})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(r,{htmlFor:"access",className:"text-base font-medium",children:"Droit d'acc\xE8s"}),(0,e.jsxs)(F,{name:"access",value:J,onValueChange:K,children:[(0,e.jsx)(T,{className:"h-12 text-base",children:(0,e.jsx)(L,{placeholder:"S\xE9lectionner un droit d'acc\xE8s"})}),(0,e.jsx)(I,{children:W.map(t=>(0,e.jsx)(P,{value:t.id,className:"text-base",children:t.name},t.id))})]})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(r,{className:"text-base font-medium",children:"Membres de cette fiche de poste"}),(0,e.jsx)(n,{children:(0,e.jsx)(j,{className:"h-[300px] w-full rounded-md border p-4",children:$.map(t=>(0,e.jsxs)("div",{className:"flex items-center space-x-3 py-3 border-b last:border-0",children:[(0,e.jsx)(M,{id:`user-${t.id}`,checked:d.includes(t.id),onCheckedChange:()=>se(t.id),className:"h-5 w-5"}),(0,e.jsxs)("label",{htmlFor:`user-${t.id}`,className:"text-base font-medium",children:[t.firstName," ",t.lastName]}),d.includes(t.id)&&(0,e.jsx)("input",{type:"hidden",name:"members",value:t.id})]},t.id))})})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(r,{htmlFor:"attachments",className:"text-base font-medium",children:"Images & Pi\xE8ces jointes"}),(0,e.jsx)(U,{onSelect:te,multiple:!0,accept:"image/*,application/pdf",maxSize:5*1024*1024,onBusyStateChange:Z})]})]}),(0,e.jsx)(C,{className:"p-4 sm:p-6",children:(0,e.jsx)(c,{type:"submit",className:"w-full h-12 text-base",disabled:l||Y,children:l?(0,e.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,e.jsx)(A,{className:"h-5 w-5 animate-spin"}),"Cr\xE9ation en cours..."]}):"Cr\xE9er le Poste"})})]})]})]})}export{H as default};
