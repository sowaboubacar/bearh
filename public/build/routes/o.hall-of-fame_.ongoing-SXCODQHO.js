import{a as q}from"/build/_shared/chunk-N4U522YR.js";import{c as I}from"/build/_shared/chunk-HQRKW5NX.js";import{a as A,b as F,c as D}from"/build/_shared/chunk-MRGZKXS3.js";import{b as c}from"/build/_shared/chunk-FB4U2LCE.js";import{a as u}from"/build/_shared/chunk-OFTXZR4P.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as J}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as n,b as y,c as h,e as m}from"/build/_shared/chunk-G5A27C7O.js";import{h as x}from"/build/_shared/chunk-NVGVVEPD.js";import{Ca as C,Da as V,Ha as T,S as b,fa as N,za as w}from"/build/_shared/chunk-PNJDYZ5P.js";import{k as d,p as f,r as v}from"/build/_shared/chunk-GTSSQFHM.js";import{a as $,b as g}from"/build/_shared/chunk-BBTKOQ57.js";import{e as s}from"/build/_shared/chunk-UED2Q7CE.js";var p=s($());var H=s(q());var P=s(J());var e=s(g());function U(){let{currentCandidates:k,currentUser:L,userVotes:M}=f(),[j,O]=(0,p.useState)(k),z=v(),[r,B]=(0,p.useState)(M.reduce((t,o)=>({...t,[o.candidateId]:o.voteValue}),{})),E=(t,o)=>{if(r[t]!==void 0)return;O(l=>l.map(i=>i.id===t?{...i,votes:[...i.votes,{voter:L?.id,voteValue:o,votedAt:new Date}]}:i)),B(l=>({...l,[t]:o}));let a=new FormData;a.append("candidateId",t),a.append("voteValue",String(o)),z.submit(a,{method:"post",action:"/o/hall-of-fame/ongoing"})},S=(t,o)=>t.filter(a=>a.voteValue===o).length;return(0,e.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-blue-100 to-white",children:(0,e.jsxs)("div",{className:"container mx-auto py-12 px-4 sm:px-6 lg:px-8",children:[(0,e.jsxs)(c.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[(0,e.jsxs)("h1",{className:"text-4xl sm:text-5xl font-bold mb-4 text-primary-800 flex items-center justify-center",children:[(0,e.jsx)(T,{className:"mr-2 h-10 w-10 text-yellow-500"}),"Employ\xE9 du Mois"]}),(0,e.jsx)("p",{className:"text-xl sm:text-2xl text-primary-600 mb-6",children:"Votre voix compte ! Participez \xE0 l'\xE9lection de l'Employ\xE9 du Mois"}),(0,e.jsx)(n,{className:"bg-white p-6 max-w-2xl mx-auto",children:(0,e.jsxs)(m,{children:[(0,e.jsx)(b,{className:"h-8 w-8 text-primary-500 mb-4 mx-auto"}),(0,e.jsx)("h2",{className:"text-lg sm:text-xl font-semibold mb-2",children:"Comment \xE7a marche ?"}),(0,e.jsxs)("p",{className:"text-gray-600",children:["Vous pouvez voter une seule fois pour chaque candidat. Choisissez parmi trois options :",(0,e.jsx)("span",{className:"font-semibold text-green-600",children:" J'accepte"}),",",(0,e.jsx)("span",{className:"font-semibold text-gray-600",children:" Neutre"}),", ou",(0,e.jsx)("span",{className:"font-semibold text-red-600",children:" Je refuse"}),". Votre d\xE9cision est d\xE9finitive pour chaque candidat, alors choisissez judicieusement !"]})]})})]}),(0,e.jsx)("div",{className:"grid gap-8 sm:grid-cols-2 lg:grid-cols-3",children:j.map((t,o)=>(0,e.jsx)(c.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5,delay:o*.1},children:(0,e.jsxs)(n,{className:"overflow-hidden transition-all duration-300 hover:shadow-2xl bg-white",children:[(0,e.jsx)(d,{to:`/o/hall-of-fame/${t.id}`,children:(0,e.jsx)(y,{className:"pb-2",children:(0,e.jsxs)(h,{className:"flex items-center space-x-4",children:[(0,e.jsxs)(A,{className:"h-20 w-20 border-4 border-primary shadow-lg",children:[(0,e.jsx)(F,{src:t.employee.avatar?.file?.url,alt:t.employee.firstName}),(0,e.jsx)(D,{children:(t.employee.firstName+" "+t.employee.lastName).split(" ").map(a=>a[0]).join("")})]}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("p",{className:"text-2xl font-bold text-primary-800",children:[t.employee.firstName," ",t.employee.lastName," "]}),(0,e.jsxs)("p",{className:"text-sm text-primary-600",children:[t.employee.currentPosition?.title," "]})]})]})})}),(0,e.jsxs)(m,{className:"pt-4",children:[(0,e.jsxs)("div",{className:"flex flex-wrap justify-between items-center mb-4 gap-2",children:[(0,e.jsxs)(u,{variant:"outline",className:"text-sm bg-blue-50 text-primary-700 border-blue-300",children:["Nomin\xE9 le"," ",I(t.nominationDate)]}),(0,e.jsxs)(u,{variant:"secondary",className:"text-sm bg-yellow-100 text-yellow-800",children:[(0,e.jsx)(w,{className:"h-4 w-4 mr-1"})," ",t.votes.length," ","votes"]})]}),(0,e.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[{value:-1,label:"Je refuse",icon:C,color:"red"},{value:0,label:"Neutre",icon:N,color:"yellow"},{value:1,label:"J'accepte",icon:V,color:"green"}].map(a=>(0,e.jsxs)(x,{variant:r[t.id]===a.value?"default":"outline",size:"sm",onClick:()=>E(t.id,a.value),disabled:r[t.id]!==void 0,className:`w-full transition-all duration-300 ${r[t.id]===a.value?`bg-${a.color}-500 text-white hover:bg-${a.color}-600`:`hover:bg-${a.color}-100`}`,children:[(0,e.jsx)(a.icon,{className:"mr-1 h-4 w-4"}),(0,e.jsx)("span",{className:"hidden sm:inline",children:a.label}),(0,e.jsxs)("span",{className:"ml-1",children:["(",S(t.votes,a.value),")"]})]},a.value))})]})]})},t.id))})]})})}export{U as default};
