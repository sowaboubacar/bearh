import{a as Q}from"/build/_shared/chunk-2BB2EQBE.js";import{a as l,b as m,c as u,d as p,e as s}from"/build/_shared/chunk-NCY4KUS2.js";import"/build/_shared/chunk-Q6K63OHD.js";import"/build/_shared/chunk-KAUQO2FD.js";import"/build/_shared/chunk-7ZNTUDLC.js";import{a as J}from"/build/_shared/chunk-6JFOYO3V.js";import{a as k}from"/build/_shared/chunk-L2TBXS32.js";import{a as E}from"/build/_shared/chunk-A762UFCP.js";import"/build/_shared/chunk-RHTBOEYQ.js";import"/build/_shared/chunk-HNF2M344.js";import"/build/_shared/chunk-IQV4D3C7.js";import"/build/_shared/chunk-H33OI7YH.js";import"/build/_shared/chunk-JBQJJPFB.js";import{b as o}from"/build/_shared/chunk-SS7AQOQ3.js";import{a as d,b as f,c as N}from"/build/_shared/chunk-2MHSPA7K.js";import"/build/_shared/chunk-M3TRH43M.js";import"/build/_shared/chunk-WZRQ3RQI.js";import"/build/_shared/chunk-XNZ6DBKW.js";import"/build/_shared/chunk-YYMCCM4Y.js";import{a as K}from"/build/_shared/chunk-35S5HMBT.js";import"/build/_shared/chunk-2BPW44Z6.js";import"/build/_shared/chunk-5KYGR3MA.js";import"/build/_shared/chunk-KLKNQD3Q.js";import"/build/_shared/chunk-PGURRWG5.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as G}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as F,b as q,c as L,e as I,f as T}from"/build/_shared/chunk-G5A27C7O.js";import{h as i}from"/build/_shared/chunk-NVGVVEPD.js";import{X as R,b as U,t as c}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as x,i as y,k as S,l as C,p as w,q as A}from"/build/_shared/chunk-GTSSQFHM.js";import{a as $,b as D}from"/build/_shared/chunk-BBTKOQ57.js";import{e as a}from"/build/_shared/chunk-UED2Q7CE.js";var n=a($()),X=a(K());var Y=a(Q()),_=a(J()),ee=a(G());var e=a(D());function B(){let{users:O,quickUser:r}=w(),b=A(),v=x(),[h,j]=(0,n.useState)(!1),[z,P]=(0,n.useState)([]),[te,H]=(0,n.useState)(!1),W=y(),M=t=>{t.preventDefault(),j(!0);let g=new FormData(t.currentTarget);z.forEach(Z=>{g.append("attachments",Z.id)}),W(g,{method:"post"})},V=t=>{P(t)};return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[(0,e.jsx)(i,{asChild:!0,variant:"outline",className:"mb-6 h-12 text-base",children:(0,e.jsxs)(S,{prefetch:"intent",to:"/o/observation",children:[(0,e.jsx)(U,{className:"mr-2 h-5 w-5"}),"Retour \xE0 la liste"]})}),(0,e.jsxs)(F,{className:"max-w-2xl mx-auto",children:[(0,e.jsx)(q,{className:"p-4 sm:p-6",children:(0,e.jsx)(L,{className:"text-xl sm:text-2xl lg:text-3xl font-bold",children:"Nouvelle Remarque"})}),(0,e.jsxs)(C,{method:"post",onSubmit:M,children:[(0,e.jsxs)(I,{className:"p-4 sm:p-6 space-y-6",children:[b?.error&&(0,e.jsxs)(d,{variant:"destructive",children:[(0,e.jsx)(c,{className:"h-5 w-5"}),(0,e.jsx)(f,{className:"text-base font-medium",children:"Erreur"}),(0,e.jsx)(N,{className:"text-base",children:b.error})]}),r&&r.firstName&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(d,{variant:"secondary",className:"bg-primary text-white",children:[(0,e.jsx)(c,{className:"h-5 w-5"}),(0,e.jsx)(f,{className:"text-base font-medium",children:"Vous faites une remarque \xE0 l'employ\xE9:"}),(0,e.jsxs)(N,{className:"text-base font-semibold",children:[r.firstName," ",r.lastName]})]}),(0,e.jsx)("input",{type:"hidden",name:"user",value:r.id})]}),!r&&(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(o,{htmlFor:"user",className:"text-base font-medium",children:"S\xE9lectionner un employ\xE9 pour faire votre remarque"}),(0,e.jsxs)(l,{name:"user",required:!0,children:[(0,e.jsx)(u,{className:"h-12 text-base",children:(0,e.jsx)(m,{placeholder:"S\xE9lectionnez un employ\xE9"})}),(0,e.jsx)(p,{children:O.map(t=>(0,e.jsxs)(s,{value:t.id,className:"text-base",children:[t.firstName," ",t.lastName]},t.id))})]})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(o,{htmlFor:"type",className:"text-base font-medium",children:"Type de remarque"}),(0,e.jsxs)(l,{name:"type",required:!0,children:[(0,e.jsx)(u,{className:"h-12 text-base",children:(0,e.jsx)(m,{placeholder:"S\xE9lectionnez le type"})}),(0,e.jsxs)(p,{children:[(0,e.jsx)(s,{value:"Positive",className:"text-base",children:"Positive"}),(0,e.jsx)(s,{value:"Neutral",className:"text-base",children:"Neutre"}),(0,e.jsx)(s,{value:"Negative",className:"text-base",children:"N\xE9gative"})]})]})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(o,{htmlFor:"content",className:"text-base font-medium",children:"Contenu"}),(0,e.jsx)(k,{id:"content",name:"content",required:!0,className:"min-h-[150px] text-base p-3"})]}),(0,e.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,e.jsx)(o,{htmlFor:"attachments",className:"text-base font-medium",children:"Images & Pi\xE8ces jointes"}),(0,e.jsx)(E,{onSelect:V,multiple:!0,accept:"image/*,application/pdf",maxSize:5*1024*1024,onBusyStateChange:H,className:"w-full"})]})]}),(0,e.jsx)(T,{className:"p-4 sm:p-6",children:(0,e.jsx)(i,{type:"submit",className:"w-full h-12 text-base",disabled:h||v.state==="submitting",children:h||v.state==="submitting"?(0,e.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,e.jsx)(R,{className:"h-5 w-5 animate-spin"}),"Cr\xE9ation en cours..."]}):"Faire la remarque"})})]})]})]})}export{B as default};
