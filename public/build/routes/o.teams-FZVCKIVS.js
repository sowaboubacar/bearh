import{a as T}from"/build/_shared/chunk-6QXFNV75.js";import{a as ne}from"/build/_shared/chunk-XSP4JB6A.js";import{a as x,b as f,c as b,d as N,e as w,f as v,g as C,h as A,i as D}from"/build/_shared/chunk-3QGBS752.js";import{a as Q,b as Z}from"/build/_shared/chunk-ABDDDOIB.js";import{a as W,b as X,c as Y,d as h,e as o,f as i}from"/build/_shared/chunk-IEDNE26R.js";import"/build/_shared/chunk-M3TRH43M.js";import{a as K}from"/build/_shared/chunk-WZRQ3RQI.js";import"/build/_shared/chunk-PGURRWG5.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as ie}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as U,b as q,c as E,e as I,f as M}from"/build/_shared/chunk-G5A27C7O.js";import{h as t}from"/build/_shared/chunk-NVGVVEPD.js";import{Ea as p,Oa as z,S as u,V,W as G,oa as J,ra as O,xa as g}from"/build/_shared/chunk-PNJDYZ5P.js";import{d as R,e as B,h as F,l as H,p as P,r as $}from"/build/_shared/chunk-GTSSQFHM.js";import{a as oe,b as j}from"/build/_shared/chunk-BBTKOQ57.js";import{e as m}from"/build/_shared/chunk-UED2Q7CE.js";var me=m(ne());var _=m(oe());var ce=m(ie());var e=m(j());function ee(){let{teams:n,searchTerm:ae,page:c,view:r,can:l}=P(),[y,te]=(0,_.useState)(ae),s=R(),S=$(),se=B(),[d]=F(),le=se.state==="loading",re=a=>{a.preventDefault(),s(`?search=${y}&view=${r}`)},L=a=>{let k=new URLSearchParams(d);k.set("view",a),s(`?${k.toString()}`)};return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[(0,e.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold",children:"Liste des \xC9quipes"}),l?.create&&(0,e.jsxs)(t,{onClick:()=>s("/o/teams/new"),className:"w-full sm:w-auto h-12 text-base",children:[(0,e.jsx)(J,{className:"mr-2 h-5 w-5"}),"Ajouter une \xE9quipe"]})]}),(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-4 mb-6",children:[(0,e.jsxs)(H,{onSubmit:re,className:"relative w-full sm:w-auto sm:flex-1",children:[(0,e.jsx)(O,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 transform text-muted-foreground"}),(0,e.jsx)(K,{placeholder:"Rechercher une \xE9quipe...",value:y,onChange:a=>te(a.target.value),className:"pl-10 h-12 text-base w-full sm:max-w-md"})]}),(0,e.jsxs)("div",{className:"flex gap-2",children:[(0,e.jsx)(t,{variant:r==="grid"?"default":"outline",onClick:()=>L("grid"),className:"flex-1 sm:flex-none h-12",children:(0,e.jsx)(V,{className:"h-5 w-5"})}),(0,e.jsx)(t,{variant:r==="list"?"default":"outline",onClick:()=>L("list"),className:"flex-1 sm:flex-none h-12",children:(0,e.jsx)(G,{className:"h-5 w-5"})})]})]}),le?(0,e.jsx)(Z,{view:r,itemCount:20}):n.results.length>0?r==="grid"?(0,e.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:n.results.map(a=>(0,e.jsxs)(U,{className:"flex flex-col",children:[(0,e.jsxs)(q,{className:"p-4 sm:p-6",children:[(0,e.jsx)(E,{className:"text-xl font-bold mb-4",children:a.name}),a.attachments.length>0&&(0,e.jsx)("img",{src:T(a.attachments)?.file?.url,alt:T(a.attachments)?.label||"",className:"w-full h-48 object-cover rounded-md"})]}),(0,e.jsxs)(I,{className:"p-4 sm:p-6 pt-0 flex-grow",children:[(0,e.jsx)("p",{className:"text-base text-muted-foreground",children:a.description||"Aucune description"}),(0,e.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,e.jsx)(z,{className:"h-5 w-5 mr-2"}),(0,e.jsxs)("span",{className:"text-base",children:[a.members.length," membres"]})]})]}),(0,e.jsxs)(M,{className:"p-4 sm:p-6 flex flex-wrap gap-2",children:[l?.view&&(0,e.jsx)(t,{variant:"outline",className:"flex-1 h-12 text-base",onClick:()=>s(`/o/teams/view/${a.id}`),children:(0,e.jsx)(u,{className:"h-5 w-5 mr-2"})}),l?.edit&&(0,e.jsx)(t,{variant:"outline",className:"flex-1 h-12 text-base",onClick:()=>s(`/o/teams/edit/${a.id}`),children:(0,e.jsx)(g,{className:"h-5 w-5 mr-2"})}),l.delete&&(0,e.jsxs)(x,{children:[(0,e.jsx)(f,{asChild:!0,children:(0,e.jsx)(t,{variant:"outline",className:"flex-1 h-12 text-base",children:(0,e.jsx)(p,{className:"h-5 w-5 mr-2"})})}),(0,e.jsxs)(b,{className:"sm:max-w-[425px]",children:[(0,e.jsxs)(N,{children:[(0,e.jsx)(v,{className:"text-xl",children:"\xCAtes-vous s\xFBr ?"}),(0,e.jsx)(C,{className:"text-base",children:"Cette action ne peut pas \xEAtre annul\xE9e. Cela supprimera d\xE9finitivement l'\xE9quipe."})]}),(0,e.jsxs)(w,{className:"gap-3 sm:gap-0",children:[(0,e.jsx)(D,{className:"h-12 text-base",children:"Annuler"}),(0,e.jsx)(A,{onClick:()=>{S.submit({id:a.id},{method:"delete",action:"/o/teams"})},className:"h-12 text-base",children:"Supprimer"})]})]})]})]})]},a.id))}):(0,e.jsx)("div",{className:"rounded-lg border overflow-x-auto",children:(0,e.jsxs)(W,{children:[(0,e.jsx)(X,{children:(0,e.jsxs)(h,{children:[(0,e.jsx)(o,{className:"text-base",children:"Nom"}),(0,e.jsx)(o,{className:"text-base hidden md:table-cell",children:"Description"}),(0,e.jsx)(o,{className:"text-base hidden sm:table-cell",children:"Pi\xE8ces Jointes"}),(0,e.jsx)(o,{className:"text-base",children:"Membres"}),(0,e.jsx)(o,{className:"text-base text-right",children:"Actions"})]})}),(0,e.jsx)(Y,{children:n.results.map(a=>(0,e.jsxs)(h,{children:[(0,e.jsx)(i,{className:"font-medium text-base",children:a.name}),(0,e.jsx)(i,{className:"hidden md:table-cell text-base",children:a.description||"Aucune description"}),(0,e.jsx)(i,{className:"hidden sm:table-cell text-base",children:a.attachments?.length}),(0,e.jsx)(i,{className:"text-base",children:a.members.length}),(0,e.jsx)(i,{className:"text-right",children:(0,e.jsxs)("div",{className:"flex justify-end gap-2",children:[l?.view&&(0,e.jsx)(t,{variant:"ghost",className:"h-12",onClick:()=>s(`/o/teams/view/${a.id}`),children:(0,e.jsx)(u,{className:"h-5 w-5"})}),l?.edit((0,e.jsx)(t,{variant:"ghost",className:"h-12",onClick:()=>s(`/o/teams/edit/${a.id}`),children:(0,e.jsx)(g,{className:"h-5 w-5"})})),l?.delete&&(0,e.jsxs)(x,{children:[(0,e.jsx)(f,{asChild:!0,children:(0,e.jsx)(t,{variant:"ghost",className:"h-12",children:(0,e.jsx)(p,{className:"h-5 w-5"})})}),(0,e.jsxs)(b,{className:"sm:max-w-[425px]",children:[(0,e.jsxs)(N,{children:[(0,e.jsx)(v,{className:"text-xl",children:"\xCAtes-vous s\xFBr ?"}),(0,e.jsx)(C,{className:"text-base",children:"Cette action ne peut pas \xEAtre annul\xE9e. Cela supprimera d\xE9finitivement l'\xE9quipe."})]}),(0,e.jsxs)(w,{className:"gap-3 sm:gap-0",children:[(0,e.jsx)(D,{className:"h-12 text-base",children:"Annuler"}),(0,e.jsx)(A,{onClick:()=>{S.submit({id:a.id},{method:"delete",action:"/o/teams"})},className:"h-12 text-base",children:"Supprimer"})]})]})]})]})})]},a.id))})]})}):(0,e.jsx)(Q,{type:"\xE9quipes",createLink:"/o/teams/new",view:r}),n.results.length>0&&(0,e.jsxs)("div",{className:"mt-8 flex flex-col sm:flex-row justify-center items-center gap-4",children:[(0,e.jsx)(t,{variant:"outline",onClick:()=>{let a=new URLSearchParams(d);a.set("page",(c-1).toString()),s(`?${a.toString()}`)},disabled:c===1,className:"w-full sm:w-auto h-12 text-base",children:"Pr\xE9c\xE9dent"}),(0,e.jsxs)("span",{className:"text-base",children:["Page ",c]}),(0,e.jsx)(t,{variant:"outline",onClick:()=>{let a=new URLSearchParams(d);a.set("page",(c+1).toString()),s(`?${a.toString()}`)},disabled:n.results.length<20,className:"w-full sm:w-auto h-12 text-base",children:"Suivant"})]})]})}export{ee as default};
