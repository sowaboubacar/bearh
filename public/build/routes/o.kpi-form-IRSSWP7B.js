import{a as ne}from"/build/_shared/chunk-UYD3XYD3.js";import{a as z,b as X}from"/build/_shared/chunk-ABDDDOIB.js";import{a as J,b as Q,c as W,d as x,e as c,f as m}from"/build/_shared/chunk-IEDNE26R.js";import"/build/_shared/chunk-M3TRH43M.js";import{a as q}from"/build/_shared/chunk-WZRQ3RQI.js";import{a as N,b as v,c as b,d as C,e as D,f as T,g as y,h as P}from"/build/_shared/chunk-KLKNQD3Q.js";import"/build/_shared/chunk-PGURRWG5.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as le}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as E,b as j,c as A,e as U,f as $}from"/build/_shared/chunk-G5A27C7O.js";import{h as a}from"/build/_shared/chunk-NVGVVEPD.js";import{Ea as w,K as f,Q as M,W as V,oa as G,ra as O,xa as h}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as S,h as R,i as k,k as o,l as H,p as I,r as K}from"/build/_shared/chunk-GTSSQFHM.js";import{a as oe,b as F}from"/build/_shared/chunk-BBTKOQ57.js";import{e as n}from"/build/_shared/chunk-UED2Q7CE.js";var Y=n(oe());var ce=n(ne());var me=n(le());var e=n(F());function Z(){let{can:i,kpiForms:r,search:d,view:_,page:l,limit:p}=I(),[u,ee]=(0,Y.useState)(!1),[te,g]=R(),de=k(),ae=K(),se=S().state==="loading",s=te.get("view")||_,B=t=>{ee(!0),ae.submit({id:t,action:"delete"},{method:"post"})},ie=t=>{t.preventDefault();let re=new FormData(t.currentTarget).get("search");g({search:re,view:s})},L=t=>{g({search:d,view:t})};return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8 space-y-6",children:[(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,e.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold",children:"Formulaires KPI"}),i?.create&&(0,e.jsx)(a,{asChild:!0,className:"w-full sm:w-auto h-11 text-base",children:(0,e.jsxs)(o,{prefetch:"intent",to:"/o/kpi-form/new",children:[(0,e.jsx)(G,{className:"mr-2 h-5 w-5"}),"Nouveau Formulaire KPI"]})})]}),(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,e.jsxs)(H,{onSubmit:ie,className:"flex w-full sm:w-auto items-center gap-2",children:[(0,e.jsx)(q,{type:"search",name:"search",placeholder:"Rechercher des formulaires KPI...",defaultValue:d,className:"h-11 text-base"}),(0,e.jsx)(a,{type:"submit",className:"h-11 w-11",children:(0,e.jsx)(O,{className:"h-5 w-5"})})]}),(0,e.jsxs)("div",{className:"flex gap-2 w-full sm:w-auto",children:[(0,e.jsx)(a,{variant:s==="grid"?"default":"outline",onClick:()=>L("grid"),className:"flex-1 sm:flex-none h-11",children:(0,e.jsx)(M,{className:"h-5 w-5"})}),(0,e.jsx)(a,{variant:s==="list"?"default":"outline",onClick:()=>L("list"),className:"flex-1 sm:flex-none h-11",children:(0,e.jsx)(V,{className:"h-5 w-5"})})]})]}),se?(0,e.jsx)(X,{view:s,itemCount:p}):r.results.length>0?s==="grid"?(0,e.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:r.results.map(t=>(0,e.jsxs)(E,{className:"flex flex-col",children:[(0,e.jsx)(j,{className:"p-4 sm:p-6",children:(0,e.jsx)(A,{className:"text-xl font-bold",children:t.title})}),(0,e.jsxs)(U,{className:"p-4 sm:p-6 pt-0",children:[(0,e.jsx)("p",{className:"text-base text-muted-foreground",children:t.description}),(0,e.jsxs)("p",{className:"text-base font-medium mt-4",children:["Crit\xE8res : ",t.criteria.length]})]}),(0,e.jsx)($,{className:"p-4 sm:p-6 mt-auto pt-4",children:(0,e.jsxs)("div",{className:"flex justify-between w-full gap-2",children:[i?.view&&(0,e.jsx)(a,{asChild:!0,variant:"outline",className:"flex-1 h-11",children:(0,e.jsx)(o,{prefetch:"intent",to:`/o/kpi-form/view/${t.id}`,children:(0,e.jsx)(f,{className:"mr-2 h-5 w-5"})})}),i?.edit&&(0,e.jsx)(a,{asChild:!0,variant:"outline",className:"flex-1 h-11",children:(0,e.jsx)(o,{prefetch:"intent",to:`/o/kpi-form/edit/${t.id}`,children:(0,e.jsx)(h,{className:"mr-2 h-5 w-5"})})}),i?.delete&&(0,e.jsxs)(N,{children:[(0,e.jsx)(v,{asChild:!0,children:(0,e.jsx)(a,{variant:"destructive",className:"h-11 w-11",children:(0,e.jsx)(w,{className:"h-5 w-5"})})}),(0,e.jsxs)(C,{className:"sm:max-w-[425px]",children:[(0,e.jsxs)(D,{children:[(0,e.jsx)(y,{className:"text-lg sm:text-xl",children:"\xCAtes-vous s\xFBr de vouloir supprimer ce formulaire KPI ?"}),(0,e.jsx)(P,{className:"text-base",children:"Cette action ne peut pas \xEAtre annul\xE9e."})]}),(0,e.jsxs)(T,{className:"gap-3",children:[(0,e.jsx)(b,{asChild:!0,children:(0,e.jsx)(a,{variant:"outline",className:"h-11 text-base",children:"Annuler"})}),(0,e.jsx)(a,{variant:"destructive",onClick:()=>B(t.id),disabled:u,className:"h-11 text-base",children:u?"Suppression...":"Supprimer"})]})]})]})]})})]},t.id))}):(0,e.jsx)("div",{className:"rounded-lg border overflow-x-auto",children:(0,e.jsxs)(J,{children:[(0,e.jsx)(Q,{children:(0,e.jsxs)(x,{children:[(0,e.jsx)(c,{className:"text-base whitespace-nowrap",children:"Titre"}),(0,e.jsx)(c,{className:"text-base whitespace-nowrap hidden md:table-cell",children:"Description"}),(0,e.jsx)(c,{className:"text-base whitespace-nowrap",children:"Crit\xE8res"}),(0,e.jsx)(c,{className:"text-base text-right",children:"Actions"})]})}),(0,e.jsx)(W,{children:r.results.map(t=>(0,e.jsxs)(x,{children:[(0,e.jsx)(m,{className:"font-medium text-base",children:t.title}),(0,e.jsx)(m,{className:"text-base hidden md:table-cell",children:t.description}),(0,e.jsx)(m,{className:"text-base text-center",children:t.criteria.length}),(0,e.jsx)(m,{children:(0,e.jsxs)("div",{className:"flex justify-end gap-2",children:[i?.view&&(0,e.jsx)(a,{asChild:!0,variant:"outline",className:"h-11 w-11",children:(0,e.jsx)(o,{prefetch:"intent",to:`/o/kpi-form/view/${t.id}`,children:(0,e.jsx)(f,{className:"h-5 w-5"})})}),i?.edit&&(0,e.jsx)(a,{asChild:!0,variant:"outline",className:"h-11 w-11",children:(0,e.jsx)(o,{prefetch:"intent",to:`/o/kpi-form/edit/${t.id}`,children:(0,e.jsx)(h,{className:"h-5 w-5"})})}),i?.delete&&(0,e.jsxs)(N,{children:[(0,e.jsx)(v,{asChild:!0,children:(0,e.jsx)(a,{variant:"destructive",className:"h-11 w-11",children:(0,e.jsx)(w,{className:"h-5 w-5"})})}),(0,e.jsxs)(C,{className:"sm:max-w-[425px]",children:[(0,e.jsxs)(D,{children:[(0,e.jsx)(y,{className:"text-lg sm:text-xl",children:"\xCAtes-vous s\xFBr de vouloir supprimer ce formulaire KPI ?"}),(0,e.jsx)(P,{className:"text-base",children:"Cette action ne peut pas \xEAtre annul\xE9e."})]}),(0,e.jsxs)(T,{className:"gap-3",children:[(0,e.jsx)(b,{asChild:!0,children:(0,e.jsx)(a,{variant:"outline",className:"h-11 text-base",children:"Annuler"})}),(0,e.jsx)(a,{variant:"destructive",onClick:()=>B(t.id),disabled:u,className:"h-11 text-base",children:u?"Suppression...":"Supprimer"})]})]})]})]})})]},t.id))})]})}):(0,e.jsx)(z,{type:"formulaires KPI",createLink:"/o/kpi-form/new",view:s}),r.totalResults>0&&(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4",children:[(0,e.jsx)(a,{onClick:()=>g({search:d,view:s,page:(l-1).toString()}),disabled:l===1,className:"w-full sm:w-auto h-11 text-base",children:"Pr\xE9c\xE9dent"}),(0,e.jsxs)("span",{className:"text-base",children:["Page ",l," sur ",Math.ceil(r.totalResults/p)]}),(0,e.jsx)(a,{onClick:()=>g({search:d,view:s,page:(l+1).toString()}),disabled:l*p>=r.totalResults,className:"w-full sm:w-auto h-11 text-base",children:"Suivant"})]})]})}export{Z as default};
