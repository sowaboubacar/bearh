import{a as ne}from"/build/_shared/chunk-YWUCPBEQ.js";import{a as oe}from"/build/_shared/chunk-OT2QTX4F.js";import{a as de}from"/build/_shared/chunk-XSP4JB6A.js";import{a as re}from"/build/_shared/chunk-XKJ5LF2E.js";import{a as te}from"/build/_shared/chunk-CP3WB6KC.js";import{a as ie}from"/build/_shared/chunk-3DB3GQTY.js";import{a as l}from"/build/_shared/chunk-XDNDK56N.js";import"/build/_shared/chunk-KAUQO2FD.js";import"/build/_shared/chunk-7ZNTUDLC.js";import{a as se}from"/build/_shared/chunk-6JFOYO3V.js";import{a as L}from"/build/_shared/chunk-L2TBXS32.js";import{a as c}from"/build/_shared/chunk-JBQJJPFB.js";import{b as u}from"/build/_shared/chunk-SS7AQOQ3.js";import{a as $,b as G,c as H}from"/build/_shared/chunk-2MHSPA7K.js";import{a as N}from"/build/_shared/chunk-WZRQ3RQI.js";import"/build/_shared/chunk-YYMCCM4Y.js";import{a as ae}from"/build/_shared/chunk-35S5HMBT.js";import"/build/_shared/chunk-5KYGR3MA.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as ee}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as r,b as o,c as d,e as n,f as S}from"/build/_shared/chunk-G5A27C7O.js";import{h as b}from"/build/_shared/chunk-NVGVVEPD.js";import{X as E,b as D,t as F}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as v,k as T,l as w,p as y,q as A}from"/build/_shared/chunk-GTSSQFHM.js";import{a as _,b as k}from"/build/_shared/chunk-BBTKOQ57.js";import{e as t}from"/build/_shared/chunk-UED2Q7CE.js";var p=t(_()),ce=t(ae());var le=t(oe()),me=t(se()),pe=t(re()),ue=t(de()),he=t(te()),ge=t(ie()),be=t(ne()),Ne=t(ee());var e=t(k());function I(){let{task:i,users:M,positions:O,teams:R,departments:j,hourGroups:U,access:B,can:q}=y(),f=A(),x=v(),[C,z]=(0,p.useState)(!1),[P,V]=(0,p.useState)(i.title),[J,K]=(0,p.useState)(i.description||""),[Q,W]=(0,p.useState)(i.dueDate?new Date(i.dueDate).toISOString().split("T")[0]:""),[a,X]=(0,p.useState)({users:i.assignedTo.users.map(s=>s.id),positions:i.assignedTo.positions.map(s=>s.id),teams:i.assignedTo.teams.map(s=>s.id),departments:i.assignedTo.departments.map(s=>s.id),hourGroups:i.assignedTo.hourGroups.map(s=>s.id),access:i.assignedTo.access.map(s=>s.id)}),m=(s,g)=>{X(h=>({...h,[s]:h[s].includes(g)?h[s].filter(Z=>Z!==g):[...h[s],g]}))},Y=()=>{z(!0)};return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[q?.list&&(0,e.jsx)(b,{asChild:!0,variant:"outline",className:"mb-6 h-12 text-base",children:(0,e.jsxs)(T,{prefetch:"intent",to:"/o/task",children:[(0,e.jsx)(D,{className:"mr-2 h-5 w-5"}),"Retour \xE0 la liste"]})}),(0,e.jsxs)(r,{className:"max-w-2xl mx-auto",children:[(0,e.jsx)(o,{className:"p-4 sm:p-6",children:(0,e.jsx)(d,{className:"text-2xl sm:text-3xl font-bold",children:"Modifier la T\xE2che"})}),(0,e.jsxs)(w,{method:"post",onSubmit:Y,children:[(0,e.jsxs)(n,{className:"p-4 sm:p-6 space-y-8",children:[f?.error&&(0,e.jsxs)($,{variant:"destructive",children:[(0,e.jsx)(F,{className:"h-5 w-5"}),(0,e.jsx)(G,{className:"text-base font-medium",children:"Erreur"}),(0,e.jsx)(H,{className:"text-base",children:f.error})]}),(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(u,{htmlFor:"title",className:"text-base font-medium",children:"Titre"}),(0,e.jsx)(N,{type:"text",id:"title",name:"title",value:P,onChange:s=>V(s.target.value),required:!0,className:"h-12 text-base"})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(u,{htmlFor:"description",className:"text-base font-medium",children:"Description"}),(0,e.jsx)(L,{id:"description",name:"description",value:J,onChange:s=>K(s.target.value),rows:3,className:"min-h-[120px] text-base p-3 resize-y"})]})]}),(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsx)(u,{className:"text-base font-medium",children:"Assign\xE9 \xE0"}),(0,e.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,e.jsxs)(r,{className:"shadow-none border",children:[(0,e.jsx)(o,{className:"p-4",children:(0,e.jsx)(d,{className:"text-base font-semibold",children:"Utilisateurs"})}),(0,e.jsx)(n,{className:"p-0",children:(0,e.jsx)(l,{className:"h-[300px] px-4",children:M.map(s=>(0,e.jsxs)("div",{className:"flex items-center space-x-3 py-3 border-b last:border-0",children:[(0,e.jsx)(c,{id:`user-${s.id}`,checked:a.users.includes(s.id),onCheckedChange:()=>m("users",s.id),className:"h-5 w-5"}),(0,e.jsxs)("label",{htmlFor:`user-${s.id}`,className:"text-base",children:[s.firstName," ",s.lastName]}),a.users.includes(s.id)&&(0,e.jsx)("input",{type:"hidden",name:"assignedTo.users",value:s.id})]},s.id))})})]}),(0,e.jsxs)(r,{className:"shadow-none border",children:[(0,e.jsx)(o,{className:"p-4",children:(0,e.jsx)(d,{className:"text-base font-semibold",children:"Postes"})}),(0,e.jsx)(n,{className:"p-0",children:(0,e.jsx)(l,{className:"h-[300px] px-4",children:O.map(s=>(0,e.jsxs)("div",{className:"flex items-center space-x-3 py-3 border-b last:border-0",children:[(0,e.jsx)(c,{id:`position-${s.id}`,checked:a.positions.includes(s.id),onCheckedChange:()=>m("positions",s.id),className:"h-5 w-5"}),(0,e.jsx)("label",{htmlFor:`position-${s.id}`,className:"text-base",children:s.title}),a.positions.includes(s.id)&&(0,e.jsx)("input",{type:"hidden",name:"assignedTo.positions",value:s.id})]},s.id))})})]}),(0,e.jsxs)(r,{className:"shadow-none border",children:[(0,e.jsx)(o,{className:"p-4",children:(0,e.jsx)(d,{className:"text-base font-semibold",children:"\xC9quipes"})}),(0,e.jsx)(n,{className:"p-0",children:(0,e.jsx)(l,{className:"h-[300px] px-4",children:R.map(s=>(0,e.jsxs)("div",{className:"flex items-center space-x-3 py-3 border-b last:border-0",children:[(0,e.jsx)(c,{id:`team-${s.id}`,checked:a.teams.includes(s.id),onCheckedChange:()=>m("teams",s.id),className:"h-5 w-5"}),(0,e.jsx)("label",{htmlFor:`team-${s.id}`,className:"text-base",children:s.name}),a.teams.includes(s.id)&&(0,e.jsx)("input",{type:"hidden",name:"assignedTo.teams",value:s.id})]},s.id))})})]}),(0,e.jsxs)(r,{className:"shadow-none border",children:[(0,e.jsx)(o,{className:"p-4",children:(0,e.jsx)(d,{className:"text-base font-semibold",children:"D\xE9partements"})}),(0,e.jsx)(n,{className:"p-0",children:(0,e.jsx)(l,{className:"h-[300px] px-4",children:j.map(s=>(0,e.jsxs)("div",{className:"flex items-center space-x-3 py-3 border-b last:border-0",children:[(0,e.jsx)(c,{id:`department-${s.id}`,checked:a.departments.includes(s.id),onCheckedChange:()=>m("departments",s.id),className:"h-5 w-5"}),(0,e.jsx)("label",{htmlFor:`department-${s.id}`,className:"text-base",children:s.name}),a.departments.includes(s.id)&&(0,e.jsx)("input",{type:"hidden",name:"assignedTo.departments",value:s.id})]},s.id))})})]}),(0,e.jsxs)(r,{className:"shadow-none border",children:[(0,e.jsx)(o,{className:"p-4",children:(0,e.jsx)(d,{className:"text-base font-semibold",children:"Groupes Horaires"})}),(0,e.jsx)(n,{className:"p-0",children:(0,e.jsx)(l,{className:"h-[300px] px-4",children:U.map(s=>(0,e.jsxs)("div",{className:"flex items-center space-x-3 py-3 border-b last:border-0",children:[(0,e.jsx)(c,{id:`hourGroup-${s.id}`,checked:a.hourGroups.includes(s.id),onCheckedChange:()=>m("hourGroups",s.id),className:"h-5 w-5"}),(0,e.jsx)("label",{htmlFor:`hourGroup-${s.id}`,className:"text-base",children:s.name}),a.hourGroups.includes(s.id)&&(0,e.jsx)("input",{type:"hidden",name:"assignedTo.hourGroups",value:s.id})]},s.id))})})]}),(0,e.jsxs)(r,{className:"shadow-none border",children:[(0,e.jsx)(o,{className:"p-4",children:(0,e.jsx)(d,{className:"text-base font-semibold",children:"Groupes d'Acc\xE8s"})}),(0,e.jsx)(n,{className:"p-0",children:(0,e.jsx)(l,{className:"h-[300px] px-4",children:B.map(s=>(0,e.jsxs)("div",{className:"flex items-center space-x-3 py-3 border-b last:border-0",children:[(0,e.jsx)(c,{id:`access-${s.id}`,checked:a.access.includes(s.id),onCheckedChange:()=>m("access",s.id),className:"h-5 w-5"}),(0,e.jsx)("label",{htmlFor:`access-${s.id}`,className:"text-base",children:s.name}),a.access.includes(s.id)&&(0,e.jsx)("input",{type:"hidden",name:"assignedTo.access",value:s.id})]},s.id))})})]})]})]}),(0,e.jsx)("div",{className:"space-y-6",children:(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(u,{htmlFor:"dueDate",className:"text-base font-medium",children:"Date d'\xE9ch\xE9ance"}),(0,e.jsx)(N,{type:"date",id:"dueDate",name:"dueDate",value:Q,onChange:s=>W(s.target.value),className:"h-12 text-base"})]})})]}),(0,e.jsx)(S,{className:"p-4 sm:p-6",children:(0,e.jsx)(b,{type:"submit",className:"w-full h-12 text-base",disabled:C||x.state==="submitting",children:C||x.state==="submitting"?(0,e.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,e.jsx)(E,{className:"h-5 w-5 animate-spin"}),"Mise \xE0 jour en cours..."]}):"Mettre \xE0 jour la t\xE2che"})})]})]})]})}export{I as default};
