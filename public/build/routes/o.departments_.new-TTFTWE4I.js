import{a as ie}from"/build/_shared/chunk-CP3WB6KC.js";import{a as P}from"/build/_shared/chunk-XDNDK56N.js";import{a as L,b as I,c as T,d as M,e as k}from"/build/_shared/chunk-NCY4KUS2.js";import"/build/_shared/chunk-Q6K63OHD.js";import"/build/_shared/chunk-KAUQO2FD.js";import"/build/_shared/chunk-7ZNTUDLC.js";import{a as ne}from"/build/_shared/chunk-6JFOYO3V.js";import{a as E}from"/build/_shared/chunk-L2TBXS32.js";import{a as H}from"/build/_shared/chunk-A762UFCP.js";import"/build/_shared/chunk-RHTBOEYQ.js";import"/build/_shared/chunk-HNF2M344.js";import"/build/_shared/chunk-IQV4D3C7.js";import"/build/_shared/chunk-H33OI7YH.js";import{a as j}from"/build/_shared/chunk-JBQJJPFB.js";import{b as o}from"/build/_shared/chunk-SS7AQOQ3.js";import{a as R,b as U,c as B}from"/build/_shared/chunk-2MHSPA7K.js";import"/build/_shared/chunk-M3TRH43M.js";import{a as F}from"/build/_shared/chunk-WZRQ3RQI.js";import"/build/_shared/chunk-XNZ6DBKW.js";import"/build/_shared/chunk-YYMCCM4Y.js";import{a as me}from"/build/_shared/chunk-35S5HMBT.js";import"/build/_shared/chunk-2BPW44Z6.js";import"/build/_shared/chunk-5KYGR3MA.js";import"/build/_shared/chunk-KLKNQD3Q.js";import"/build/_shared/chunk-PGURRWG5.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as oe}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as m,b as x,c as v,e as C,f as S}from"/build/_shared/chunk-G5A27C7O.js";import{h as i}from"/build/_shared/chunk-NVGVVEPD.js";import{X as A,b as D,t as w}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as u,i as g,k as f,l as b,p as N,q as h}from"/build/_shared/chunk-GTSSQFHM.js";import{a as re,b as y}from"/build/_shared/chunk-BBTKOQ57.js";import{e as a}from"/build/_shared/chunk-UED2Q7CE.js";var ce=a(me());var s=a(re());var le=a(ie()),de=a(oe()),pe=a(ne());var e=a(y());function W(){let{potentialManagers:c,can:$}=N(),l=h(),q=u(),[V,z]=(0,s.useState)(""),[O,G]=(0,s.useState)(""),[J,K]=(0,s.useState)(""),[Q,X]=(0,s.useState)([]),[Y,Z]=(0,s.useState)(!1),d=q.state==="submitting",_=g(),ee=t=>{t.preventDefault();let r=new FormData(t.currentTarget);Q.forEach(n=>{r.append("attachments",n.id)}),_(r,{method:"post"})},te=t=>{X(t)},[p,ae]=(0,s.useState)([]),se=t=>{ae(r=>r.includes(t)?r.filter(n=>n!==t):[...r,t])};return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:py-10",children:[$?.list&&(0,e.jsx)(i,{asChild:!0,variant:"outline",className:"mb-6 h-11 text-base",children:(0,e.jsxs)(f,{prefetch:"intent",to:"/o/departments",children:[(0,e.jsx)(D,{className:"mr-2 h-5 w-5"}),"Retour \xE0 la liste"]})}),(0,e.jsxs)(m,{className:"max-w-2xl mx-auto",children:[(0,e.jsx)(x,{className:"p-4 sm:p-6",children:(0,e.jsx)(v,{className:"text-xl sm:text-2xl lg:text-3xl font-bold",children:"Ajouter un Nouveau D\xE9partement"})}),(0,e.jsxs)(b,{method:"post",onSubmit:ee,children:[(0,e.jsxs)(C,{className:"p-4 sm:p-6 space-y-6",children:[l?.error&&(0,e.jsxs)(R,{variant:"destructive",children:[(0,e.jsx)(w,{className:"h-5 w-5"}),(0,e.jsx)(U,{className:"text-base font-medium",children:"Erreur"}),(0,e.jsx)(B,{className:"text-base",children:l.error})]}),(0,e.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,e.jsx)(o,{htmlFor:"name",className:"text-base font-medium",children:"Nom du d\xE9partement"}),(0,e.jsx)(F,{id:"name",name:"name",value:V,onChange:t=>z(t.target.value),required:!0,className:"h-11 text-base"})]}),(0,e.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,e.jsx)(o,{htmlFor:"description",className:"text-base font-medium",children:"Description"}),(0,e.jsx)(E,{id:"description",name:"description",value:O,onChange:t=>G(t.target.value),rows:4,className:"min-h-[120px] text-base p-3"})]}),(0,e.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,e.jsx)(o,{htmlFor:"managerId",className:"text-base font-medium",children:"Manager du d\xE9partement"}),(0,e.jsxs)(L,{name:"managerId",value:J,onValueChange:K,children:[(0,e.jsx)(T,{className:"h-11 text-base",children:(0,e.jsx)(I,{placeholder:"S\xE9lectionner un manager"})}),(0,e.jsx)(M,{children:c.map(t=>(0,e.jsxs)(k,{value:t.id,className:"text-base",children:[t.firstName," ",t.lastName]},t.id))})]})]}),(0,e.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,e.jsx)(o,{className:"text-base font-medium",children:"Membres du d\xE9partment"}),(0,e.jsx)(m,{children:(0,e.jsx)(P,{className:"h-72 sm:h-80 w-full rounded-md border p-4",children:c.map(t=>(0,e.jsxs)("div",{className:"flex items-center space-x-3 py-3 sm:py-4",children:[(0,e.jsx)(j,{id:`user-${t.id}`,checked:p.includes(t.id),onCheckedChange:()=>se(t.id),className:"h-5 w-5 sm:h-6 sm:w-6"}),(0,e.jsxs)("label",{htmlFor:`user-${t.id}`,className:"text-base font-medium cursor-pointer",children:[t.firstName," ",t.lastName]}),p.includes(t.id)&&(0,e.jsx)("input",{type:"hidden",name:"members",value:t.id})]},t.id))})})]}),(0,e.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,e.jsx)(o,{htmlFor:"attachments",className:"text-base font-medium",children:"Images & Pi\xE8ces jointes"}),(0,e.jsx)(H,{onSelect:te,multiple:!0,accept:"image/*,application/pdf",maxSize:5*1024*1024,onBusyStateChange:Z,className:"w-full"})]})]}),(0,e.jsx)(S,{className:"p-4 sm:p-6",children:(0,e.jsx)(i,{type:"submit",className:"w-full h-11 text-base",disabled:d||Y,children:d?(0,e.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,e.jsx)(A,{className:"h-5 w-5 animate-spin"}),"Cr\xE9ation en cours..."]}):"Cr\xE9er le D\xE9partement"})})]})]})]})}export{W as default};
