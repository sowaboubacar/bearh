import{a as L,b as k,c as x,d as A}from"/build/_shared/chunk-CJJH5MG4.js";import{a as lt}from"/build/_shared/chunk-N4U522YR.js";import{a as Ke,b as Je,c as Xe,d as T}from"/build/_shared/chunk-GE2LZYMT.js";import{a as ce}from"/build/_shared/chunk-YDVZI2RP.js";import{a as We}from"/build/_shared/chunk-XDNDK56N.js";import{b as Ve}from"/build/_shared/chunk-72NK2JAN.js";import{a as C,b as N,c as R}from"/build/_shared/chunk-MRGZKXS3.js";import{a as qe,b as je,c as F,d as H}from"/build/_shared/chunk-Z7S4CDT2.js";import"/build/_shared/chunk-UNOET767.js";import{b as I}from"/build/_shared/chunk-FB4U2LCE.js";import"/build/_shared/chunk-Q6K63OHD.js";import"/build/_shared/chunk-KAUQO2FD.js";import"/build/_shared/chunk-7ZNTUDLC.js";import{a as $}from"/build/_shared/chunk-OFTXZR4P.js";import"/build/_shared/chunk-XNZ6DBKW.js";import"/build/_shared/chunk-2BPW44Z6.js";import"/build/_shared/chunk-5KYGR3MA.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as st}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as Q,b as Ne,c as Te,e as Le,f as ke}from"/build/_shared/chunk-G5A27C7O.js";import{a as w,h as u}from"/build/_shared/chunk-NVGVVEPD.js";import{Aa as re,Ba as $e,C as ee,D as M,Ga as Ge,H as E,Ha as se,Ja as le,L as y,La as B,N as te,Oa as D,Qa as ze,S as ae,T as Pe,U as Oe,_ as Ee,ba as Ue,ca as Be,d as O,da as oe,e as xe,g as Y,ga as De,ha as ne,i as Ae,ia as ie,k as Z,m as Me,n as _,p as Ie,r as Se,sa as U,ta as Re,ua as Fe,ya as He}from"/build/_shared/chunk-PNJDYZ5P.js";import{b as he,c as ve,d as g,f as ge,g as be,j as X,k as we,p as ye,r as Ce}from"/build/_shared/chunk-GTSSQFHM.js";import{a as fe,b}from"/build/_shared/chunk-BBTKOQ57.js";import{e as c}from"/build/_shared/chunk-UED2Q7CE.js";var d=c(fe());var Qe=c(fe());var l=c(b());function Ye({employeeOfThisMonth:t}){let o=g(),[a,s]=(0,Qe.useState)(!1);if(!t)return;let n=t.employee;return(0,l.jsxs)(I.div,{className:"bg-gradient-to-r from-primary to-primary-400 p-2 rounded-full shadow-2xl border-2 border-primary flex items-center space-x-2 cursor-pointer",onClick:()=>o(`/o/hall-of-fame/${t.id}`),onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),whileHover:{scale:1.02},transition:{duration:.2},children:[(0,l.jsx)(O,{className:"h-5 w-5 text-yellow-300"}),(0,l.jsxs)(C,{className:"h-8 w-8 border-2 border-white",children:[(0,l.jsx)(N,{src:n.avatar?.file?.url,alt:n.firstName}),(n.firstName+" "+n.lastName).split(" ").map(p=>p[0]).join("")]}),(0,l.jsxs)("div",{className:"flex-grow",children:[(0,l.jsxs)("p",{className:"text-white text-xs font-semibold truncate",children:[n.firstName," ",n.lastName]}),(0,l.jsxs)($,{variant:"secondary",className:"text-[10px] px-1 py-0 text-pretty",children:[t.message.split(" ").slice(0,3).join(" "),"..."]})]}),(0,l.jsx)(I.div,{animate:{rotate:a?90:0},transition:{duration:.2},children:(0,l.jsx)(Se,{className:"h-4 w-4 text-red-800"})})]})}var r=c(b());function Ze({employeeOfThisMonth:t}){let o=g();if(!t)return;let a=t.employee;return(0,r.jsx)(L,{children:(0,r.jsxs)(k,{children:[(0,r.jsx)(x,{asChild:!0,children:(0,r.jsx)("div",{children:(0,r.jsxs)(I.div,{className:"inline-flex items-center space-x-1 bg-primary/10 rounded-full p-1 cursor-pointer shadow-2xl border-2 border-primary",onClick:()=>o(`/o/hall-of-fame/${t.id}`),whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,r.jsxs)(C,{className:"h-6 w-6 border border-primary",children:[(0,r.jsx)(N,{src:a.avatar?.file?.url,alt:a.firstName,width:40,height:40}),(0,r.jsxs)(R,{children:[" ",(a.firstName+" "+a.lastName).split(" ").map(s=>s[0]).join("")]})]}),(0,r.jsxs)($,{variant:"secondary",className:"text-[10px] px-2 py-0 rounded-full truncate",children:[a.firstName," ",a.lastName]}),(0,r.jsx)(O,{className:"h-3 w-3  text-yellow-500 font-semibold"})]})})}),(0,r.jsx)(A,{children:(0,r.jsx)("p",{className:"text-sm truncate",children:t.message})})]})})}var ct=c(st()),dt=c(lt());var G={navAllUsers:[{title:"Pointage",url:"/o/attendance/check-in",icon:M,taskbarChildren:[{icon:M,label:"Je Pointe",url:"/o/attendance/check-in",condition:{any:["pointage:check-in","pointage:check-break-start","pointage:check-break-end","pointage:check-out"]}},{icon:y,label:"Suivi Pointage",url:"/o/attendance/history",condition:{any:["pointage:view-attendance-global-update-metric","pointage:view-attendance-global-update-history","pointage:filter-attendance-global-update-history","pointage:export-attendance-insight"]}}],condition:{any:["pointage:view-attendance-global-update-metric","pointage:view-attendance-global-update-history","pointage:filter-attendance-global-update-history","pointage:export-attendance-insight","pointage:check-in","pointage:check-break-start","pointage:check-break-end","pointage:check-out"]}},{title:"Employ\xE9 Du Mois",url:"/o/hall-of-fame",icon:se,taskbarChildren:[{icon:se,label:"Employ\xE9 Du Mois",url:"/o/hall-of-fame"},{icon:ze,label:"Vote En Cours",url:"/o/hall-of-fame/ongoing",condition:{any:["hallOfFame:cast-vote"]}}]},{title:"Note de Service",url:"/o/news",icon:ne,taskbarChildren:[{icon:ne,label:"Note de Service",url:"/o/news",condition:{any:["news:list"]}}],condition:{any:["news:list"]}},{title:"T\xE2ches",url:"/o/task",icon:ee,taskbarChildren:[{icon:ee,label:"Mes t\xE2ches",url:"/o/task",condition:{any:["task:list","task:list-own"]}}],condition:{any:["task:list","task:list-own"]}},{title:"Cong\xE9s & Permissions",url:"/o/permission-and-leave",icon:Z,taskbarChildren:[{icon:Z,label:"Faire une Demande ",url:"/o/permission-and-leave/new",condition:{any:["permissions:create"]}},{icon:M,label:" Historiques",url:"/o/permission-and-leave",condition:{any:["permissions:list","permissions:list-own"]}}],condition:{any:["permissions:list","permissions:list-own"]}},{title:"Prise de Notes",url:"/o/note",icon:re,taskbarChildren:[{icon:re,label:"Mes Notes",url:"/o/note",condition:{any:["note:list","note:list-own"]}},{icon:Fe,label:"Partag\xE9es",url:"/o/note/shared",condition:{any:["note:list","note:list-own"]}}],condition:{any:["note:list","note:list-own"]}},{title:"Notes de Frais",url:"/o/expense-report",icon:E,taskbarChildren:[{icon:y,label:"Notes de Frais",url:"/o/expense-report",condition:{any:["expenseReport:list","expenseReport:list-own"]}},{icon:E,label:"Nouvelle Note",url:"/o/expense-report/new",condition:{any:["expenseReport:create"]}}],condition:{any:["expenseReport:list","expenseReport:list-own"]}},{title:"M\xE9diath\xE8que",url:"/o/media-manager",icon:te,taskbarChildren:[{icon:te,label:"Mes Documents",url:"/o/media-manager",condition:{any:["document:list","document:list-own"]}}],condition:{any:["document:list","document:list-own"]}}],navHRManagers:[{title:"Employ\xE9s",url:"/o/users",icon:D,taskbarChildren:[{icon:le,label:"Mes Supervis\xE9s",url:"/o/users/my-subordinates"},{icon:D,label:"Mes Coll\xE8gues",url:"/o/users",condition:{any:["user:list"]}}],condition:{any:["user:list"]}},{title:"KPI & Evaluations",url:"/o/evaluations",icon:_,taskbarChildren:[{icon:Me,label:"Evaluations",url:"/o/evaluations",condition:{any:["kpiValue:list","kpiValue:list-own"]}},{icon:_,label:"KPI",url:"/o/kpi-form",condition:{all:["kpiForm:list","kpiForm:create"]}}],condition:{any:["kpiValue:list","kpiValue:list-own","kpiForm:list","kpiForm:create"]}},{title:"Remarques",url:"/o/observation",icon:oe,taskbarChildren:[{icon:oe,label:"Ajouter",url:"/o/observation/new",condition:"observation:create"},{icon:y,label:"Historique",url:"/o/observation",condition:{any:["observation:list","observation:list-own"]}}],condition:{any:["observation:list","observation:list-own"]}},{title:"Base de talents",url:"/o/candidates",icon:B,taskbarChildren:[{icon:B,label:"Candidatures",url:"/o/candidates",condition:"candidate:list"},{icon:B,label:"Nouveau",url:"/o/candidates/new",condition:"candidate:create"}],condition:{any:["candidate:list"]}},{title:"Primes",url:"/o/prime",icon:E,taskbarChildren:[{icon:y,label:"Historique",url:"/o/prime",condition:{any:["prime:list","prime:list-own"]}},{icon:y,label:"Cat\xE9gories",url:"/o/category-prime",condition:"bonusCategory:list"}],condition:{any:["bonusCategory:list","prime:list","prime:list-own"]}},{title:"Base de Connaissances",url:"/o/enterprise-videos",icon:ae,taskbarChildren:[{icon:U,label:"Ma Pharmacie",url:"/o/enterprise-videos",condition:{all:["enterpriseVideo:list"]}},{icon:U,label:"Mes Coll\xE8gues",url:"/o/collaborator-videos",condition:{all:["collaboratorVideo:list"]}}],condition:{any:["enterpriseVideo:list","collaboratorVideo:list"]}}],navGeneralManagement:[{title:"Patrimoine",url:"/o/patrimoine",icon:ie,taskbarChildren:[{icon:ie,label:"Inventaire",url:"/o/patrimoine",condition:"patrimoine:list"},{icon:Oe,label:"Type d'Actif",url:"/o/patrimoine-type",condition:"patrimoineType:list"}],condition:{any:["patrimoine:list","patrimoineType:list"]}},{title:"Organisation",url:"/o/departments",icon:Y,taskbarChildren:[{icon:Y,label:"D\xE9partements",url:"/o/departments",condition:{any:["department:list"]}},{icon:D,label:"\xC9quipes",url:"/o/teams",condition:{all:["team:list"]}},{icon:le,label:"Postes",url:"/o/positions",condition:{all:["position:list"]}},{icon:Pe,label:"Acc\xE8s",url:"/o/access",condition:{all:["access:list"]}},{icon:M,label:"Programmes",url:"/o/hour-group",condition:{all:["hourGroup:list"]}},{icon:Ae,label:"Garde",url:"/o/guard-tour",condition:{any:["guardTour:list"]}}],condition:{any:["department:list","team:list","position:list","access:list","hourGroup:list","guardTour:list"]}},{title:"Configuration G\xE9n\xE9rale",url:"/o/settings",icon:ae,taskbarChildren:[{icon:U,label:"Param\xE8trage",url:"/o/settings",condition:{all:["systemConfig:edit","systemConfig:view","systemConfig:reset"]}}],condition:{all:["systemConfig:edit","systemConfig:view","systemConfig:reset"]}}]};function _e(t){return[...G.navAllUsers,...G.navHRManagers,...G.navGeneralManagement].find(a=>a.url===t)}var e=c(b());function mt(){let[t,o]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{function a(){o(window.innerWidth<768)}return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),t}function et(){let[t,o]=(0,d.useState)("light"),a=Ce(),s=g(),n=ve(),[p,z]=(0,d.useState)(!1),[V,pt]=(0,d.useState)("windows"),[q,me]=(0,d.useState)(()=>typeof window<"u"?window.innerWidth>=768:!0),ft=mt(),{user:h,employeeOfThisMonth:S,activeTab:tt,activeTaskbarItems:at,filteredNavData:j}=ye(),[v,ot]=(0,d.useState)(tt),ue=()=>{document.fullscreenElement?(document.exitFullscreen(),z(!1)):(document.documentElement.requestFullscreen(),z(!0))},nt=()=>{me(i=>!i),fetch("/api/set-theme",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({isSidebarOpen:q!==!0})})},it=()=>{a.submit(null,{method:"post",action:"/logout"})},ht=i=>{s(`${i}?tab=${v}`)},rt=i=>{ot(i);let m=new URLSearchParams(window.location.search);m.set("tab",i),window.history.replaceState({},"",`${window.location.pathname}?${m.toString()}`)};(0,d.useEffect)(()=>{let i=()=>{me(window.innerWidth>=768)};return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]);let vt=(i,m={})=>{let P=n.pathname.split("/").pop(),f=i.replace("{id}",P),K=f,J=new URLSearchParams(m).toString();return J&&(f.includes("?")?K=`${f}&${J}`:K=`${f}?${J}`),K},W=i=>i.taskbarChildren?.some(m=>m.url===n.pathname)?"active":"";return(0,e.jsxs)("div",{className:w("flex flex-col h-screen bg-background text-foreground",V==="macos"?"font-sans":"font-sans-serif"),children:[(0,e.jsx)("div",{className:w("flex flex-col px-4 bg-secondary","shadow-xl border-0 border-e-primary-foreground"),children:(0,e.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,e.jsxs)("div",{className:"flex items-center flex-1",children:[V==="macos"&&(0,e.jsxs)("div",{className:"flex space-x-2 mr-4",children:[(0,e.jsx)("button",{className:"w-3 h-3 rounded-full bg-red-500 hover:bg-red-600",onClick:()=>window.close()}),(0,e.jsx)("button",{className:"w-3 h-3 rounded-full bg-yellow-500 hover:bg-yellow-600",onClick:()=>z(!p)}),(0,e.jsx)("button",{className:"w-3 h-3 rounded-full bg-green-500 hover:bg-green-600",onClick:ue})]}),(0,e.jsx)(u,{variant:"ghost",size:"icon",onClick:nt,children:(0,e.jsx)(Be,{className:"h-4 w-4"})})]}),(0,e.jsx)("div",{className:"flex-1 text-center",children:S&&(0,e.jsx)(Ze,{employeeOfThisMonth:S})}),(0,e.jsxs)("div",{className:"flex items-center space-x-2 flex-1 justify-end",children:[(0,e.jsx)(L,{children:(0,e.jsxs)(k,{children:[(0,e.jsx)(x,{asChild:!0,children:(0,e.jsx)(Ve,{})}),(0,e.jsx)(A,{children:(0,e.jsx)("p",{children:t==="dark"?"Passer en mode clair":"Passer en mode sombre"})})]})}),V==="windows"&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(u,{variant:"ghost",size:"icon",onClick:ue,children:p?(0,e.jsx)(He,{className:"h-4 w-4"}):(0,e.jsx)(Ue,{className:"h-4 w-4"})})})]})]})}),(0,e.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,e.jsx)(Q,{className:w("flex flex-col border-r rounded-none transition-all duration-300 ease-in-out",q?"w-64":"w-0","md:relative absolute z-10 h-full shadow-xl border-2 border-e-primary-foreground"),children:q&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"w-full max-w-sm",children:S&&(0,e.jsx)(Ye,{employeeOfThisMonth:S})}),(0,e.jsxs)(qe,{value:v,className:"flex-1 flex flex-col",onValueChange:rt,children:[(0,e.jsxs)(je,{className:"grid w-full grid-cols-3",children:[(0,e.jsx)(F,{value:"all",children:"Tous"}),(0,e.jsx)(F,{value:"hr",children:"RH"}),(0,e.jsx)(F,{value:"management",children:"Direction"})]}),(0,e.jsxs)(We,{className:"flex-1",children:[(0,e.jsx)(H,{value:"all",className:"m-0",children:(0,e.jsx)(de,{items:j.navAllUsers,tab:v,inferedCn:W})}),(0,e.jsx)(H,{value:"hr",className:"m-0",children:(0,e.jsx)(de,{tab:v,inferedCn:W,items:j.navHRManagers})}),(0,e.jsx)(H,{value:"management",className:"m-0",children:(0,e.jsx)(de,{tab:v,inferedCn:W,items:j.navGeneralManagement})})]})]}),(0,e.jsx)(ce,{}),(0,e.jsx)("div",{className:"p-4",children:(0,e.jsxs)(Ke,{children:[(0,e.jsx)(Je,{asChild:!0,children:(0,e.jsxs)(u,{variant:"ghost",className:"w-full justify-between",children:[(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsxs)(C,{className:"h-6 w-6 mr-2",children:[(0,e.jsx)(N,{src:h.avatar?.file?.url}),(0,e.jsx)(R,{children:(h.firstName+" "+h.lastName).split(" ").map(i=>i[0]).join("")})]}),(0,e.jsxs)("strong",{children:[h.firstName," ",h.lastName]})]}),(0,e.jsx)(Ie,{className:"h-4 w-4 opacity-50"})]})}),(0,e.jsxs)(Xe,{align:"end",className:"w-56",children:[(0,e.jsxs)(T,{onClick:()=>s(`/o/users/view/${h.id}`),children:[(0,e.jsx)(xe,{className:"mr-2 h-4 w-4"}),(0,e.jsx)("span",{children:"Compte"})]}),(0,e.jsxs)(T,{onClick:()=>o("light"),children:[(0,e.jsx)($e,{className:"mr-2 h-4 w-4"}),(0,e.jsx)("span",{children:"Th\xE8me clair"})]}),(0,e.jsxs)(T,{onClick:()=>o("dark"),children:[(0,e.jsx)(De,{className:"mr-2 h-4 w-4"}),(0,e.jsx)("span",{children:"Th\xE8me sombre"})]}),(0,e.jsxs)(T,{onClick:()=>o("system"),children:[(0,e.jsx)(Re,{className:"mr-2 h-4 w-4"}),(0,e.jsx)("span",{children:"Th\xE8me syst\xE8me"})]}),(0,e.jsx)(ce,{}),(0,e.jsxs)(T,{onClick:it,children:[(0,e.jsx)(Ee,{className:"mr-2 h-4 w-4"}),(0,e.jsx)("span",{children:"Se d\xE9connecter"})]})]})]})})]})}),(0,e.jsx)("div",{className:"flex-1 mb-10 overflow-x-scroll",children:(0,e.jsx)(be,{})})]}),(0,e.jsx)("div",{className:w("h-16 bg-secondary/70 backdrop-blur-md flex items-end overflow-x-auto px-4 mx-4","justify-center shadow-xl fixed bottom-0 left-0 right-0"),children:(0,e.jsx)(L,{children:at.map(({icon:i,label:m,url:pe},P)=>{let f=typeof i=="function"?i:null;return(0,e.jsxs)(k,{children:[(0,e.jsx)(x,{asChild:!0,children:(0,e.jsx)(X,{to:`${pe}?tab=${v}`,className:"pl-2 pr-2",children:(0,e.jsx)(u,{variant:"ghost",className:w("w-full justify-start mb-4 whitespace-nowrap ",P===0&&"ml-5"),children:(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[f&&(0,e.jsx)(f,{}),(0,e.jsx)("span",{children:m})]})})})}),(0,e.jsx)(A,{children:(0,e.jsx)("p",{children:m})})]},P)})})})]})}function de({items:t,inferedCn:o,tab:a}){let s=n=>{let p=_e(n);return p?.icon?(0,e.jsx)(p.icon,{className:"mr-2 h-4 w-4"}):null};return(0,e.jsx)("div",{className:"space-y-2 p-2",children:t.map(n=>(0,e.jsx)(L,{children:(0,e.jsxs)(k,{children:[(0,e.jsx)(x,{asChild:!0,children:(0,e.jsx)(X,{to:`${n.url}?tab=${a}`,className:o&&o(n),children:(0,e.jsx)(u,{variant:"ghost",className:"w-full justify-start ",children:(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[s(n.url),(0,e.jsx)("span",{children:n.title})]})})})}),(0,e.jsx)(A,{side:"right",children:(0,e.jsx)("p",{children:n.title})})]})},n.title))})}function ut(){let t=ge();console.error("Error details:",t);let o,a,s=null;switch(he(t)?(s=t.status,o=`${t.status} ${t.statusText}`,a=t.data.message||"Une erreur inattendue s'est produite."):(o="Erreur Inattendue",a=t instanceof Error?t.message:"Une erreur inattendue s'est produite lors du chargement de la page."),s){case 403:o="403 Acc\xE8s Refus\xE9",a="Vous n'avez pas la permission d'acc\xE9der \xE0 cette ressource.";break;case 404:o="404 Page Introuvable",a="La ressource que vous cherchez n'existe pas ou a \xE9t\xE9 supprim\xE9e.";break;case 500:o="500 Erreur Interne du Serveur",a="Une erreur est survenue sur le serveur. L'\xE9quipe a \xE9t\xE9 inform\xE9e.";break;case 400:return console.warn("400 Mauvaise Requ\xEAte: ",a),null;default:break}return(0,e.jsx)("div",{className:"container mx-auto py-10",children:(0,e.jsxs)(Q,{className:"w-full max-w-md mx-auto",children:[(0,e.jsx)(Ne,{children:(0,e.jsxs)(Te,{className:"flex items-center text-destructive",children:[(0,e.jsx)(Ge,{className:"mr-2 h-5 w-5"}),o]})}),(0,e.jsx)(Le,{children:(0,e.jsx)("p",{className:"text-muted-foreground",children:a})}),(0,e.jsxs)(ke,{className:"flex justify-end space-x-2",children:[(0,e.jsx)(u,{asChild:!0,variant:"outline",children:(0,e.jsx)(we,{prefetch:"intent",to:"..",children:"Retour"})}),(0,e.jsx)(u,{onClick:()=>window.location.reload(),children:"R\xE9essayer"})]})]})})}export{ut as ErrorBoundary,et as default};
