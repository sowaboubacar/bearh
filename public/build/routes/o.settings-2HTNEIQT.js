import{a as H}from"/build/_shared/chunk-W7OEIS22.js";import{a as de,c as ue,d as pe,e as be,f as ge,g as xe,h as fe,i as Ce}from"/build/_shared/chunk-3QGBS752.js";import{a as G}from"/build/_shared/chunk-XDNDK56N.js";import{a as ne,b as re,c as j,d as F}from"/build/_shared/chunk-Z7S4CDT2.js";import"/build/_shared/chunk-UNOET767.js";import{a as k,b as ie,c as M,d as p,e as Y,f as o}from"/build/_shared/chunk-IEDNE26R.js";import{a as B,b as U,c as V,d as I,e as q}from"/build/_shared/chunk-NCY4KUS2.js";import"/build/_shared/chunk-Q6K63OHD.js";import"/build/_shared/chunk-KAUQO2FD.js";import"/build/_shared/chunk-7ZNTUDLC.js";import{a as Be}from"/build/_shared/chunk-6JFOYO3V.js";import{a as ce}from"/build/_shared/chunk-OFTXZR4P.js";import{a as z}from"/build/_shared/chunk-JBQJJPFB.js";import{b as d}from"/build/_shared/chunk-SS7AQOQ3.js";import{a as $,b as me,c as J}from"/build/_shared/chunk-2MHSPA7K.js";import{a as T}from"/build/_shared/chunk-WZRQ3RQI.js";import"/build/_shared/chunk-XNZ6DBKW.js";import"/build/_shared/chunk-YYMCCM4Y.js";import"/build/_shared/chunk-2BPW44Z6.js";import"/build/_shared/chunk-5KYGR3MA.js";import"/build/_shared/chunk-PGURRWG5.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as Pe}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as x,b as C,c as S,d as P,e as N}from"/build/_shared/chunk-G5A27C7O.js";import{h as E}from"/build/_shared/chunk-NVGVVEPD.js";import{X as le,aa as oe,t as ae,w as se}from"/build/_shared/chunk-PNJDYZ5P.js";import{p as ee,r as te}from"/build/_shared/chunk-GTSSQFHM.js";import{a as X,b as D}from"/build/_shared/chunk-BBTKOQ57.js";import{c as He,e as f}from"/build/_shared/chunk-UED2Q7CE.js";var ve=He((Xe,Ne)=>{Ne.exports={}});var L=f(X());var Ke=f(ve()),Qe=f(Be());var K=f(X());var v=f(D()),Ue=s=>({checkIn:"Pointage d'arriv\xE9e",checkOut:"Pointage de d\xE9part",breakStart:"D\xE9but de pause",breakEnd:"Fin de pause",permission:"Demande de permission",permissionApproved:"Permission approuv\xE9e",permissionRejected:"Permission rejet\xE9e",news:"Nouvelles",observation:"Observation",taskAssigned:"T\xE2che assign\xE9e",taskCompleted:"T\xE2che termin\xE9e",expenseRequest:"Demande de remboursement",expenseRequestApproved:"Remboursement approuv\xE9",expenseRequestRejected:"Remboursement rejet\xE9",guardTourUpdate:"Mise \xE0 jour du tour de garde",evaluateAnEmployee:"\xC9valuation d'un employ\xE9",addToOrUpdateDepartmentMemberships:"Mise \xE0 jour des membres du d\xE9partement",addToOrUpdateTeamMemberships:"Mise \xE0 jour des membres de l'\xE9quipe",addToOrUpdatePositionMemberships:"Mise \xE0 jour des postes",addToOrUpdateHourGroupMemberships:"Mise \xE0 jour des groupes horaires",accessControlUpdate:"Mise \xE0 jour du contr\xF4le d'acc\xE8s",accessControlAssignedToUser:"Contr\xF4le d'acc\xE8s assign\xE9 \xE0 un utilisateur",accessControlAssignedToPosition:"Contr\xF4le d'acc\xE8s assign\xE9 \xE0 un poste"})[s]||s;function he({notifications:s,users:n,onUpdate:m}){let[u,b]=(0,K.useState)(s);(0,K.useEffect)(()=>{b(s)},[s]);let w=(a,i)=>{let r={...u},A=r[a].recipients,R=A.indexOf(i);R>-1?A.splice(R,1):A.push(i),b(r),m(r)},g=(a,i)=>a.recipients.includes(i.id);return(0,v.jsxs)(x,{className:"space-y-8 max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,v.jsxs)(C,{className:"p-4 sm:p-6",children:[(0,v.jsx)(S,{className:"text-2xl sm:text-3xl font-bold",children:"Param\xE8tres de Notification"}),(0,v.jsx)(P,{className:"text-base mt-2",children:"Configurez qui re\xE7oit des notifications pour divers \xE9v\xE9nements."})]}),(0,v.jsx)(N,{className:"p-4 sm:p-6 space-y-6",children:Object.entries(u).map(([a,i])=>(0,v.jsxs)("div",{className:"space-y-3",children:[(0,v.jsx)(d,{className:"text-base font-medium",children:Ue(a)}),(0,v.jsx)(x,{className:"shadow-none border",children:(0,v.jsx)(G,{className:"h-[300px] w-full rounded-md",children:(0,v.jsx)("div",{className:"p-4",children:n.map(r=>(0,v.jsxs)("div",{className:"flex items-center space-x-3 py-3 border-b last:border-0",children:[(0,v.jsx)(z,{id:`${a}-${r.id}`,checked:g(i,r),onCheckedChange:()=>w(a,r.id),className:"h-5 w-5"}),(0,v.jsxs)("label",{htmlFor:`${a}-${r.id}`,className:"text-base font-medium cursor-pointer",children:[r.firstName," ",r.lastName]})]},r.id))})})})]},a))})]})}var Te=f(X());var c=f(D()),Ve=[{value:"daily",label:"Quotidien"},{value:"weekly",label:"Hebdomadaire"},{value:"monthly",label:"Mensuel"},{value:"quarterly",label:"Trimestriel"},{value:"semi-annually",label:"Semestriel"},{value:"annually",label:"Annuel"}];function ye({bonusCalculation:s,onUpdate:n}){let[m,u]=(0,Te.useState)(s),b=g=>{let{name:a,value:i}=g.target,r={...m,[a]:i};u(r),n(r)},w=g=>{let a={...m,frequency:g};u(a),n(a)};return(0,c.jsxs)(x,{className:"space-y-8 max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,c.jsxs)(C,{className:"p-4 sm:p-6",children:[(0,c.jsx)(S,{className:"text-2xl sm:text-3xl font-bold",children:"Param\xE8tres de Calcul des Primes"}),(0,c.jsx)(P,{className:"text-base mt-2",children:"Configurez la fr\xE9quence et le moment du calcul des primes."})]}),(0,c.jsxs)(N,{className:"p-4 sm:p-6 space-y-6",children:[(0,c.jsxs)("div",{className:"space-y-3",children:[(0,c.jsx)(d,{htmlFor:"frequency",className:"text-base font-medium",children:"Fr\xE9quence"}),(0,c.jsxs)(B,{name:"frequency",value:m.frequency,onValueChange:w,children:[(0,c.jsx)(V,{className:"h-12 text-base",children:(0,c.jsx)(U,{placeholder:"S\xE9lectionnez la fr\xE9quence"})}),(0,c.jsx)(I,{children:Ve.map(g=>(0,c.jsx)(q,{value:g.value,className:"text-base",children:g.label},g.value))})]})]}),(0,c.jsxs)("div",{className:"space-y-3",children:[(0,c.jsx)(d,{htmlFor:"executionDay",className:"text-base font-medium",children:"Jour d'Ex\xE9cution"}),(0,c.jsx)(T,{id:"executionDay",name:"executionDay",type:"number",min:"1",max:28,value:m.executionDay,onChange:b,className:"h-12 text-base"})]}),(0,c.jsxs)("div",{className:"space-y-3",children:[(0,c.jsx)(d,{htmlFor:"executionTime",className:"text-base font-medium",children:"Heure d'Ex\xE9cution"}),(0,c.jsx)(T,{id:"executionTime",name:"executionTime",type:"time",value:m.executionTime,onChange:b,className:"h-12 text-base"})]}),(0,c.jsxs)("div",{className:"space-y-3",children:[(0,c.jsx)(d,{className:"text-base font-medium",children:"Prochaine Ex\xE9cution"}),(0,c.jsx)(T,{value:new Date(m.nextExecutionDate).toLocaleString("fr-FR"),disabled:!0,className:"h-12 text-base bg-muted"})]}),(0,c.jsxs)("div",{className:"space-y-3",children:[(0,c.jsx)(d,{className:"text-base font-medium",children:"Derni\xE8re Ex\xE9cution"}),(0,c.jsx)(T,{value:new Date(m.lastExecutionDate).toLocaleString("fr-FR"),disabled:!0,className:"h-12 text-base bg-muted"})]})]})]})}var e=f(D()),Ie=s=>({checkIn:"Pointage d'arriv\xE9e",checkOut:"Pointage de d\xE9part",breakStart:"D\xE9but de pause",breakEnd:"Fin de pause",permission:"Demande de permission",permissionApproved:"Permission approuv\xE9e",permissionRejected:"Permission rejet\xE9e",news:"Nouvelles",observation:"Observation",taskAssigned:"T\xE2che assign\xE9e",taskCompleted:"T\xE2che termin\xE9e",expenseRequest:"Demande de remboursement",expenseRequestApproved:"Remboursement approuv\xE9",expenseRequestRejected:"Remboursement rejet\xE9",guardTourUpdate:"Mise \xE0 jour du tour de garde",evaluateAnEmployee:"\xC9valuation d'un employ\xE9",addToOrUpdateDepartmentMemberships:"Mise \xE0 jour des membres du d\xE9partement",addToOrUpdateTeamMemberships:"Mise \xE0 jour des membres de l'\xE9quipe",addToOrUpdatePositionMemberships:"Mise \xE0 jour des postes",addToOrUpdateHourGroupMemberships:"Mise \xE0 jour des groupes horaires",accessControlUpdate:"Mise \xE0 jour du contr\xF4le d'acc\xE8s",accessControlAssignedToUser:"Contr\xF4le d'acc\xE8s assign\xE9 \xE0 un utilisateur",accessControlAssignedToPosition:"Contr\xF4le d'acc\xE8s assign\xE9 \xE0 un poste"})[s]||s,$e=s=>({positiveObservation:"Observation positive",negativeObservation:"Observation n\xE9gative",tasksCompleted:"T\xE2ches termin\xE9es",kpiAverageScore:"Score moyen KPI",workingHours:"Heures travaill\xE9es",breakHours:"Heures de pause",lateDays:"Jours de retard",absentDays:"Jours d'absence"})[s]||s,Je=s=>({voters:"Votants",news:"Nouvelles",winner:"Gagnant",loser:"Perdant",others:"Autres"})[s]||s,ze=s=>({daily:"Quotidien",weekly:"Hebdomadaire",monthly:"Mensuel",quarterly:"Trimestriel","semi-annually":"Semestriel",annually:"Annuel"})[s]||s;function we({config:s}){return(0,e.jsxs)("div",{className:"space-y-6 sm:space-y-8",children:[(0,e.jsxs)(x,{children:[(0,e.jsx)(C,{className:"p-4 sm:p-6",children:(0,e.jsx)(S,{className:"text-2xl sm:text-3xl font-bold",children:"Param\xE8tres de Notification"})}),(0,e.jsx)(N,{className:"p-4 sm:p-6",children:(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)(k,{children:[(0,e.jsx)(ie,{children:(0,e.jsxs)(p,{children:[(0,e.jsx)(Y,{className:"text-base whitespace-nowrap",children:"Type de Notification"}),(0,e.jsx)(Y,{className:"text-base",children:"Destinataires"})]})}),(0,e.jsx)(M,{children:Object.entries(s.settings.notifications).map(([n,m])=>(0,e.jsxs)(p,{children:[(0,e.jsx)(o,{className:"text-base font-medium whitespace-nowrap",children:Ie(n)}),(0,e.jsx)(o,{className:"min-w-[200px]",children:(0,e.jsx)("div",{className:"flex flex-wrap gap-2",children:m.recipients.length>0?m.recipients.map((u,b)=>(0,e.jsx)(ce,{variant:"secondary",className:"text-base px-3 py-1",children:u.email},b)):(0,e.jsx)("span",{className:"text-base text-muted-foreground",children:"Aucun"})})})]},n))})]})})})]}),(0,e.jsxs)(x,{children:[(0,e.jsx)(C,{className:"p-4 sm:p-6",children:(0,e.jsx)(S,{className:"text-2xl sm:text-3xl font-bold",children:"Param\xE8tres de Calcul des Primes"})}),(0,e.jsx)(N,{className:"p-4 sm:p-6",children:(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsx)(k,{children:(0,e.jsxs)(M,{children:[(0,e.jsxs)(p,{children:[(0,e.jsx)(o,{className:"text-base font-medium whitespace-nowrap",children:"Fr\xE9quence"}),(0,e.jsx)(o,{className:"text-base",children:ze(s.settings.bonusCalculation.frequency)})]}),(0,e.jsxs)(p,{children:[(0,e.jsx)(o,{className:"text-base font-medium whitespace-nowrap",children:"Jour d'Ex\xE9cution"}),(0,e.jsx)(o,{className:"text-base",children:s.settings.bonusCalculation.executionDay})]}),(0,e.jsxs)(p,{children:[(0,e.jsx)(o,{className:"text-base font-medium whitespace-nowrap",children:"Heure d'Ex\xE9cution"}),(0,e.jsx)(o,{className:"text-base",children:s.settings.bonusCalculation.executionTime})]}),(0,e.jsxs)(p,{children:[(0,e.jsx)(o,{className:"text-base font-medium whitespace-nowrap",children:"Prochaine Ex\xE9cution"}),(0,e.jsx)(o,{className:"text-base",children:new Date(s.settings.bonusCalculation.nextExecutionDate).toLocaleString("fr-FR")})]}),(0,e.jsxs)(p,{children:[(0,e.jsx)(o,{className:"text-base font-medium whitespace-nowrap",children:"Derni\xE8re Ex\xE9cution"}),(0,e.jsx)(o,{className:"text-base",children:new Date(s.settings.bonusCalculation.lastExecutionDate).toLocaleString("fr-FR")})]})]})})})})]}),(0,e.jsxs)(x,{children:[(0,e.jsx)(C,{className:"p-4 sm:p-6",children:(0,e.jsx)(S,{className:"text-2xl sm:text-3xl font-bold",children:"Param\xE8tres de Localisation"})}),(0,e.jsx)(N,{className:"p-4 sm:p-6",children:(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsx)(k,{children:(0,e.jsxs)(M,{children:[(0,e.jsxs)(p,{children:[(0,e.jsx)(o,{className:"text-base font-medium whitespace-nowrap",children:"Latitude"}),(0,e.jsx)(o,{className:"text-base",children:s.settings.location?.latitude||"Non d\xE9fini"})]}),(0,e.jsxs)(p,{children:[(0,e.jsx)(o,{className:"text-base font-medium whitespace-nowrap",children:"Longitude"}),(0,e.jsx)(o,{className:"text-base",children:s.settings.location?.longitude||"Non d\xE9fini"})]}),(0,e.jsxs)(p,{children:[(0,e.jsx)(o,{className:"text-base font-medium whitespace-nowrap",children:"Rayon (m\xE8tres)"}),(0,e.jsx)(o,{className:"text-base",children:s.settings.location?.radius||"Non d\xE9fini"})]})]})})})})]}),(0,e.jsxs)(x,{children:[(0,e.jsx)(C,{className:"p-4 sm:p-6",children:(0,e.jsx)(S,{className:"text-2xl sm:text-3xl font-bold",children:"Param\xE8tres de l'Employ\xE9 du Mois"})}),(0,e.jsxs)(N,{className:"p-4 sm:p-6",children:[(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsx)(k,{children:(0,e.jsxs)(M,{children:[(0,e.jsxs)(p,{children:[(0,e.jsx)(o,{className:"text-base font-medium whitespace-nowrap",children:"Vote en cours"}),(0,e.jsx)(o,{className:"text-base",children:s.settings.employeeOfTheMonth.isVoteOngoing?"Oui":"Non"})]}),(0,e.jsxs)(p,{children:[(0,e.jsx)(o,{className:"text-base font-medium whitespace-nowrap",children:"Mode de s\xE9lection"}),(0,e.jsx)(o,{className:"text-base",children:s.settings.employeeOfTheMonth.selection.mode==="automatic"?"Automatique":s.settings.employeeOfTheMonth.selection.mode==="manual"?"Manuel":"Mixte"})]}),(0,e.jsxs)(p,{children:[(0,e.jsx)(o,{className:"text-base font-medium whitespace-nowrap",children:"Dur\xE9e du vote (heures)"}),(0,e.jsx)(o,{className:"text-base",children:s.settings.employeeOfTheMonth.selection.voteDuration})]}),(0,e.jsxs)(p,{children:[(0,e.jsx)(o,{className:"text-base font-medium whitespace-nowrap",children:"Jour de s\xE9lection automatique"}),(0,e.jsx)(o,{className:"text-base",children:s.settings.employeeOfTheMonth.selection.automaticSelectionAndVoteStartDay})]}),(0,e.jsxs)(p,{children:[(0,e.jsx)(o,{className:"text-base font-medium whitespace-nowrap",children:"Afficher les votes"}),(0,e.jsx)(o,{className:"text-base",children:s.settings.employeeOfTheMonth.display.showVotes?"Oui":"Non"})]}),(0,e.jsxs)(p,{children:[(0,e.jsx)(o,{className:"text-base font-medium whitespace-nowrap",children:"Afficher les m\xE9triques"}),(0,e.jsx)(o,{className:"text-base",children:s.settings.employeeOfTheMonth.display.showMetrics?"Oui":"Non"})]})]})})}),(0,e.jsxs)("div",{className:"mt-4",children:[(0,e.jsx)("h4",{className:"text-lg font-medium mb-2",children:"Poids des m\xE9triques"}),(0,e.jsx)(k,{children:(0,e.jsx)(M,{children:Object.entries(s.settings.employeeOfTheMonth.metricsWeights).map(([n,m])=>(0,e.jsxs)(p,{children:[(0,e.jsx)(o,{className:"text-base font-medium whitespace-nowrap",children:$e(n)}),(0,e.jsx)(o,{className:"text-base",children:m})]},n))})})]}),(0,e.jsxs)("div",{className:"mt-4",children:[(0,e.jsx)("h4",{className:"text-lg font-medium mb-2",children:"Param\xE8tres de notification"}),(0,e.jsx)(k,{children:(0,e.jsx)(M,{children:Object.entries(s.settings.employeeOfTheMonth.notifications).map(([n,m])=>(0,e.jsxs)(p,{children:[(0,e.jsx)(o,{className:"text-base font-medium whitespace-nowrap",children:Je(n)}),(0,e.jsxs)(o,{className:"text-base",children:[m.enabled?"Activ\xE9":"D\xE9sactiv\xE9",m.template&&(0,e.jsxs)("div",{className:"mt-1 text-sm text-muted-foreground",children:["Mod\xE8le : ",m.template]})]})]},n))})}),(0,e.jsx)("h4",{className:"text-lg font-medium mb-2",children:"Liste des votants"}),(0,e.jsx)(k,{children:(0,e.jsx)(M,{children:s.settings.employeeOfTheMonth?.notifications?.voters?.votersList?.map(n=>(0,e.jsxs)(p,{children:[(0,e.jsx)(o,{className:"text-base font-medium whitespace-nowrap",children:n.email}),(0,e.jsxs)(o,{className:"text-base",children:[n.firstName||""," ",n.lastName||""]})]},n.id))})})]})]})]})]})}var We=f(Pe());var t=f(D()),Ge=s=>({positiveObservation:"Observation positive",negativeObservation:"Observation n\xE9gative",tasksCompleted:"T\xE2ches termin\xE9es",kpiAverageScore:"Score moyen KPI",workingHours:"Heures travaill\xE9es",breakHours:"Heures de pause",lateDays:"Jours de retard",absentDays:"Jours d'absence"})[s]||s;function De({employeeOfTheMonth:s,users:n,onUpdate:m}){let u=(a,i)=>{m({...s,[a]:i})},b=(a,i,r)=>{m({...s,[a]:{...s[a],[i]:r}})},w=a=>{let i={...s},r=i.notifications.voters.votersList,A=r.indexOf(a);A>-1?r.splice(A,1):r.push(a),m(i)},g=a=>s.notifications.voters.votersList.some(i=>i.id===a.id||i===a.id);return(0,t.jsxs)("div",{className:"space-y-8 max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)(x,{children:[(0,t.jsx)(C,{children:(0,t.jsx)("h3",{className:"text-2xl font-semibold",children:"Param\xE8tres g\xE9n\xE9raux"})}),(0,t.jsx)(N,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(d,{htmlFor:"isVoteOngoing",className:"text-lg",children:"Vote en cours"}),(0,t.jsx)(H,{id:"isVoteOngoing",checked:s.isVoteOngoing,disabled:!0,onCheckedChange:a=>u("isVoteOngoing",a)})]})})]}),(0,t.jsxs)(x,{children:[(0,t.jsx)(C,{children:(0,t.jsx)("h3",{className:"text-2xl font-semibold",children:"Param\xE8tres de s\xE9lection"})}),(0,t.jsxs)(N,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid w-full items-center gap-2",children:[(0,t.jsx)(d,{htmlFor:"selectionMode",className:"text-lg",children:"Mode de s\xE9lection"}),(0,t.jsxs)(B,{value:s.selection.mode,onValueChange:a=>b("selection","mode",a),children:[(0,t.jsx)(V,{id:"selectionMode",children:(0,t.jsx)(U,{placeholder:"S\xE9lectionner le mode"})}),(0,t.jsxs)(I,{children:[(0,t.jsx)(q,{value:"automatic",children:"Automatique"}),(0,t.jsx)(q,{value:"manual",children:"Manuel"}),(0,t.jsx)(q,{value:"mixed",children:"Mixte"})]})]})]}),(0,t.jsxs)("div",{className:"grid w-full items-center gap-2",children:[(0,t.jsxs)(d,{htmlFor:"voteDuration",className:"text-lg",children:["Dur\xE9e du vote (heures).",(0,t.jsx)("small",{className:"text-sm text-primary",children:"Nomination pour chaque 28 du mois \xE0 02h00 du matin"})]}),(0,t.jsx)(T,{type:"number",id:"voteDuration",disabled:!0,value:s.selection.voteDuration,onChange:a=>b("selection","voteDuration",Number(a.target.value))})]}),(0,t.jsxs)("div",{className:"grid w-full items-center gap-2",children:[(0,t.jsxs)(d,{htmlFor:"automaticSelectionDay",className:"text-lg",children:["Jour de s\xE9lection automatique",(0,t.jsxs)("small",{className:"text-sm text-primary",children:[" ","Les votes si applicables, demarrent ce m\xEAme jour"]})]}),(0,t.jsx)(T,{type:"number",id:"automaticSelectionDay",disabled:!0,value:s.selection.automaticSelectionAndVoteStartDay,onChange:a=>b("selection","automaticSelectionAndVoteStartDay",Number(a.target.value))})]})]})]}),(0,t.jsxs)(x,{children:[(0,t.jsx)(C,{children:(0,t.jsx)("h3",{className:"text-2xl font-semibold",children:"Param\xE8tres d'affichage"})}),(0,t.jsxs)(N,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(d,{htmlFor:"showVotes",className:"text-lg",children:"Afficher les votes"}),(0,t.jsx)(H,{id:"showVotes",checked:s.display.showVotes,onCheckedChange:a=>b("display","showVotes",a)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(d,{htmlFor:"showMetrics",className:"text-lg",children:"Afficher les m\xE9triques"}),(0,t.jsx)(H,{id:"showMetrics",checked:s.display.showMetrics,onCheckedChange:a=>b("display","showMetrics",a)})]})]})]}),(0,t.jsxs)(x,{children:[(0,t.jsxs)(C,{children:[(0,t.jsx)("h3",{className:"text-2xl font-semibold",children:"Poids des m\xE9triques"}),(0,t.jsx)("small",{className:"text-sm text-primary",children:"Ces m\xE9triques sont utilis\xE9 pour calculter une note finale qui est utilis\xE9 pour le classement. Pour s\xE9lectionner les 5 meilleurs employ\xE9s qui pourront subir un vote ou \xEAtre automatiquement s\xE9lectionn\xE9."})]}),(0,t.jsx)(N,{className:"grid gap-4 sm:grid-cols-2",children:Object.entries(s.metricsWeights).map(([a,i])=>(0,t.jsxs)("div",{className:"grid w-full items-center gap-2",children:[(0,t.jsx)(d,{htmlFor:a,className:"text-lg",children:Ge(a)}),(0,t.jsx)(T,{type:"number",id:a,value:i,onChange:r=>b("metricsWeights",a,Number(r.target.value))})]},a))})]}),(0,t.jsxs)(x,{children:[(0,t.jsx)(C,{children:(0,t.jsx)("h3",{className:"text-2xl font-semibold",children:"Param\xE8tres de notification"})}),(0,t.jsx)(N,{className:"space-y-6",children:Object.entries(s.notifications).map(([a,i])=>(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h4",{className:"text-xl font-medium capitalize",children:["Notifications ",a]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(d,{htmlFor:`${a}Enabled`,className:"text-lg",children:"Activ\xE9"}),(0,t.jsx)(H,{id:`${a}Enabled`,checked:i.enabled,onCheckedChange:r=>b("notifications",a,{...i,enabled:r})})]}),i.template&&(0,t.jsxs)("div",{className:"grid w-full items-center gap-2",children:[(0,t.jsx)(d,{htmlFor:`${a}Template`,className:"text-lg",children:"Mod\xE8le"}),(0,t.jsx)(T,{type:"text",id:`${a}Template`,value:i.template,onChange:r=>b("notifications",a,{...i,template:r.target.value})})]})]},a))})]}),(0,t.jsxs)(x,{className:"",children:[(0,t.jsx)(C,{children:(0,t.jsx)("h3",{className:"text-2xl font-semibold",children:"Qui peut v\xF4ter"})}),(0,t.jsx)(G,{className:"h-[300px] w-full rounded-md",children:(0,t.jsx)("div",{className:"p-4",children:n.map((a,i)=>(0,t.jsxs)("div",{className:"flex items-center space-x-3 py-3 border-b last:border-0",children:[(0,t.jsx)(z,{id:`${i}-${a.id}`,checked:g(a),onCheckedChange:()=>w(a.id),className:"h-5 w-5"}),(0,t.jsxs)("label",{htmlFor:`${i}-${a.id}`,className:"text-base font-medium cursor-pointer",children:[a.firstName," ",a.lastName]})]},a.id))})})]})]})}var l=f(D());function Se(){let{config:s,users:n,can:m}=ee(),u=te(),[b,w]=(0,L.useState)(!1),[g,a]=(0,L.useState)(s),[i,r]=(0,L.useState)(null),[A,R]=(0,L.useState)(!1);(0,L.useEffect)(()=>{u.state==="idle"&&u.data&&(w(!1),u.data.success?r({message:"Configuration mise \xE0 jour avec succ\xE8s.",type:"success"}):r({message:`Erreur lors de la mise \xE0 jour: ${u.data.error}`,type:"error"}))},[u.state,u.data]);let Ae=y=>{a(h=>({...h,settings:{...h.settings,notifications:y}}))},ke=y=>{a(h=>({...h,settings:{...h.settings,bonusCalculation:y}}))},Me=y=>{a(h=>({...h,settings:{...h.settings,location:y}}))},Le=y=>{a(h=>({...h,settings:{...h.settings,employeeOfTheMonth:y}}))},Re=()=>{R(!0)},Oe=()=>{R(!1),u.submit({config:JSON.stringify(g)},{method:"post"})},Z=()=>(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-3 sm:gap-4 my-6",children:[(0,l.jsx)(E,{onClick:()=>w(!1),variant:"outline",className:"w-full sm:w-auto h-12 text-base",children:"Annuler"}),(0,l.jsx)(E,{onClick:Re,disabled:u.state==="submitting",className:"w-full sm:w-auto h-12 text-base",children:u.state==="submitting"?(0,l.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,l.jsx)(le,{className:"h-5 w-5 animate-spin"}),"Enregistrement..."]}):"Enregistrer"})]}),Ee=({location:y,onUpdate:h})=>{let[_,Q]=(0,L.useState)(null),W=O=>{let{name:je,value:Fe}=O.target;h({...y,[je]:Fe})},qe=()=>{"geolocation"in navigator?navigator.geolocation.getCurrentPosition(O=>{h({...y,latitude:O.coords.latitude.toFixed(6),longitude:O.coords.longitude.toFixed(6)}),Q(null)},O=>{console.error("Error getting location:",O),Q("Impossible d'obtenir la localisation. Veuillez v\xE9rifier vos param\xE8tres de g\xE9olocalisation.")}):Q("La g\xE9olocalisation n'est pas support\xE9e par votre navigateur.")};return(0,l.jsxs)("div",{className:"space-y-8 max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,l.jsx)($,{variant:"destructive",children:(0,l.jsx)(J,{children:"Attention : La localisation doit \xEAtre celle de la pharmacie, pas votre position actuelle."})}),(0,l.jsxs)("div",{className:"grid w-full items-center gap-1.5",children:[(0,l.jsx)(d,{htmlFor:"latitude",children:"Latitude"}),(0,l.jsx)(T,{type:"number",id:"latitude",name:"latitude",value:y.latitude,onChange:W,step:"any"})]}),(0,l.jsxs)("div",{className:"grid w-full items-center gap-1.5",children:[(0,l.jsx)(d,{htmlFor:"longitude",children:"Longitude"}),(0,l.jsx)(T,{type:"number",id:"longitude",name:"longitude",value:y.longitude,onChange:W,step:"any"})]}),(0,l.jsxs)("div",{className:"grid w-full items-center gap-1.5",children:[(0,l.jsx)(d,{htmlFor:"radius",children:"Rayon (m\xE8tres)"}),(0,l.jsx)(T,{type:"number",id:"radius",name:"radius",value:y.radius,onChange:W})]}),(0,l.jsxs)(E,{onClick:qe,className:"w-full sm:w-auto",children:[(0,l.jsx)(oe,{className:"mr-2 h-4 w-4"})," Utiliser ma position actuelle"]}),_&&(0,l.jsx)($,{variant:"destructive",children:(0,l.jsx)(J,{children:_})})]})};return(0,l.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[(0,l.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold mb-6",children:"Configuration du Syst\xE8me"}),i&&(0,l.jsxs)($,{variant:i.type==="success"?"default":"destructive",className:"mb-6",children:[i.type==="success"?(0,l.jsx)(se,{className:"h-5 w-5"}):(0,l.jsx)(ae,{className:"h-5 w-5"}),(0,l.jsx)(me,{className:"text-base font-medium",children:i.type==="success"?"Succ\xE8s":"Erreur"}),(0,l.jsx)(J,{className:"text-base",children:i.message})]}),b?(0,l.jsxs)(l.Fragment,{children:[m?.edit&&(0,l.jsx)(Z,{}),(0,l.jsxs)(ne,{defaultValue:"notifications",className:"space-y-6",children:[(0,l.jsxs)(re,{className:"grid w-full grid-cols-4 h-12",children:[(0,l.jsx)(j,{value:"notifications",className:"text-base data-[state=active]:text-base",children:"Notif."}),(0,l.jsx)(j,{value:"bonus",className:"text-base data-[state=active]:text-base",children:"Primes"}),(0,l.jsx)(j,{value:"location",className:"text-base data-[state=active]:text-base",children:"Lieux"}),(0,l.jsx)(j,{value:"employeeOfTheMonth",className:"text-base data-[state=active]:text-base",children:"Empl. du Mois"})]}),(0,l.jsx)(F,{value:"notifications",className:"space-y-6",children:(0,l.jsx)(he,{notifications:g.settings.notifications,users:n,onUpdate:Ae})}),(0,l.jsx)(F,{value:"bonus",className:"space-y-6",children:(0,l.jsx)(ye,{bonusCalculation:g.settings.bonusCalculation,onUpdate:ke})}),(0,l.jsx)(F,{value:"location",className:"space-y-6",children:(0,l.jsx)(Ee,{location:g.settings.location||{latitude:"",longitude:"",radius:100},onUpdate:Me})}),(0,l.jsx)(F,{value:"employeeOfTheMonth",className:"space-y-6",children:(0,l.jsx)(De,{employeeOfTheMonth:g.settings.employeeOfTheMonth,users:n,onUpdate:Le})})]}),(0,l.jsx)(Z,{})]}):(0,l.jsxs)("div",{className:"space-y-8",children:[m?.edit&&(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsx)(E,{onClick:()=>w(!0),disabled:u.state==="submitting"||s.isBlocked,className:"w-full sm:w-auto h-12 text-base",children:s.isBlocked?"Edition bloqu\xE9e par le syst\xE8me":"Modifier la Configuration"})}),(0,l.jsx)(we,{config:s}),m?.edit&&(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)(E,{onClick:()=>w(!0),disabled:u.state==="submitting"||s.isBlocked,className:"w-full sm:w-auto h-12 text-base",children:s.isBlocked?"Edition bloqu\xE9e par le syst\xE8me":"Modifier la Configuration"})})]}),(0,l.jsx)(de,{open:A,onOpenChange:R,children:(0,l.jsxs)(ue,{className:"sm:max-w-[425px]",children:[(0,l.jsxs)(pe,{children:[(0,l.jsx)(ge,{className:"text-xl",children:"Confirmer les modifications"}),(0,l.jsx)(xe,{className:"text-base",children:"\xCAtes-vous s\xFBr de vouloir enregistrer ces modifications ? Cette action mettra \xE0 jour la configuration du syst\xE8me."})]}),(0,l.jsxs)(be,{className:"gap-3 sm:gap-0",children:[(0,l.jsx)(Ce,{className:"h-12 text-base",children:"Annuler"}),(0,l.jsx)(fe,{onClick:Oe,className:"h-12 text-base",children:"Confirmer"})]})]})})]})}export{Se as default};
