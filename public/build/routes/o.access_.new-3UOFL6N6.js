import{a as I}from"/build/_shared/chunk-YWUCPBEQ.js";import{a as D}from"/build/_shared/chunk-L2TBXS32.js";import{b as m}from"/build/_shared/chunk-SS7AQOQ3.js";import{a as j,b as O,c as T}from"/build/_shared/chunk-2MHSPA7K.js";import{a as F}from"/build/_shared/chunk-WZRQ3RQI.js";import{a as W}from"/build/_shared/chunk-35S5HMBT.js";import"/build/_shared/chunk-OMO5CWS2.js";import{a as n}from"/build/_shared/chunk-PVX4NJUU.js";import{a as R}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as w,b as k,c as y,e as A}from"/build/_shared/chunk-G5A27C7O.js";import{h as u}from"/build/_shared/chunk-NVGVVEPD.js";import{Ga as L,X as P,o as C,q as $}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as b,k as g,l as f,q as v}from"/build/_shared/chunk-GTSSQFHM.js";import{a as M,b as N}from"/build/_shared/chunk-BBTKOQ57.js";import{e as i}from"/build/_shared/chunk-UED2Q7CE.js";var x=i(M());var z=i(W());var G=i(I()),J=i(R());var e=i(N());function B(){let c=v(),S=b(),[l,E]=(0,x.useState)(null),[o,h]=(0,x.useState)({}),p=S.state==="submitting",U=(s,r)=>{h(a=>{let t=a[s]?.includes(r)?a[s]?.filter(d=>d!==r):[...a[s]||[],r];return{...a,[s]:t}})},q=s=>{h(r=>{let a=Object.keys(n[s].actions),t=r[s]?.length===a.length?[]:a;return{...r,[s]:t}})},H=s=>{E(l===s?null:s)};return(0,e.jsxs)("div",{className:"w-full max-w-8xl mx-auto p-4 sm:p-6 lg:p-8",children:[(0,e.jsx)(u,{asChild:!0,variant:"outline",className:"mb-4 h-10 text-sm sm:h-11 sm:text-base",children:(0,e.jsxs)(g,{prefetch:"intent",to:"/o/access",children:[(0,e.jsx)($,{className:"mr-2 h-4 w-4 sm:h-5 sm:w-5"}),"Retour \xE0 la liste"]})}),(0,e.jsxs)(w,{className:"bg-white border border-gray-200 rounded-xl shadow-sm dark:bg-slate-900 dark:border-gray-700",children:[(0,e.jsx)(k,{className:"p-4 sm:p-6 lg:p-8",children:(0,e.jsx)(y,{className:"text-center text-2xl sm:text-3xl font-bold text-gray-800 dark:text-white",children:"Ajouter un nouvel acc\xE8s"})}),(0,e.jsx)(A,{className:"p-4 sm:p-6 lg:p-8",children:(0,e.jsxs)(f,{method:"post",className:"space-y-4 sm:space-y-6",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(m,{htmlFor:"name",className:"text-sm sm:text-base font-medium",children:"Nom de l'acc\xE8s"}),(0,e.jsx)(F,{type:"text",id:"name",name:"name",required:!0,className:"mt-1.5 h-10 text-sm sm:h-11 sm:text-base"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(m,{htmlFor:"description",className:"text-sm sm:text-base font-medium",children:"Description"}),(0,e.jsx)(D,{id:"description",name:"description",rows:3,className:"mt-1.5 text-sm sm:text-base"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(m,{className:"text-sm sm:text-base font-medium",children:"Permissions"}),(0,e.jsx)("div",{className:"hs-accordion-group mt-3",children:Object.entries(n).map(([s,{label:r,actions:a}])=>(0,e.jsxs)("div",{className:"hs-accordion border-b border-gray-200 dark:border-gray-700",children:[(0,e.jsxs)("button",{type:"button",className:"hs-accordion-toggle hs-accordion-active:text-blue-600 inline-flex items-center gap-x-3 w-full font-semibold text-left text-gray-800 transition py-4 px-4 sm:px-5 hover:text-gray-500 dark:hs-accordion-active:text-blue-500 dark:text-gray-200 dark:hover:text-gray-400 text-sm sm:text-base","aria-controls":`accordion-${s}`,onClick:()=>H(s),children:[(0,e.jsx)("svg",{className:`w-4 h-4 text-gray-600 group-hover:text-gray-500 dark:text-gray-400 ${l===s?"rotate-180":""}`,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,e.jsx)("path",{d:"M2 5L8.16086 10.6869C8.35239 10.8637 8.64761 10.8637 8.83914 10.6869L15 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}),r,(0,e.jsx)("button",{type:"button",className:"ml-auto text-xs bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-1 px-2 rounded",onClick:t=>{t.stopPropagation(),q(s)},children:o[s]?.length===Object.keys(n[s].actions).length?"D\xE9chocher tous":"Cocher Tous"})]}),(0,e.jsx)("div",{id:`accordion-${s}`,className:`hs-accordion-content w-full overflow-hidden transition-[height] duration-300 ${l===s?"":"hidden"}`,children:(0,e.jsx)("div",{className:"p-4 sm:p-5",children:(0,e.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:Object.entries(a).map(([t,d])=>(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)("input",{type:"checkbox",id:`${s}-${t}`,name:`${s}-${t}`,checked:o[s]?.includes(t),onChange:()=>U(s,t),className:"sr-only"}),(0,e.jsx)("div",{className:`w-5 h-5 sm:w-6 sm:h-6 border-2 rounded-full transition-colors ${o[s]?.includes(t)?"bg-blue-600 border-blue-600":"border-gray-300 dark:border-gray-600"}`,children:o[s]?.includes(t)&&(0,e.jsx)(C,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})})]}),(0,e.jsx)("label",{htmlFor:`${s}-${t}`,className:"ml-3 text-sm sm:text-base text-gray-700 dark:text-gray-300 cursor-pointer",children:d})]},t))})})})]},s))})]}),c?.message&&!c.success&&(0,e.jsxs)(j,{variant:"destructive",children:[(0,e.jsx)(L,{className:"h-4 w-4 sm:h-5 sm:w-5"}),(0,e.jsx)(O,{className:"text-sm sm:text-base",children:"Erreur"}),(0,e.jsx)(T,{className:"text-sm sm:text-base",children:c.message})]}),(0,e.jsx)(u,{type:"submit",className:"w-full h-10 text-sm sm:h-11 sm:text-base",disabled:p,children:p?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(P,{className:"mr-2 h-4 w-4 sm:h-5 sm:w-5 animate-spin"}),"Cr\xE9ation en cours..."]}):"Cr\xE9er l'acc\xE8s"})]})})]})]})}export{B as default};
