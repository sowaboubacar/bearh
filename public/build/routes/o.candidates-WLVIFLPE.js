import{a as f}from"/build/_shared/chunk-6QXFNV75.js";import{a as Ce}from"/build/_shared/chunk-34UDL6WH.js";import{a as ee,b as te,c as ae,d as se,e as le,f as ie,g as oe,h as re,i as ne}from"/build/_shared/chunk-3QGBS752.js";import{a as O,b as J}from"/build/_shared/chunk-ABDDDOIB.js";import{a as V,b as G,c as q,d as b,e as i,f as o}from"/build/_shared/chunk-IEDNE26R.js";import"/build/_shared/chunk-M3TRH43M.js";import{a as M}from"/build/_shared/chunk-WZRQ3RQI.js";import{a as K,b as Q,d as W,e as X,f as Y,g as Z,h as _}from"/build/_shared/chunk-KLKNQD3Q.js";import"/build/_shared/chunk-PGURRWG5.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as we}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as B,b as F,c as H,e as $,f as P}from"/build/_shared/chunk-G5A27C7O.js";import{h as a}from"/build/_shared/chunk-NVGVVEPD.js";import{Ea as x,K as R,Na as I,V as j,W as E,oa as U,ra as z,xa as N}from"/build/_shared/chunk-PNJDYZ5P.js";import{d as D,e as T,h as A,k as h,l as y,p as S,r as L}from"/build/_shared/chunk-GTSSQFHM.js";import{a as ve,b as k}from"/build/_shared/chunk-BBTKOQ57.js";import{e as c}from"/build/_shared/chunk-UED2Q7CE.js";var d=c(ve());var De=c(Ce());var Te=c(we());var e=c(k());function ce(){let{candidates:r,searchTerm:me,page:g,view:de,can:l}=S(),[ge,m]=A(),[n,ue]=(0,d.useState)(me),u=D(),v=L(),pe=T().state==="loading",[w,he]=(0,d.useState)(!1),[Ne,p]=(0,d.useState)(null),s=ge.get("view")||de,xe=t=>{t.preventDefault(),m({search:n,view:s})},C=t=>{m({search:n,view:t})},be=t=>{he(!0),v.submit({id:t,action:"delete"},{method:"post"}),p(null)};return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:py-10",children:[(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[(0,e.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold",children:"Liste des Candidats"}),l?.create&&(0,e.jsxs)(a,{onClick:()=>u("/o/candidates/new"),className:"w-full sm:w-auto h-11 text-base",children:[(0,e.jsx)(U,{className:"mr-2 h-5 w-5"}),"Ajouter un candidat"]})]}),(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[(0,e.jsxs)(y,{onSubmit:xe,className:"relative w-full sm:w-auto",children:[(0,e.jsx)(z,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 transform text-muted-foreground"}),(0,e.jsx)(M,{placeholder:"Rechercher un candidat...",value:n,onChange:t=>ue(t.target.value),className:"pl-10 h-11 text-base w-full sm:w-[300px]"})]}),(0,e.jsxs)("div",{className:"flex gap-2",children:[(0,e.jsx)(a,{variant:s==="grid"?"default":"outline",size:"icon",onClick:()=>C("grid"),className:"h-11 w-11",children:(0,e.jsx)(j,{className:"h-5 w-5"})}),(0,e.jsx)(a,{variant:s==="list"?"default":"outline",size:"icon",onClick:()=>C("list"),className:"h-11 w-11",children:(0,e.jsx)(E,{className:"h-5 w-5"})})]})]}),pe?(0,e.jsx)(J,{view:s,itemCount:20}):r.results.length>0?s==="grid"?(0,e.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:r.results.map(t=>(0,e.jsxs)(B,{children:[(0,e.jsxs)(F,{className:"p-4 sm:p-6",children:[(0,e.jsx)(H,{className:"text-lg sm:text-xl",children:`${t.firstName} ${t.lastName}`}),t.attachments.length>0&&(0,e.jsx)("div",{className:"aspect-video rounded-lg overflow-hidden",children:(0,e.jsx)("img",{src:f(t.attachments)?.file?.url,alt:f(t.attachments)?.label||"",className:"w-full h-full object-cover"})})]}),(0,e.jsxs)($,{className:"p-4 sm:p-6 pt-0",children:[(0,e.jsx)("p",{className:"text-base text-muted-foreground",children:t.email}),(0,e.jsx)("p",{className:"text-base text-muted-foreground",children:t.phone}),(0,e.jsxs)("p",{className:"text-base font-medium mt-3",children:["Poste: ",t.positionApplied]}),(0,e.jsxs)("p",{className:"text-base font-medium",children:["Statut: ",t.status]})]}),(0,e.jsxs)(P,{className:"p-4 sm:p-6 flex justify-between gap-3",children:[l?.view&&(0,e.jsx)(a,{asChild:!0,variant:"outline",className:"flex-1 h-12 text-base",children:(0,e.jsx)(h,{prefetch:"intent",to:`/o/candidates/view/${t.id}`,children:(0,e.jsx)(R,{className:"mr-2 h-5 w-5"})})}),l?.edit&&(0,e.jsx)(a,{asChild:!0,variant:"outline",className:"flex-1 h-12 text-base",children:(0,e.jsx)(h,{prefetch:"intent",to:`/o/candidates/edit/${t.id}`,children:(0,e.jsx)(N,{className:"mr-2 h-5 w-5"})})}),l?.delete&&(0,e.jsxs)(K,{open:Ne===t.id,onOpenChange:fe=>p(fe?t.id:null),children:[(0,e.jsx)(Q,{asChild:!0,children:(0,e.jsx)(a,{variant:"destructive",className:"flex-1 h-12 text-base",children:(0,e.jsx)(x,{className:"mr-2 h-5 w-5"})})}),(0,e.jsxs)(W,{className:"sm:max-w-[425px]",children:[(0,e.jsxs)(X,{children:[(0,e.jsx)(Z,{className:"text-xl",children:"\xCAtes-vous s\xFBr de vouloir supprimer ce candidat ?"}),(0,e.jsx)(_,{className:"text-base",children:"Cette action ne peut pas \xEAtre annul\xE9e."})]}),(0,e.jsxs)(Y,{className:"gap-3 sm:gap-0",children:[(0,e.jsx)(a,{variant:"outline",onClick:()=>p(null),className:"h-12 text-base",children:"Annuler"}),(0,e.jsx)(a,{variant:"destructive",onClick:()=>be(t.id),disabled:w,className:"h-12 text-base",children:w?"Suppression...":"Supprimer"})]})]})]})]})]},t.id))}):(0,e.jsx)("div",{className:"rounded-lg border overflow-x-auto",children:(0,e.jsxs)(V,{children:[(0,e.jsx)(G,{children:(0,e.jsxs)(b,{children:[(0,e.jsx)(i,{className:"text-base whitespace-nowrap",children:"Nom"}),(0,e.jsx)(i,{className:"text-base hidden sm:table-cell",children:"Email"}),(0,e.jsx)(i,{className:"text-base hidden sm:table-cell",children:"T\xE9l\xE9phone"}),(0,e.jsx)(i,{className:"text-base",children:"Poste"}),(0,e.jsx)(i,{className:"text-base hidden sm:table-cell",children:"Statut"}),(0,e.jsx)(i,{className:"text-base text-right",children:"Actions"})]})}),(0,e.jsx)(q,{children:r.results.map(t=>(0,e.jsxs)(b,{children:[(0,e.jsx)(o,{className:"font-medium text-base",children:`${t.firstName} ${t.lastName}`}),(0,e.jsx)(o,{className:"text-base hidden sm:table-cell",children:t.email}),(0,e.jsx)(o,{className:"text-base hidden sm:table-cell",children:t.phone}),(0,e.jsx)(o,{className:"text-base",children:t.positionApplied}),(0,e.jsx)(o,{className:"text-base hidden sm:table-cell",children:t.status}),(0,e.jsx)(o,{className:"text-right",children:(0,e.jsxs)("div",{className:"flex justify-end gap-2",children:[l?.view&&(0,e.jsx)(a,{variant:"ghost",size:"icon",onClick:()=>u(`/o/candidates/view/${t.id}`),className:"h-11 w-11",children:(0,e.jsx)(I,{className:"h-5 w-5"})}),l?.edit&&(0,e.jsx)(a,{variant:"ghost",size:"icon",onClick:()=>u(`/o/candidates/edit/${t.id}`),className:"h-11 w-11",children:(0,e.jsx)(N,{className:"h-5 w-5"})}),l?.delete&&(0,e.jsxs)(ee,{children:[(0,e.jsx)(te,{asChild:!0,children:(0,e.jsx)(a,{variant:"ghost",size:"icon",className:"h-11 w-11",children:(0,e.jsx)(x,{className:"h-5 w-5"})})}),(0,e.jsxs)(ae,{className:"p-4 sm:p-6 max-w-[90vw] sm:max-w-[425px]",children:[(0,e.jsxs)(se,{children:[(0,e.jsx)(ie,{className:"text-lg sm:text-xl",children:"\xCAtes-vous s\xFBr ?"}),(0,e.jsx)(oe,{className:"text-base",children:"Cette action ne peut pas \xEAtre annul\xE9e. Cela supprimera d\xE9finitivement le candidat et toutes les donn\xE9es associ\xE9es."})]}),(0,e.jsxs)(le,{className:"gap-3",children:[(0,e.jsx)(ne,{className:"h-11 text-base",children:"Annuler"}),(0,e.jsx)(re,{onClick:()=>{v.submit({id:t.id},{method:"delete",action:"/o/candidates"})},className:"h-11 text-base",children:"Supprimer"})]})]})]})]})})]},t.id))})]})}):(0,e.jsx)(O,{type:"candidats",createLink:"/o/candidates/new",view:s}),r.totalResults>0&&(0,e.jsxs)("div",{className:"mt-6 flex justify-center gap-3",children:[(0,e.jsx)(a,{variant:"outline",onClick:()=>m({search:n,view:s,page:(g-1).toString()}),disabled:g===1,className:"h-11 text-base",children:"Pr\xE9c\xE9dent"}),(0,e.jsx)(a,{variant:"outline",onClick:()=>m({search:n,view:s,page:(g+1).toString()}),disabled:r.results.length<20,className:"h-11 text-base",children:"Suivant"})]})]})}export{ce as default};
