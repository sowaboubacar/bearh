import{a as Y}from"/build/_shared/chunk-CC3KCBJW.js";import{a as L,b as P}from"/build/_shared/chunk-ABDDDOIB.js";import{a as F,b as B,c as H,d as g,e as n,f as i}from"/build/_shared/chunk-IEDNE26R.js";import"/build/_shared/chunk-M3TRH43M.js";import{a as S}from"/build/_shared/chunk-WZRQ3RQI.js";import{a as k,b as E,c as j,d as A,e as U,f as G,g as M,h as $}from"/build/_shared/chunk-KLKNQD3Q.js";import"/build/_shared/chunk-PGURRWG5.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as X}from"/build/_shared/chunk-B6OA2ZRE.js";import"/build/_shared/chunk-G5A27C7O.js";import{h as a}from"/build/_shared/chunk-NVGVVEPD.js";import{Ea as R,oa as T,ra as C,xa as y}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as f,h as b,i as w,k as u,l as x,p as D,r as N}from"/build/_shared/chunk-GTSSQFHM.js";import{a as W,b as v}from"/build/_shared/chunk-BBTKOQ57.js";import{e as o}from"/build/_shared/chunk-UED2Q7CE.js";var I=o(W());var Z=o(Y());var _=o(X());var e=o(v());function O(){let{guardTours:s,search:l,page:r,limit:c,can:d}=D(),[p,V]=(0,I.useState)(!1),[ee,m]=b(),te=w(),q=N(),z=f().state==="loading",J=t=>{V(!0),q.submit({id:t,action:"delete"},{method:"post"})},h=t=>new Date(t).toLocaleDateString("fr-FR"),K=t=>{t.preventDefault();let Q=new FormData(t.currentTarget).get("search");m({search:Q})};return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8 space-y-6",children:[(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,e.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold",children:"Tours de Garde"}),d?.create&&(0,e.jsx)(a,{asChild:!0,className:"w-full sm:w-auto h-11 text-base",children:(0,e.jsxs)(u,{prefetch:"intent",to:"/o/guard-tour/new",children:[(0,e.jsx)(T,{className:"mr-2 h-5 w-5"}),"Nouveau Tour de Garde"]})})]}),(0,e.jsxs)(x,{onSubmit:K,className:"flex w-full items-center gap-2",children:[(0,e.jsx)(S,{type:"search",name:"search",placeholder:"Rechercher des tours de garde...",defaultValue:l,className:"h-11 text-base"}),(0,e.jsx)(a,{type:"submit",className:"h-11 w-11",children:(0,e.jsx)(C,{className:"h-5 w-5"})})]}),z?(0,e.jsx)(P,{view:"list",itemCount:c}):s.results.length>0?(0,e.jsx)("div",{className:"rounded-lg border overflow-x-auto",children:(0,e.jsxs)(F,{children:[(0,e.jsx)(B,{children:(0,e.jsxs)(g,{children:[(0,e.jsx)(n,{className:"text-base whitespace-nowrap",children:"Date de d\xE9but"}),(0,e.jsx)(n,{className:"text-base whitespace-nowrap hidden sm:table-cell",children:"Date de fin"}),(0,e.jsx)(n,{className:"text-base whitespace-nowrap hidden md:table-cell",children:"Notes"}),(0,e.jsx)(n,{className:"text-base text-right",children:"Actions"})]})}),(0,e.jsx)(H,{children:s.results.map(t=>(0,e.jsxs)(g,{children:[(0,e.jsx)(i,{className:"font-medium text-base",children:h(t.startDate)}),(0,e.jsx)(i,{className:"text-base hidden sm:table-cell",children:h(t.endDate)}),(0,e.jsx)(i,{className:"text-base truncate max-w-[200px] hidden md:table-cell",children:t.notes}),(0,e.jsx)(i,{children:(0,e.jsxs)("div",{className:"flex justify-end gap-2",children:[d?.edit&&(0,e.jsx)(a,{asChild:!0,variant:"outline",className:"h-11 w-11",children:(0,e.jsx)(u,{prefetch:"intent",to:`/o/guard-tour/edit/${t.id}`,children:(0,e.jsx)(y,{className:"h-5 w-5"})})}),d?.delete&&(0,e.jsxs)(k,{children:[(0,e.jsx)(E,{asChild:!0,children:(0,e.jsx)(a,{variant:"destructive",className:"h-11 w-11",children:(0,e.jsx)(R,{className:"h-5 w-5"})})}),(0,e.jsxs)(A,{className:"sm:max-w-[425px]",children:[(0,e.jsxs)(U,{children:[(0,e.jsx)(M,{className:"text-lg sm:text-xl",children:"\xCAtes-vous s\xFBr de vouloir supprimer ce tour de garde ?"}),(0,e.jsx)($,{className:"text-base",children:"Cette action ne peut pas \xEAtre annul\xE9e."})]}),(0,e.jsxs)(G,{className:"gap-3",children:[(0,e.jsx)(j,{asChild:!0,children:(0,e.jsx)(a,{variant:"outline",className:"h-11 text-base",children:"Annuler"})}),(0,e.jsx)(a,{variant:"destructive",onClick:()=>J(t.id),disabled:p,className:"h-11 text-base",children:p?"Suppression...":"Supprimer"})]})]})]})]})})]},t.id))})]})}):(0,e.jsx)(L,{type:"tours de garde",createLink:"/o/guard-tour/new",view:"list"}),s.totalResults>0&&(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4",children:[(0,e.jsx)(a,{onClick:()=>m({search:l,page:(r-1).toString()}),disabled:r===1,className:"w-full sm:w-auto h-11 text-base",children:"Pr\xE9c\xE9dent"}),(0,e.jsxs)("span",{className:"text-base",children:["Page ",r," sur ",Math.ceil(s.totalResults/c)]}),(0,e.jsx)(a,{onClick:()=>m({search:l,page:(r+1).toString()}),disabled:r*c>=s.totalResults,className:"w-full sm:w-auto h-11 text-base",children:"Suivant"})]})]})}export{O as default};
