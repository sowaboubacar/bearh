import{a as me}from"/build/_shared/chunk-AGJ7XZ25.js";import{a as Z,b as ae}from"/build/_shared/chunk-ABDDDOIB.js";import{a as _,b as ee,c as te,d as C,e as f,f as x}from"/build/_shared/chunk-IEDNE26R.js";import"/build/_shared/chunk-M3TRH43M.js";import{a as Y}from"/build/_shared/chunk-WZRQ3RQI.js";import{a as D,b as y,d as T,e as B,f as k,g as S,h as L}from"/build/_shared/chunk-KLKNQD3Q.js";import"/build/_shared/chunk-PGURRWG5.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as ce}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as I,b as G,c as q,e as z,f as J}from"/build/_shared/chunk-G5A27C7O.js";import{h as a}from"/build/_shared/chunk-NVGVVEPD.js";import{Ea as v,Q as K,W as Q,oa as W,ra as X,xa as b}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as E,h as j,i as U,k as h,l as M,p as O,r as V}from"/build/_shared/chunk-GTSSQFHM.js";import{a as le,b as $}from"/build/_shared/chunk-BBTKOQ57.js";import{e as m}from"/build/_shared/chunk-UED2Q7CE.js";var i=m(le());var de=m(me());var ue=m(ce());var e=m($());function se(){let{patrimoineTypes:o,search:d,view:w,page:r,limit:N,can:n}=O(),[u,R]=(0,i.useState)(!1),[F,p]=j(),pe=U(),l=V(),ie=E().state==="loading",[s,oe]=(0,i.useState)(w),[P,c]=(0,i.useState)(null);(0,i.useEffect)(()=>{oe(F.get("view")||w)},[F,w]);let H=t=>{R(!0),l.submit({id:t,action:"delete"},{method:"post"}),c(null)};(0,i.useEffect)(()=>{l.state==="idle"&&l.data?.success&&R(!1)},[l.state,l.data]);let re=t=>{t.preventDefault();let ne=new FormData(t.currentTarget).get("search");p({search:ne,view:s})},A=t=>{p({search:d,view:t})};return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8 space-y-6",children:[(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,e.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold",children:"Type d'Actif"}),n?.create&&(0,e.jsx)(a,{asChild:!0,className:"w-full sm:w-auto h-12 text-base",children:(0,e.jsxs)(h,{prefetch:"intent",to:"/o/patrimoine-type/new",children:[(0,e.jsx)(W,{className:"mr-2 h-5 w-5"}),"Nouveau Type de Patrimoine"]})})]}),(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-4",children:[(0,e.jsxs)(M,{onSubmit:re,className:"flex items-center gap-2 w-full sm:w-auto sm:flex-1",children:[(0,e.jsx)(Y,{type:"search",name:"search",placeholder:"Rechercher des types de patrimoine...",defaultValue:d,className:"h-12 text-base"}),(0,e.jsx)(a,{type:"submit",className:"h-12 w-12 flex-shrink-0",children:(0,e.jsx)(X,{className:"h-5 w-5"})})]}),(0,e.jsxs)("div",{className:"flex gap-2",children:[(0,e.jsx)(a,{variant:s==="grid"?"default":"outline",onClick:()=>A("grid"),className:"flex-1 sm:flex-none h-12",children:(0,e.jsx)(K,{className:"h-5 w-5"})}),(0,e.jsx)(a,{variant:s==="list"?"default":"outline",onClick:()=>A("list"),className:"flex-1 sm:flex-none h-12",children:(0,e.jsx)(Q,{className:"h-5 w-5"})})]})]}),ie?(0,e.jsx)(ae,{view:s,itemCount:N}):o.results.length>0?s==="grid"?(0,e.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:o.results.map(t=>(0,e.jsxs)(I,{children:[(0,e.jsx)(G,{className:"p-4 sm:p-6",children:(0,e.jsx)(q,{className:"text-xl font-bold",children:t.name})}),(0,e.jsx)(z,{className:"p-4 sm:p-6 pt-0",children:(0,e.jsx)("p",{className:"text-base text-muted-foreground",children:t.description||"Aucune description"})}),(0,e.jsxs)(J,{className:"p-4 sm:p-6 flex justify-between gap-3",children:[n?.edit&&(0,e.jsx)(a,{asChild:!0,variant:"outline",className:"flex-1 h-12 text-base",children:(0,e.jsx)(h,{prefetch:"intent",to:`/o/patrimoine-type/edit/${t.id}`,children:(0,e.jsx)(b,{className:"mr-2 h-5 w-5"})})}),n?.delete&&(0,e.jsxs)(D,{open:P===t.id,onOpenChange:g=>c(g?t.id:null),children:[(0,e.jsx)(y,{asChild:!0,children:(0,e.jsx)(a,{variant:"destructive",className:"flex-1 h-12 text-base",children:(0,e.jsx)(v,{className:"mr-2 h-5 w-5"})})}),(0,e.jsxs)(T,{className:"sm:max-w-[425px]",children:[(0,e.jsxs)(B,{children:[(0,e.jsx)(S,{className:"text-xl",children:"\xCAtes-vous s\xFBr de vouloir supprimer ce type de patrimoine ?"}),(0,e.jsx)(L,{className:"text-base",children:"Cette action ne peut pas \xEAtre annul\xE9e."})]}),(0,e.jsxs)(k,{className:"gap-3 sm:gap-0",children:[(0,e.jsx)(a,{variant:"outline",onClick:()=>c(null),className:"h-12 text-base",children:"Annuler"}),(0,e.jsx)(a,{variant:"destructive",onClick:()=>H(t.id),disabled:u,className:"h-12 text-base",children:u?"Suppression...":"Supprimer"})]})]})]})]})]},t.id))}):(0,e.jsx)("div",{className:"rounded-lg border overflow-x-auto",children:(0,e.jsxs)(_,{children:[(0,e.jsx)(ee,{children:(0,e.jsxs)(C,{children:[(0,e.jsx)(f,{className:"text-base whitespace-nowrap",children:"Nom"}),(0,e.jsx)(f,{className:"text-base whitespace-nowrap hidden md:table-cell",children:"Description"}),(0,e.jsx)(f,{className:"text-base text-right",children:"Actions"})]})}),(0,e.jsx)(te,{children:o.results.map(t=>(0,e.jsxs)(C,{children:[(0,e.jsx)(x,{className:"font-medium text-base",children:t.name}),(0,e.jsx)(x,{className:"hidden md:table-cell text-base",children:t.description||"Aucune description"}),(0,e.jsx)(x,{children:(0,e.jsxs)("div",{className:"flex justify-end gap-2",children:[n?.edit&&(0,e.jsx)(a,{asChild:!0,variant:"outline",className:"h-12 text-base px-3",children:(0,e.jsx)(h,{prefetch:"intent",to:`/o/patrimoine-type/edit/${t.id}`,children:(0,e.jsx)(b,{className:"h-5 w-5"})})}),n?.delete&&(0,e.jsxs)(D,{open:P===t.id,onOpenChange:g=>c(g?t.id:null),children:[(0,e.jsx)(y,{asChild:!0,children:(0,e.jsx)(a,{variant:"destructive",className:"h-12 text-base px-3",children:(0,e.jsx)(v,{className:"h-5 w-5"})})}),(0,e.jsxs)(T,{className:"sm:max-w-[425px]",children:[(0,e.jsxs)(B,{children:[(0,e.jsx)(S,{className:"text-xl",children:"\xCAtes-vous s\xFBr de vouloir supprimer ce type de patrimoine ?"}),(0,e.jsx)(L,{className:"text-base",children:"Cette action ne peut pas \xEAtre annul\xE9e."})]}),(0,e.jsxs)(k,{className:"gap-3 sm:gap-0",children:[(0,e.jsx)(a,{variant:"outline",onClick:()=>c(null),className:"h-12 text-base",children:"Annuler"}),(0,e.jsx)(a,{variant:"destructive",onClick:()=>H(t.id),disabled:u,className:"h-12 text-base",children:u?"Suppression...":"Supprimer"})]})]})]})]})})]},t.id))})]})}):(0,e.jsx)(Z,{type:"types de patrimoine",createLink:"/o/patrimoine-type/new",view:s}),o.totalResults>0&&(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4",children:[(0,e.jsx)(a,{onClick:()=>p({search:d,view:s,page:(r-1).toString()}),disabled:r===1,className:"w-full sm:w-auto h-12 text-base",children:"Pr\xE9c\xE9dent"}),(0,e.jsxs)("span",{className:"text-base",children:["Page ",r," sur ",Math.ceil(o.totalResults/N)]}),(0,e.jsx)(a,{onClick:()=>p({search:d,view:s,page:(r+1).toString()}),disabled:r*N>=o.totalResults,className:"w-full sm:w-auto h-12 text-base",children:"Suivant"})]})]})}export{se as default};
