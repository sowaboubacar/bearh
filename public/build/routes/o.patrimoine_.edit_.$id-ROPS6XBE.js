import{a as fe}from"/build/_shared/chunk-YWUCPBEQ.js";import{a as Ne}from"/build/_shared/chunk-XEDCDRJP.js";import{a as he}from"/build/_shared/chunk-XSP4JB6A.js";import{a as pe}from"/build/_shared/chunk-XKJ5LF2E.js";import{a as ue}from"/build/_shared/chunk-AGJ7XZ25.js";import{a as de}from"/build/_shared/chunk-CP3WB6KC.js";import{a as me}from"/build/_shared/chunk-3DB3GQTY.js";import{a as l}from"/build/_shared/chunk-XDNDK56N.js";import{a as x,b as C,c as v,d as y,e as f}from"/build/_shared/chunk-NCY4KUS2.js";import"/build/_shared/chunk-Q6K63OHD.js";import"/build/_shared/chunk-KAUQO2FD.js";import"/build/_shared/chunk-7ZNTUDLC.js";import{a as ce}from"/build/_shared/chunk-6JFOYO3V.js";import{a as B}from"/build/_shared/chunk-A762UFCP.js";import"/build/_shared/chunk-RHTBOEYQ.js";import"/build/_shared/chunk-HNF2M344.js";import"/build/_shared/chunk-IQV4D3C7.js";import"/build/_shared/chunk-H33OI7YH.js";import{a as m}from"/build/_shared/chunk-JBQJJPFB.js";import{b as d}from"/build/_shared/chunk-SS7AQOQ3.js";import{a as j,b as P,c as q}from"/build/_shared/chunk-2MHSPA7K.js";import"/build/_shared/chunk-M3TRH43M.js";import{a as b}from"/build/_shared/chunk-WZRQ3RQI.js";import"/build/_shared/chunk-XNZ6DBKW.js";import"/build/_shared/chunk-YYMCCM4Y.js";import{a as le}from"/build/_shared/chunk-35S5HMBT.js";import"/build/_shared/chunk-2BPW44Z6.js";import"/build/_shared/chunk-5KYGR3MA.js";import"/build/_shared/chunk-KLKNQD3Q.js";import"/build/_shared/chunk-PGURRWG5.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as oe}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as r,b as n,c as o,e as c,f as M}from"/build/_shared/chunk-G5A27C7O.js";import{h as g}from"/build/_shared/chunk-NVGVVEPD.js";import{X as U,b as H,t as R}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as D,i as F,k,l as L,p as I,q as $}from"/build/_shared/chunk-GTSSQFHM.js";import{a as ne,b as E}from"/build/_shared/chunk-BBTKOQ57.js";import{e as s}from"/build/_shared/chunk-UED2Q7CE.js";var p=s(ne()),ge=s(le());var be=s(Ne()),xe=s(ue()),Ce=s(ce()),ve=s(pe()),ye=s(he()),Se=s(de()),we=s(me()),Te=s(fe()),Ae=s(oe());var e=s(E());function G(){let{patrimoine:i,patrimoineTypes:V,users:O,positions:z,teams:W,departments:J,hourGroups:K,access:Q,can:X}=I(),S=$(),w=D(),[T,Y]=(0,p.useState)(!1),[t,A]=(0,p.useState)(i.assignedTo),[Z,_]=(0,p.useState)(i.attachments);(0,p.useEffect)(()=>{A(i.assignedTo)},[i]);let u=(a,h)=>{A(N=>({...N,[a]:N[a].includes(h)?N[a].filter(re=>re!==h):[...N[a],h]}))},[ee,ae]=(0,p.useState)(!1),se=F(),te=a=>{Y(!0),a.preventDefault();let h=new FormData(a.currentTarget);Z.forEach(N=>{h.append("attachments",N.id)}),se(h,{method:"post"})},ie=a=>{_(a)};return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[X?.list&&(0,e.jsx)(g,{asChild:!0,variant:"outline",className:"mb-6 h-12 text-base",children:(0,e.jsxs)(k,{prefetch:"intent",to:`/o/patrimoine/view/${i.id}`,children:[(0,e.jsx)(H,{className:"mr-2 h-5 w-5"}),"Retour au d\xE9tail"]})}),(0,e.jsxs)(r,{className:"max-w-4xl mx-auto",children:[(0,e.jsx)(n,{className:"p-4 sm:p-6",children:(0,e.jsx)(o,{className:"text-2xl sm:text-3xl font-bold",children:"Modifier le Patrimoine"})}),(0,e.jsxs)(L,{method:"post",onSubmit:te,children:[(0,e.jsx)(c,{className:"p-4 sm:p-6",children:(0,e.jsx)(l,{className:"h-[70vh] sm:h-[600px] pr-4",children:(0,e.jsxs)("div",{className:"space-y-6",children:[S?.error&&(0,e.jsxs)(j,{variant:"destructive",children:[(0,e.jsx)(R,{className:"h-5 w-5"}),(0,e.jsx)(P,{className:"text-base font-medium",children:"Erreur"}),(0,e.jsx)(q,{className:"text-base",children:S.error})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(d,{htmlFor:"name",className:"text-base font-medium",children:"D\xE9nomination"}),(0,e.jsx)(b,{id:"name",name:"name",defaultValue:i.name,required:!0,className:"h-12 text-base"})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(d,{htmlFor:"type",className:"text-base font-medium",children:"Type"}),(0,e.jsxs)(x,{name:"type",defaultValue:i.type,required:!0,children:[(0,e.jsx)(v,{className:"h-12 text-base",children:(0,e.jsx)(C,{placeholder:"S\xE9lectionnez un type"})}),(0,e.jsx)(y,{children:V.map(a=>(0,e.jsx)(f,{value:a.id,className:"text-base",children:a.name},a.id))})]})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(d,{htmlFor:"purchaseDate",className:"text-base font-medium",children:"Date d'achat"}),(0,e.jsx)(b,{type:"date",id:"purchaseDate",name:"purchaseDate",defaultValue:new Date(i.purchaseDate).toISOString().split("T")[0],required:!0,className:"h-12 text-base"})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(d,{htmlFor:"status",className:"text-base font-medium",children:"Statut"}),(0,e.jsxs)(x,{name:"status",defaultValue:i.status,required:!0,children:[(0,e.jsx)(v,{className:"h-12 text-base",children:(0,e.jsx)(C,{placeholder:"S\xE9lectionnez un statut"})}),(0,e.jsxs)(y,{children:[(0,e.jsx)(f,{value:"Active",className:"text-base",children:"Actif"}),(0,e.jsx)(f,{value:"Under Maintenance",className:"text-base",children:"En maintenance"}),(0,e.jsx)(f,{value:"Out of Service",className:"text-base",children:"Hors service"})]})]})]}),(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsx)(d,{className:"text-base font-medium",children:"Assign\xE9 \xE0"}),(0,e.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,e.jsxs)(r,{className:"shadow-none border",children:[(0,e.jsx)(n,{className:"p-4",children:(0,e.jsx)(o,{className:"text-base font-semibold",children:"Utilisateurs"})}),(0,e.jsx)(c,{className:"p-0",children:(0,e.jsx)(l,{className:"h-48 px-4",children:O.map(a=>(0,e.jsxs)("div",{className:"flex items-center space-x-3 py-3",children:[(0,e.jsx)(m,{id:`user-${a.id}`,checked:t.users.includes(a.id),onCheckedChange:()=>u("users",a.id),className:"h-5 w-5"}),(0,e.jsxs)("label",{htmlFor:`user-${a.id}`,className:"text-base",children:[a.firstName," ",a.lastName]}),t.users.includes(a.id)&&(0,e.jsx)("input",{type:"hidden",name:"assignedTo.users",value:a.id})]},a.id))})})]}),(0,e.jsxs)(r,{className:"shadow-none border",children:[(0,e.jsx)(n,{className:"p-4",children:(0,e.jsx)(o,{className:"text-base font-semibold",children:"Postes"})}),(0,e.jsx)(c,{className:"p-0",children:(0,e.jsx)(l,{className:"h-48 px-4",children:z.map(a=>(0,e.jsxs)("div",{className:"flex items-center space-x-3 py-3",children:[(0,e.jsx)(m,{id:`position-${a.id}`,checked:t.positions.includes(a.id),onCheckedChange:()=>u("positions",a.id),className:"h-5 w-5"}),(0,e.jsx)("label",{htmlFor:`position-${a.id}`,className:"text-base",children:a.title}),t.positions.includes(a.id)&&(0,e.jsx)("input",{type:"hidden",name:"assignedTo.positions",value:a.id})]},a.id))})})]}),(0,e.jsxs)(r,{className:"shadow-none border",children:[(0,e.jsx)(n,{className:"p-4",children:(0,e.jsx)(o,{className:"text-base font-semibold",children:"\xC9quipes"})}),(0,e.jsx)(c,{className:"p-0",children:(0,e.jsx)(l,{className:"h-48 px-4",children:W.map(a=>(0,e.jsxs)("div",{className:"flex items-center space-x-3 py-3",children:[(0,e.jsx)(m,{id:`team-${a.id}`,checked:t.teams.includes(a.id),onCheckedChange:()=>u("teams",a.id),className:"h-5 w-5"}),(0,e.jsx)("label",{htmlFor:`team-${a.id}`,className:"text-base",children:a.name}),t.teams.includes(a.id)&&(0,e.jsx)("input",{type:"hidden",name:"assignedTo.teams",value:a.id})]},a.id))})})]}),(0,e.jsxs)(r,{className:"shadow-none border",children:[(0,e.jsx)(n,{className:"p-4",children:(0,e.jsx)(o,{className:"text-base font-semibold",children:"D\xE9partements"})}),(0,e.jsx)(c,{className:"p-0",children:(0,e.jsx)(l,{className:"h-48 px-4",children:J.map(a=>(0,e.jsxs)("div",{className:"flex items-center space-x-3 py-3",children:[(0,e.jsx)(m,{id:`department-${a.id}`,checked:t.departments.includes(a.id),onCheckedChange:()=>u("departments",a.id),className:"h-5 w-5"}),(0,e.jsx)("label",{htmlFor:`department-${a.id}`,className:"text-base",children:a.name}),t.departments.includes(a.id)&&(0,e.jsx)("input",{type:"hidden",name:"assignedTo.departments",value:a.id})]},a.id))})})]}),(0,e.jsxs)(r,{className:"shadow-none border",children:[(0,e.jsx)(n,{className:"p-4",children:(0,e.jsx)(o,{className:"text-base font-semibold",children:"Groupes Horaires"})}),(0,e.jsx)(c,{className:"p-0",children:(0,e.jsx)(l,{className:"h-48 px-4",children:K.map(a=>(0,e.jsxs)("div",{className:"flex items-center space-x-3 py-3",children:[(0,e.jsx)(m,{id:`hourGroup-${a.id}`,checked:t.hourGroups.includes(a.id),onCheckedChange:()=>u("hourGroups",a.id),className:"h-5 w-5"}),(0,e.jsx)("label",{htmlFor:`hourGroup-${a.id}`,className:"text-base",children:a.name}),t.hourGroups.includes(a.id)&&(0,e.jsx)("input",{type:"hidden",name:"assignedTo.hourGroups",value:a.id})]},a.id))})})]}),(0,e.jsxs)(r,{className:"shadow-none border",children:[(0,e.jsx)(n,{className:"p-4",children:(0,e.jsx)(o,{className:"text-base font-semibold",children:"Groupes d'Acc\xE8s"})}),(0,e.jsx)(c,{className:"p-0",children:(0,e.jsx)(l,{className:"h-48 px-4",children:Q.map(a=>(0,e.jsxs)("div",{className:"flex items-center space-x-3 py-3",children:[(0,e.jsx)(m,{id:`access-${a.id}`,checked:t.access.includes(a.id),onCheckedChange:()=>u("access",a.id),className:"h-5 w-5"}),(0,e.jsx)("label",{htmlFor:`access-${a.id}`,className:"text-base",children:a.name}),t.access.includes(a.id)&&(0,e.jsx)("input",{type:"hidden",name:"assignedTo.access",value:a.id})]},a.id))})})]})]})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(d,{htmlFor:"attachments",className:"text-base font-medium",children:"Images & Pi\xE8ces jointes"}),(0,e.jsx)(B,{onSelect:ie,defaultSelectedDocuments:i.attachments,multiple:!0,accept:"image/*,application/pdf",maxSize:5*1024*1024,onBusyStateChange:ae})]})]})})}),(0,e.jsx)(M,{className:"p-4 sm:p-6",children:(0,e.jsx)(g,{type:"submit",className:"w-full h-12 text-base",disabled:T||ee||w.state==="submitting",children:T||w.state==="submitting"?(0,e.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,e.jsx)(U,{className:"h-5 w-5 animate-spin"}),"Mise \xE0 jour en cours..."]}):"Mettre \xE0 jour le patrimoine"})})]})]})]})}export{G as default};
