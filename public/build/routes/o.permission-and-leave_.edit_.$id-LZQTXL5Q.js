import{a as c,b as l,c as d,d as u,e as r}from"/build/_shared/chunk-NCY4KUS2.js";import"/build/_shared/chunk-Q6K63OHD.js";import"/build/_shared/chunk-KAUQO2FD.js";import"/build/_shared/chunk-7ZNTUDLC.js";import{a as Q}from"/build/_shared/chunk-6JFOYO3V.js";import{a as Y}from"/build/_shared/chunk-SVVENAN2.js";import{a as T}from"/build/_shared/chunk-L2TBXS32.js";import{a as P}from"/build/_shared/chunk-A762UFCP.js";import"/build/_shared/chunk-RHTBOEYQ.js";import"/build/_shared/chunk-HNF2M344.js";import"/build/_shared/chunk-IQV4D3C7.js";import"/build/_shared/chunk-H33OI7YH.js";import"/build/_shared/chunk-JBQJJPFB.js";import{b as s}from"/build/_shared/chunk-SS7AQOQ3.js";import{a as R,b as j,c as O}from"/build/_shared/chunk-2MHSPA7K.js";import"/build/_shared/chunk-M3TRH43M.js";import{a as m}from"/build/_shared/chunk-WZRQ3RQI.js";import"/build/_shared/chunk-XNZ6DBKW.js";import"/build/_shared/chunk-YYMCCM4Y.js";import{a as X}from"/build/_shared/chunk-35S5HMBT.js";import"/build/_shared/chunk-2BPW44Z6.js";import"/build/_shared/chunk-5KYGR3MA.js";import"/build/_shared/chunk-KLKNQD3Q.js";import"/build/_shared/chunk-PGURRWG5.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as K}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as w,b as A,c as L,e as C}from"/build/_shared/chunk-G5A27C7O.js";import{h as i}from"/build/_shared/chunk-NVGVVEPD.js";import{X as F,b as I,t as E}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as h,i as b,k as S,l as D,p as N,q as x}from"/build/_shared/chunk-GTSSQFHM.js";import{a as J,b as y}from"/build/_shared/chunk-BBTKOQ57.js";import{e as a}from"/build/_shared/chunk-UED2Q7CE.js";var o=a(J()),Z=a(X());var _=a(Y()),ee=a(Q()),te=a(K());var e=a(y());function U(){let{permissionAndLeave:t,users:ae,can:q}=N(),p=x(),f=h(),[g,B]=(0,o.useState)(!1),[V,M]=(0,o.useState)(t.attachments),[z,H]=(0,o.useState)(!1),W=b(),k=n=>{B(!0),n.preventDefault();let v=new FormData(n.currentTarget);V.forEach(G=>{v.append("attachments",G.id)}),W(v,{method:"post"})},$=n=>{M(n)};return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8 max-w-2xl",children:[q?.list&&(0,e.jsx)(i,{asChild:!0,variant:"outline",className:"mb-6 h-12 text-base",children:(0,e.jsxs)(S,{prefetch:"intent",to:"/o/permission-and-leave",children:[(0,e.jsx)(I,{className:"mr-2 h-5 w-5"}),"Retour \xE0 la liste"]})}),(0,e.jsxs)(w,{children:[(0,e.jsx)(A,{className:"p-4 sm:p-6",children:(0,e.jsx)(L,{className:"text-2xl sm:text-3xl font-bold",children:"Modifier la Demande de Permission ou Cong\xE9"})}),(0,e.jsxs)(C,{className:"p-4 sm:p-6",children:[p?.error&&(0,e.jsxs)(R,{variant:"destructive",className:"mb-6",children:[(0,e.jsx)(E,{className:"h-5 w-5"}),(0,e.jsx)(j,{className:"text-base font-medium",children:"Erreur"}),(0,e.jsx)(O,{className:"text-base",children:p.error})]}),(0,e.jsx)(D,{method:"post",onSubmit:k,children:(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(s,{htmlFor:"type",className:"text-base font-medium",children:"Type"}),(0,e.jsxs)(c,{name:"type",defaultValue:t.type,required:!0,children:[(0,e.jsx)(d,{className:"h-12 text-base",children:(0,e.jsx)(l,{placeholder:"S\xE9lectionnez le type"})}),(0,e.jsxs)(u,{children:[(0,e.jsx)(r,{value:"Permission",className:"text-base",children:"Permission"}),(0,e.jsx)(r,{value:"Leave",className:"text-base",children:"Cong\xE9"})]})]})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(s,{htmlFor:"startDate",className:"text-base font-medium",children:"Date de d\xE9but"}),(0,e.jsx)(m,{type:"date",id:"startDate",name:"startDate",defaultValue:new Date(t.startDate).toISOString().split("T")[0],required:!0,className:"h-12 text-base"})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(s,{htmlFor:"endDate",className:"text-base font-medium",children:"Date de fin"}),(0,e.jsx)(m,{type:"date",id:"endDate",name:"endDate",defaultValue:new Date(t.endDate).toISOString().split("T")[0],required:!0,className:"h-12 text-base"})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(s,{htmlFor:"reason",className:"text-base font-medium",children:"Raison"}),(0,e.jsx)(T,{id:"reason",name:"reason",rows:3,defaultValue:t.reason,required:!0,className:"min-h-[120px] text-base p-3 resize-y"})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(s,{htmlFor:"status",className:"text-base font-medium",children:"Statut"}),(0,e.jsxs)(c,{name:"status",defaultValue:t.status,required:!0,children:[(0,e.jsx)(d,{className:"h-12 text-base",children:(0,e.jsx)(l,{placeholder:"S\xE9lectionnez le statut"})}),(0,e.jsxs)(u,{children:[(0,e.jsx)(r,{value:"Pending",className:"text-base",children:"En attente"}),(0,e.jsx)(r,{value:"Approved",className:"text-base",children:"Approuv\xE9"}),(0,e.jsx)(r,{value:"Rejected",className:"text-base",children:"Rejet\xE9"})]})]})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(s,{htmlFor:"attachments",className:"text-base font-medium",children:"Images & Pi\xE8ces jointes"}),(0,e.jsx)(P,{onSelect:$,defaultSelectedDocuments:t.attachments,multiple:!0,accept:"image/*,application/pdf",maxSize:5*1024*1024,onBusyStateChange:H})]}),(0,e.jsx)(i,{type:"submit",className:"w-full h-12 text-base",disabled:g||z||f.state==="submitting",children:g||f.state==="submitting"?(0,e.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,e.jsx)(F,{className:"h-5 w-5 animate-spin"}),"Mise \xE0 jour en cours..."]}):"Mettre \xE0 jour la demande"})]})})]})]})]})}export{U as default};
