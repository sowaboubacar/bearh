import{a as K}from"/build/_shared/chunk-2BB2EQBE.js";import{a as E,b as A,c as L,d as F,e as o}from"/build/_shared/chunk-NCY4KUS2.js";import"/build/_shared/chunk-Q6K63OHD.js";import"/build/_shared/chunk-KAUQO2FD.js";import"/build/_shared/chunk-7ZNTUDLC.js";import{a as I}from"/build/_shared/chunk-L2TBXS32.js";import{a as j}from"/build/_shared/chunk-A762UFCP.js";import"/build/_shared/chunk-RHTBOEYQ.js";import"/build/_shared/chunk-HNF2M344.js";import"/build/_shared/chunk-IQV4D3C7.js";import"/build/_shared/chunk-H33OI7YH.js";import"/build/_shared/chunk-JBQJJPFB.js";import{b as r}from"/build/_shared/chunk-SS7AQOQ3.js";import{a as O,b as T,c as R}from"/build/_shared/chunk-2MHSPA7K.js";import"/build/_shared/chunk-M3TRH43M.js";import"/build/_shared/chunk-WZRQ3RQI.js";import"/build/_shared/chunk-XNZ6DBKW.js";import"/build/_shared/chunk-YYMCCM4Y.js";import{a as J}from"/build/_shared/chunk-35S5HMBT.js";import"/build/_shared/chunk-2BPW44Z6.js";import"/build/_shared/chunk-5KYGR3MA.js";import"/build/_shared/chunk-KLKNQD3Q.js";import"/build/_shared/chunk-PGURRWG5.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as G}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as N,b as x,c as S,e as y}from"/build/_shared/chunk-G5A27C7O.js";import{h as i}from"/build/_shared/chunk-NVGVVEPD.js";import{X as D,b as w,t as C}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as d,i as p,k as f,l as b,p as v,q as g}from"/build/_shared/chunk-GTSSQFHM.js";import{a as $,b as h}from"/build/_shared/chunk-BBTKOQ57.js";import{e as t}from"/build/_shared/chunk-UED2Q7CE.js";var n=t($()),Q=t(J());var X=t(K()),Y=t(G());var e=t(h());function U(){let{observation:a,users:Z,can:B}=v(),c=g(),m=d(),[l,q]=(0,n.useState)(!1),[_,M]=(0,n.useState)(!1),[H,P]=(0,n.useState)(a.attachments),V=p(),W=s=>{s.preventDefault(),q(!0);let u=new FormData(s.currentTarget);H.forEach(z=>{u.append("attachments",z.id)}),V(u,{method:"post"})},k=s=>{P(s)};return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8 max-w-2xl",children:[B?.list&&(0,e.jsx)(i,{asChild:!0,variant:"outline",className:"mb-6 h-12 text-base",children:(0,e.jsxs)(f,{prefetch:"intent",to:"/o/observation",children:[(0,e.jsx)(w,{className:"mr-2 h-5 w-5"}),"Retour \xE0 la liste"]})}),(0,e.jsxs)(N,{children:[(0,e.jsx)(x,{className:"p-4 sm:p-6",children:(0,e.jsx)(S,{className:"text-xl sm:text-2xl lg:text-3xl font-bold",children:"Modifier la remarque"})}),(0,e.jsxs)(y,{className:"p-4 sm:p-6 space-y-6",children:[c?.error&&(0,e.jsxs)(O,{variant:"destructive",children:[(0,e.jsx)(C,{className:"h-5 w-5"}),(0,e.jsx)(T,{className:"text-base font-medium",children:"Erreur"}),(0,e.jsx)(R,{className:"text-base",children:c.error})]}),(0,e.jsx)(b,{method:"post",onSubmit:W,children:(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(r,{htmlFor:"type",className:"text-base font-medium",children:"Type de remarque"}),(0,e.jsxs)(E,{name:"type",defaultValue:a.type,required:!0,children:[(0,e.jsx)(L,{className:"h-12 text-base",children:(0,e.jsx)(A,{placeholder:"S\xE9lectionnez le type"})}),(0,e.jsxs)(F,{children:[(0,e.jsx)(o,{value:"Positive",className:"text-base",children:"Positive"}),(0,e.jsx)(o,{value:"Neutral",className:"text-base",children:"Neutre"}),(0,e.jsx)(o,{value:"Negative",className:"text-base",children:"N\xE9gative"})]})]})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)(r,{htmlFor:"content",className:"text-base font-medium",children:"Contenu"}),(0,e.jsx)(I,{id:"content",name:"content",defaultValue:a.content,required:!0,className:"min-h-[150px] text-base p-3"})]}),(0,e.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,e.jsx)(r,{htmlFor:"attachments",className:"text-base font-medium",children:"Images & Pi\xE8ces jointes"}),(0,e.jsx)(j,{onSelect:k,defaultSelectedDocuments:a.attachments,multiple:!0,accept:"image/*,application/pdf",maxSize:5*1024*1024,onBusyStateChange:M,className:"w-full"})]}),(0,e.jsx)(i,{type:"submit",className:"w-full h-12 text-base",disabled:l||m.state==="submitting",children:l||m.state==="submitting"?(0,e.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,e.jsx)(D,{className:"h-5 w-5 animate-spin"}),"Mise \xE0 jour..."]}):"Mettre \xE0 jour l'observation"})]})})]})]})]})}export{U as default};
