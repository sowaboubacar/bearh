import{a as y}from"/build/_shared/chunk-6QXFNV75.js";import{a as b,b as f,c as w,d as N,e as v,f as C,g as D,h as A,i as T}from"/build/_shared/chunk-3QGBS752.js";import{a as ne}from"/build/_shared/chunk-CP3WB6KC.js";import{a as K,b as Y}from"/build/_shared/chunk-ABDDDOIB.js";import{a as Q,b as W,c as X,d as x,e as r,f as i}from"/build/_shared/chunk-IEDNE26R.js";import"/build/_shared/chunk-M3TRH43M.js";import{a as z}from"/build/_shared/chunk-WZRQ3RQI.js";import"/build/_shared/chunk-PGURRWG5.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as oe}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as E,b as U,c as $,e as M,f as I}from"/build/_shared/chunk-G5A27C7O.js";import{h as t}from"/build/_shared/chunk-NVGVVEPD.js";import{Ea as h,Oa as q,S as u,V,W as G,oa as J,ra as O,xa as p}from"/build/_shared/chunk-PNJDYZ5P.js";import{d as S,e as B,h as F,l as H,p as R,r as P}from"/build/_shared/chunk-GTSSQFHM.js";import{a as ie,b as j}from"/build/_shared/chunk-BBTKOQ57.js";import{e as c}from"/build/_shared/chunk-UED2Q7CE.js";var Z=c(ie());var me=c(ne());var ce=c(oe());var e=c(j());function _(){let{departments:o,searchTerm:ee,page:g,view:ae,can:l}=R(),[te,d]=F(),[n,se]=(0,Z.useState)(ee),m=S(),k=P(),le=B().state==="loading",s=te.get("view")||ae,re=a=>{a.preventDefault(),d({search:n,view:s})},L=a=>{d({search:n,view:a})};return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:py-10 space-y-6",children:[(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,e.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold",children:"Liste des D\xE9partements"}),l?.create&&(0,e.jsxs)(t,{onClick:()=>m("/o/departments/new"),className:"w-full sm:w-auto h-11 text-base",children:[(0,e.jsx)(J,{className:"mr-2 h-5 w-5"}),"Ajouter un d\xE9partement"]})]}),(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,e.jsxs)(H,{onSubmit:re,className:"relative w-full sm:w-auto",children:[(0,e.jsx)(O,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 transform text-muted-foreground"}),(0,e.jsx)(z,{placeholder:"Rechercher un d\xE9partement...",value:n,onChange:a=>se(a.target.value),className:"pl-10 h-11 text-base w-full sm:w-[300px]"})]}),(0,e.jsxs)("div",{className:"flex gap-2 w-full sm:w-auto",children:[(0,e.jsx)(t,{variant:s==="grid"?"default":"outline",onClick:()=>L("grid"),className:"flex-1 sm:flex-none h-11 w-11",children:(0,e.jsx)(V,{className:"h-5 w-5"})}),(0,e.jsx)(t,{variant:s==="list"?"default":"outline",onClick:()=>L("list"),className:"flex-1 sm:flex-none h-11 w-11",children:(0,e.jsx)(G,{className:"h-5 w-5"})})]})]}),le?(0,e.jsx)(Y,{view:s,itemCount:20}):o.results.length>0?s==="grid"?(0,e.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:o.results.map(a=>(0,e.jsxs)(E,{className:"flex flex-col",children:[(0,e.jsxs)(U,{className:"p-4 sm:p-6",children:[(0,e.jsx)($,{className:"text-xl font-bold mb-4",children:a.name}),a.attachments.length>0&&(0,e.jsx)("img",{src:y(a.attachments)?.file?.url,alt:y(a.attachments)?.label||"",className:"w-full h-48 object-cover rounded-md"})]}),(0,e.jsxs)(M,{className:"p-4 sm:p-6 pt-0 flex-grow",children:[(0,e.jsx)("p",{className:"text-base text-muted-foreground",children:a.description||"Aucune description"}),(0,e.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,e.jsx)(q,{className:"h-5 w-5 mr-2"}),(0,e.jsxs)("span",{className:"text-base",children:[a.members.length," membres"]})]})]}),(0,e.jsxs)(I,{className:"p-4 sm:p-6 flex flex-wrap gap-2",children:[l?.view&&(0,e.jsx)(t,{variant:"outline",className:"flex-1 h-12 text-base",onClick:()=>m(`/o/departments/view/${a.id}`),children:(0,e.jsx)(u,{className:"h-5 w-5 mr-2"})}),l?.edit&&(0,e.jsx)(t,{variant:"outline",className:"flex-1 h-12 text-base",onClick:()=>m(`/o/departments/edit/${a.id}`),children:(0,e.jsx)(p,{className:"h-5 w-5 mr-2"})}),l?.delete&&(0,e.jsxs)(b,{children:[(0,e.jsx)(f,{asChild:!0,children:(0,e.jsx)(t,{variant:"outline",className:"flex-1 h-12 text-base",children:(0,e.jsx)(h,{className:"h-5 w-5 mr-2"})})}),(0,e.jsxs)(w,{className:"sm:max-w-[425px]",children:[(0,e.jsxs)(N,{children:[(0,e.jsx)(C,{className:"text-xl",children:"\xCAtes-vous s\xFBr ?"}),(0,e.jsx)(D,{className:"text-base",children:"Cette action ne peut pas \xEAtre annul\xE9e. Cela supprimera d\xE9finitivement le departement."})]}),(0,e.jsxs)(v,{className:"gap-3 sm:gap-0",children:[(0,e.jsx)(T,{className:"h-12 text-base",children:"Annuler"}),(0,e.jsx)(A,{onClick:()=>{k.submit({id:a.id},{method:"delete",action:"/o/departments"})},className:"h-12 text-base",children:"Supprimer"})]})]})]})]})]},a.id))}):(0,e.jsx)("div",{className:"rounded-lg border overflow-x-auto",children:(0,e.jsxs)(Q,{children:[(0,e.jsx)(W,{children:(0,e.jsxs)(x,{children:[(0,e.jsx)(r,{className:"text-base",children:"Nom"}),(0,e.jsx)(r,{className:"text-base hidden sm:table-cell",children:"Manager"}),(0,e.jsx)(r,{className:"text-base hidden sm:table-cell",children:"Pi\xE8ces Jointes"}),(0,e.jsx)(r,{className:"text-base hidden sm:table-cell",children:"Membres"}),(0,e.jsx)(r,{className:"text-base hidden lg:table-cell",children:"Description"}),(0,e.jsx)(r,{className:"text-base text-right",children:"Actions"})]})}),(0,e.jsx)(X,{children:o.results.map(a=>(0,e.jsxs)(x,{children:[(0,e.jsx)(i,{className:"font-medium text-base",children:a.name}),(0,e.jsxs)(i,{className:"text-base hidden sm:table-cell",children:[a.manager?.firstName," ",a.manager?.lastName]}),(0,e.jsx)(i,{className:"text-base hidden sm:table-cell",children:a.attachments?.length}),(0,e.jsxs)(i,{className:"text-base hidden sm:table-cell",children:[a.members?.length," membres"]}),(0,e.jsx)(i,{className:"text-base hidden lg:table-cell",children:a.description||"Aucune description"}),(0,e.jsx)(i,{children:(0,e.jsxs)("div",{className:"flex justify-end gap-2",children:[l?.view&&(0,e.jsx)(t,{variant:"ghost",onClick:()=>m(`/o/departments/view/${a.id}`),className:"h-11 w-11",children:(0,e.jsx)(u,{className:"h-5 w-5"})}),l?.edit&&(0,e.jsx)(t,{variant:"ghost",onClick:()=>m(`/o/departments/edit/${a.id}`),className:"h-11 w-11",children:(0,e.jsx)(p,{className:"h-5 w-5"})}),l?.delete&&(0,e.jsxs)(b,{children:[(0,e.jsx)(f,{asChild:!0,children:(0,e.jsx)(t,{variant:"ghost",className:"h-11 w-11",children:(0,e.jsx)(h,{className:"h-5 w-5"})})}),(0,e.jsxs)(w,{className:"p-4 sm:p-6 max-w-[90vw] sm:max-w-[425px]",children:[(0,e.jsxs)(N,{children:[(0,e.jsx)(C,{className:"text-lg sm:text-xl",children:"\xCAtes-vous s\xFBr ?"}),(0,e.jsx)(D,{className:"text-base",children:"Cette action ne peut pas \xEAtre annul\xE9e. Cela supprimera d\xE9finitivement le d\xE9partement."})]}),(0,e.jsxs)(v,{className:"gap-3",children:[(0,e.jsx)(T,{className:"h-11 text-base",children:"Annuler"}),(0,e.jsx)(A,{onClick:()=>{k.submit({id:a.id},{method:"delete",action:"/o/departments"})},className:"h-11 text-base",children:"Supprimer"})]})]})]})]})})]},a.id))})]})}):(0,e.jsx)(K,{type:"d\xE9partements",createLink:"/o/departments/new",view:s}),o.totalResults>0&&(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-3",children:[(0,e.jsx)(t,{variant:"outline",onClick:()=>d({search:n,view:s,page:(g-1).toString()}),disabled:g===1,className:"w-full sm:w-auto h-11 text-base",children:"Pr\xE9c\xE9dent"}),(0,e.jsx)(t,{variant:"outline",onClick:()=>d({search:n,view:s,page:(g+1).toString()}),disabled:o.results.length<20,className:"w-full sm:w-auto h-11 text-base",children:"Suivant"})]})]})}export{_ as default};
