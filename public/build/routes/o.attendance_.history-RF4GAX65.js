import{a as M,b as _}from"/build/_shared/chunk-23DJ3EVX.js";import{a as U,b as W,c as E,d as G}from"/build/_shared/chunk-7KTFRF5Z.js";import{t as w}from"/build/_shared/chunk-NN26KXOX.js";import{a as Z}from"/build/_shared/chunk-NX6ZEDKE.js";import{a as g,b as v,c as N}from"/build/_shared/chunk-MRGZKXS3.js";import{a as O,b as j,c as $,d as h,e as m,f as n}from"/build/_shared/chunk-IEDNE26R.js";import"/build/_shared/chunk-Q6K63OHD.js";import{a as Y}from"/build/_shared/chunk-6JFOYO3V.js";import{a as I}from"/build/_shared/chunk-OFTXZR4P.js";import{a as F}from"/build/_shared/chunk-WZRQ3RQI.js";import"/build/_shared/chunk-5KYGR3MA.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as X}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as x,e as b}from"/build/_shared/chunk-G5A27C7O.js";import{h as i}from"/build/_shared/chunk-NVGVVEPD.js";import{V as L,W as H,j as B,ra as D}from"/build/_shared/chunk-PNJDYZ5P.js";import{h as S,p as A}from"/build/_shared/chunk-GTSSQFHM.js";import{a as Q,b as P}from"/build/_shared/chunk-BBTKOQ57.js";import{e as r}from"/build/_shared/chunk-UED2Q7CE.js";var y=r(Q());var ee=r(X()),te=r(Z()),ae=r(Y());var e=r(P());var z=l=>{let c={present:"bg-green-100 text-green-800",absent:"bg-red-100 text-red-800",onBreak:"bg-blue-100 text-blue-800"},d={present:"Pr\xE9sent",absent:"Absent",onBreak:"En pause"};return(0,e.jsx)(I,{className:c[l],children:d[l]})};function V(){let{attendanceRecords:l,can:c}=A(),[d,q]=S(),T=d.get("date"),C=T?M(T):new Date,[p,k]=(0,y.useState)("grid"),[u,J]=(0,y.useState)(""),R=l.filter(t=>{let a=t.user;return a?a.firstName.toLowerCase().includes(u.toLowerCase())||a.lastName.toLowerCase().includes(u.toLowerCase()):!1}),f=(()=>{let t=l.length;if(t===0)return{presentRate:0,absentRate:0,onBreakRate:0};let a=l.filter(o=>o.status==="present").length,s=l.filter(o=>o.status==="absent").length,K=l.filter(o=>o.status==="onBreak").length;return{presentRate:a/t*100,absentRate:s/t*100,onBreakRate:K/t*100}})();return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:py-10",children:[(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[(0,e.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold",children:"Historique des Pointages"}),c.filter&&(0,e.jsx)("div",{className:"w-full sm:w-auto",children:(0,e.jsxs)(W,{children:[(0,e.jsx)(E,{asChild:!0,children:(0,e.jsxs)(i,{variant:"outline",className:"w-full sm:w-[280px] h-11 justify-start text-left text-base font-normal",children:[(0,e.jsx)(B,{className:"mr-2 h-5 w-5"}),w(C,"d MMMM yyyy",{locale:_})]})}),(0,e.jsx)(G,{className:"w-auto p-0",align:"start",children:(0,e.jsx)(U,{mode:"single",selected:C,onSelect:t=>{t&&q({date:w(t,"yyyy-MM-dd")})},initialFocus:!0,className:"text-base"})})]})})]}),(0,e.jsx)("div",{className:"grid gap-4 mb-6",children:(0,e.jsx)(x,{children:(0,e.jsx)(b,{className:"p-4 sm:p-6",children:(0,e.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsxs)("h3",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-green-600",children:[f.presentRate.toFixed(1),"%"]}),(0,e.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Taux de pr\xE9sence"})]}),(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsxs)("h3",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-red-600",children:[f.absentRate.toFixed(1),"%"]}),(0,e.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Absences"})]}),(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsxs)("h3",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-blue-600",children:[f.onBreakRate.toFixed(1),"%"]}),(0,e.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground",children:"En pause"})]})]})})})}),(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[(0,e.jsx)("div",{className:"w-full sm:w-auto",children:(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)(D,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 transform text-muted-foreground"}),(0,e.jsx)(F,{placeholder:"Rechercher un employ\xE9...",className:"pl-10 h-11 text-base w-full sm:w-[300px]",value:u,onChange:t=>J(t.target.value)})]})}),(0,e.jsxs)("div",{className:"flex gap-2",children:[(0,e.jsx)(i,{variant:p==="grid"?"default":"outline",size:"icon",onClick:()=>k("grid"),className:"h-11 w-11",children:(0,e.jsx)(L,{className:"h-5 w-5"})}),(0,e.jsx)(i,{variant:p==="table"?"default":"outline",size:"icon",onClick:()=>k("table"),className:"h-11 w-11",children:(0,e.jsx)(H,{className:"h-5 w-5"})})]})]}),p==="grid"?(0,e.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:R.map(t=>{let a=t.user;return(0,e.jsx)(x,{children:(0,e.jsx)(b,{className:"p-4 sm:p-6",children:(0,e.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,e.jsxs)(g,{className:"h-20 w-20 sm:h-24 sm:w-24 mb-4",children:[(0,e.jsx)(v,{src:t?.user.avatar?.file?.url,alt:`${a.firstName} ${a.lastName}`}),(0,e.jsxs)(N,{className:"text-lg sm:text-xl",children:[a.firstName[0],a.lastName[0]]})]}),(0,e.jsxs)("h3",{className:"text-base sm:text-lg font-semibold",children:[a.firstName," ",a.lastName]}),(0,e.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground mb-4",children:a.role}),z(t.status),(0,e.jsxs)("div",{className:"mt-4 w-full space-y-3",children:[(0,e.jsxs)("div",{className:"flex justify-between text-sm sm:text-base",children:[(0,e.jsx)("span",{className:"text-muted-foreground",children:"Arriv\xE9e:"}),(0,e.jsx)("span",{children:t.entries.find(s=>s.type==="checkIn")?.timestamp?new Date(t.entries.find(s=>s.type==="checkIn").timestamp).toLocaleTimeString():"---"})]}),(0,e.jsxs)("div",{className:"flex justify-between text-sm sm:text-base",children:[(0,e.jsx)("span",{className:"text-muted-foreground",children:"D\xE9part:"}),(0,e.jsx)("span",{children:t.entries.find(s=>s.type==="checkOut")?.timestamp?new Date(t.entries.find(s=>s.type==="checkOut").timestamp).toLocaleTimeString():"---"})]}),(0,e.jsxs)("div",{className:"flex justify-between text-sm sm:text-base",children:[(0,e.jsx)("span",{className:"text-muted-foreground",children:"Total:"}),(0,e.jsx)("span",{children:t.totalWorkTime?`${(t.totalWorkTime/60).toFixed(2)} heures`:"---"})]})]})]})})},t._id)})}):(0,e.jsx)("div",{className:"rounded-lg border overflow-x-auto",children:(0,e.jsxs)(O,{children:[(0,e.jsx)(j,{children:(0,e.jsxs)(h,{children:[(0,e.jsx)(m,{className:"text-base",children:"Employ\xE9"}),(0,e.jsx)(m,{className:"text-base",children:"Statut"}),(0,e.jsx)(m,{className:"text-base",children:"Arriv\xE9e"}),(0,e.jsx)(m,{className:"text-base",children:"D\xE9part"}),(0,e.jsx)(m,{className:"text-base",children:"Total (H)"})]})}),(0,e.jsx)($,{children:R.map(t=>{let a=t.user;return(0,e.jsxs)(h,{children:[(0,e.jsx)(n,{children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsxs)(g,{className:"h-10 w-10 sm:h-12 sm:w-12 mr-3",children:[(0,e.jsx)(v,{src:a.avatar?.file?.url,alt:`${a.firstName} ${a.lastName}`}),(0,e.jsxs)(N,{className:"text-base",children:[a.firstName[0],a.lastName[0]]})]}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{className:"font-medium text-base",children:[a.firstName," ",a.lastName]}),(0,e.jsx)("div",{className:"text-sm sm:text-base text-muted-foreground",children:a.role})]})]})}),(0,e.jsx)(n,{className:"text-base",children:z(t.status)}),(0,e.jsx)(n,{className:"text-base",children:t.entries.find(s=>s.type==="checkIn")?.timestamp?new Date(t.entries.find(s=>s.type==="checkIn").timestamp).toLocaleTimeString():"---"}),(0,e.jsx)(n,{className:"text-base",children:t.entries.find(s=>s.type==="checkOut")?.timestamp?new Date(t.entries.find(s=>s.type==="checkOut").timestamp).toLocaleTimeString():"---"}),(0,e.jsx)(n,{className:"text-base",children:t.totalWorkTime?`${(t.totalWorkTime/60).toFixed(2)} heures`:"---"})]},t._id)})})]})})]})}export{V as default};
