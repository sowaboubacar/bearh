import{a as oe}from"/build/_shared/chunk-3DB3GQTY.js";import{a as j}from"/build/_shared/chunk-XDNDK56N.js";import"/build/_shared/chunk-KAUQO2FD.js";import"/build/_shared/chunk-7ZNTUDLC.js";import{a as se}from"/build/_shared/chunk-6JFOYO3V.js";import{a as B}from"/build/_shared/chunk-L2TBXS32.js";import{a as U}from"/build/_shared/chunk-A762UFCP.js";import"/build/_shared/chunk-RHTBOEYQ.js";import"/build/_shared/chunk-HNF2M344.js";import"/build/_shared/chunk-IQV4D3C7.js";import"/build/_shared/chunk-H33OI7YH.js";import{a as R}from"/build/_shared/chunk-JBQJJPFB.js";import{b as r}from"/build/_shared/chunk-SS7AQOQ3.js";import{a as W,b as q,c as I}from"/build/_shared/chunk-2MHSPA7K.js";import"/build/_shared/chunk-M3TRH43M.js";import{a as o}from"/build/_shared/chunk-WZRQ3RQI.js";import"/build/_shared/chunk-XNZ6DBKW.js";import"/build/_shared/chunk-YYMCCM4Y.js";import{a as re}from"/build/_shared/chunk-35S5HMBT.js";import"/build/_shared/chunk-2BPW44Z6.js";import"/build/_shared/chunk-5KYGR3MA.js";import"/build/_shared/chunk-KLKNQD3Q.js";import"/build/_shared/chunk-PGURRWG5.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as ae}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as c,b as C,c as F,e as T,f as k}from"/build/_shared/chunk-G5A27C7O.js";import{h as d}from"/build/_shared/chunk-NVGVVEPD.js";import{Ea as H,X as E,b as D,oa as $,t as L}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as A,i as N,k as v,l as S,p as y,q as w}from"/build/_shared/chunk-GTSSQFHM.js";import{a as te,b as x}from"/build/_shared/chunk-BBTKOQ57.js";import{e as m}from"/build/_shared/chunk-UED2Q7CE.js";var i=m(te()),me=m(re());var ie=m(oe()),ne=m(ae()),le=m(se());var e=m(x());function G(){let{users:M}=y(),h=w(),b=A(),[g,P]=(0,i.useState)(!1),[n,u]=(0,i.useState)([]),[O,J]=(0,i.useState)([]),[z,_]=(0,i.useState)(!1),K=()=>{u([...n,{date:"",startAt:"",endAt:"",restShouldStartAt:"",restShouldEndAt:""}])},Q=t=>{u(n.filter((a,s)=>s!==t))},l=(t,a,s)=>{let p=[...n];p[t]={...p[t],[a]:s},u(p)},[f,V]=(0,i.useState)([]),X=t=>{V(a=>a.includes(t)?a.filter(s=>s!==t):[...a,t])},Y=N(),Z=t=>{t.preventDefault(),P(!0);let a=new FormData(t.currentTarget);O.forEach(s=>{a.append("attachments",s.id)}),Y(a,{method:"post"})},ee=t=>{J(t)};return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:py-10",children:[(0,e.jsx)(d,{asChild:!0,variant:"outline",className:"mb-6 h-11 text-base",children:(0,e.jsxs)(v,{prefetch:"intent",to:"/o/hour-group",children:[(0,e.jsx)(D,{className:"mr-2 h-5 w-5"}),"Retour \xE0 la liste"]})}),(0,e.jsxs)(c,{className:"max-w-4xl mx-auto",children:[(0,e.jsx)(C,{className:"p-4 sm:p-6",children:(0,e.jsx)(F,{className:"text-xl sm:text-2xl lg:text-3xl font-bold",children:"Nouveau Programmes"})}),(0,e.jsxs)(S,{method:"post",onSubmit:Z,children:[(0,e.jsxs)(T,{className:"p-4 sm:p-6 space-y-6",children:[h?.error&&(0,e.jsxs)(W,{variant:"destructive",children:[(0,e.jsx)(L,{className:"h-5 w-5"}),(0,e.jsx)(q,{className:"text-base font-medium",children:"Erreur"}),(0,e.jsx)(I,{className:"text-base",children:h.error})]}),(0,e.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,e.jsx)(r,{htmlFor:"note",className:"text-base font-medium",children:"Note"}),(0,e.jsx)(B,{id:"note",name:"note",className:"min-h-[120px] text-base p-3"})]}),(0,e.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,e.jsx)(r,{htmlFor:"startAt",className:"text-base font-medium",children:"Date de d\xE9but"}),(0,e.jsx)(o,{type:"date",id:"startAt",name:"startAt",required:!0,className:"h-11 text-base"})]}),(0,e.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,e.jsx)(r,{htmlFor:"endAt",className:"text-base font-medium",children:"Date de fin"}),(0,e.jsx)(o,{type:"date",id:"endAt",name:"endAt",required:!0,className:"h-11 text-base"})]}),(0,e.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,e.jsx)(r,{htmlFor:"restShouldStartAt",className:"text-base font-medium",children:"Heure de d\xE9but de pause par d\xE9faut"}),(0,e.jsx)(o,{type:"time",id:"restShouldStartAt",name:"restShouldStartAt",className:"h-11 text-base"})]}),(0,e.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,e.jsx)(r,{htmlFor:"restShouldEndAt",className:"text-base font-medium",children:"Heure de fin de pause par d\xE9faut"}),(0,e.jsx)(o,{type:"time",id:"restShouldEndAt",name:"restShouldEndAt",className:"h-11 text-base"})]}),(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsx)(r,{className:"text-base font-medium",children:"Horaires de travail"}),n.map((t,a)=>(0,e.jsx)(c,{className:"p-4",children:(0,e.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(r,{htmlFor:`workTime-${a}-date`,className:"text-base font-medium",children:"Date"}),(0,e.jsx)(o,{type:"date",id:`workTime-${a}-date`,value:t.date,onChange:s=>l(a,"date",s.target.value),required:!0,className:"h-11 text-base"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(r,{htmlFor:`workTime-${a}-startAt`,className:"text-base font-medium",children:"D\xE9but"}),(0,e.jsx)(o,{type:"time",id:`workTime-${a}-startAt`,value:t.startAt,onChange:s=>l(a,"startAt",s.target.value),required:!0,className:"h-11 text-base"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(r,{htmlFor:`workTime-${a}-endAt`,className:"text-base font-medium",children:"Fin"}),(0,e.jsx)(o,{type:"time",id:`workTime-${a}-endAt`,value:t.endAt,onChange:s=>l(a,"endAt",s.target.value),required:!0,className:"h-11 text-base"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(r,{htmlFor:`workTime-${a}-restShouldStartAt`,className:"text-base font-medium",children:"D\xE9but pause"}),(0,e.jsx)(o,{type:"time",id:`workTime-${a}-restShouldStartAt`,value:t.restShouldStartAt,onChange:s=>l(a,"restShouldStartAt",s.target.value),className:"h-11 text-base"})]}),(0,e.jsxs)("div",{className:"flex items-end",children:[(0,e.jsxs)("div",{className:"flex-1 mr-2",children:[(0,e.jsx)(r,{htmlFor:`workTime-${a}-restShouldEndAt`,className:"text-base font-medium",children:"Fin pause"}),(0,e.jsx)(o,{type:"time",id:`workTime-${a}-restShouldEndAt`,value:t.restShouldEndAt,onChange:s=>l(a,"restShouldEndAt",s.target.value),className:"h-11 text-base"})]}),(0,e.jsx)(d,{type:"button",variant:"destructive",onClick:()=>Q(a),className:"h-11 w-11",children:(0,e.jsx)(H,{className:"h-5 w-5"})})]})]})},a)),(0,e.jsxs)(d,{type:"button",onClick:K,className:"w-full sm:w-auto h-11 text-base",children:[(0,e.jsx)($,{className:"mr-2 h-5 w-5"}),"Ajouter un horaire"]})]}),(0,e.jsx)("input",{type:"hidden",name:"workTimes",value:JSON.stringify(n)}),(0,e.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,e.jsx)(r,{className:"text-base font-medium",children:"Membres de l'\xE9quipe"}),(0,e.jsx)(c,{children:(0,e.jsx)(j,{className:"h-72 sm:h-80 w-full rounded-md border p-4",children:M.map(t=>(0,e.jsxs)("div",{className:"flex items-center space-x-3 py-3 sm:py-4",children:[(0,e.jsx)(R,{id:`user-${t.id}`,checked:f.includes(t.id),onCheckedChange:()=>X(t.id),className:"h-5 w-5 sm:h-6 sm:w-6"}),(0,e.jsxs)("label",{htmlFor:`user-${t.id}`,className:"text-base font-medium cursor-pointer",children:[t.firstName," ",t.lastName]}),f.includes(t.id)&&(0,e.jsx)("input",{type:"hidden",name:"members",value:t.id})]},t.id))})})]}),(0,e.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,e.jsx)(r,{htmlFor:"attachments",className:"text-base font-medium",children:"Images & Pi\xE8ces jointes"}),(0,e.jsx)(U,{onSelect:ee,multiple:!0,accept:"image/*,application/pdf",maxSize:5*1024*1024,onBusyStateChange:_,className:"w-full"})]})]}),(0,e.jsx)(k,{className:"p-4 sm:p-6",children:(0,e.jsx)(d,{type:"submit",className:"w-full h-11 text-base",disabled:g||z||b.state==="submitting",children:g||b.state==="submitting"?(0,e.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,e.jsx)(E,{className:"h-5 w-5 animate-spin"}),"Cr\xE9ation en cours..."]}):"Cr\xE9er le groupe d'heures"})})]})]})]})}export{G as default};
