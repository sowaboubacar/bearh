import{a as pe}from"/build/_shared/chunk-KOQ6QM7E.js";import{a as Y,b as te}from"/build/_shared/chunk-ABDDDOIB.js";import{a as Z,b as _,c as ee,d as N,e as n,f as l}from"/build/_shared/chunk-IEDNE26R.js";import"/build/_shared/chunk-M3TRH43M.js";import{a as W}from"/build/_shared/chunk-WZRQ3RQI.js";import{a as v,b,c as C,d as D,e as T,f as y,g as L,h as B}from"/build/_shared/chunk-KLKNQD3Q.js";import"/build/_shared/chunk-PGURRWG5.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as ue}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as U,b as M,c as V,e as I,f as J}from"/build/_shared/chunk-G5A27C7O.js";import{h as a}from"/build/_shared/chunk-NVGVVEPD.js";import{Ea as x,K as w,Q as G,W as z,oa as K,ra as Q,w as X,xa as f,z as q}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as A,h as P,i as H,k as r,l as j,p as E,r as $}from"/build/_shared/chunk-GTSSQFHM.js";import{a as de,b as O}from"/build/_shared/chunk-BBTKOQ57.js";import{e as m}from"/build/_shared/chunk-UED2Q7CE.js";var ae=m(de());var ge=m(pe());var he=m(ue());var e=m(O());function se(){let{reports:o,search:d,view:ie,page:c,limit:h,can:i}=E(),[u,oe]=(0,ae.useState)(!1),[re,p]=P(),we=H(),ne=$(),le=A().state==="loading",s=re.get("view")||ie,g=(t,k)=>{oe(!0),ne.submit({id:t,action:k},{method:"post"})},R=t=>new Date(t).toLocaleDateString("fr-FR"),F=t=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"XOF"}).format(t),ce=t=>{t.preventDefault();let me=new FormData(t.currentTarget).get("search");p({search:me,view:s})},S=t=>{p({search:d,view:t})};return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8 space-y-6",children:[(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,e.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold",children:"Notes de frais"}),i?.create&&(0,e.jsx)(a,{asChild:!0,className:"w-full sm:w-auto h-11 text-base",children:(0,e.jsxs)(r,{prefetch:"intent",to:"/o/expense-report/new",children:[(0,e.jsx)(K,{className:"mr-2 h-5 w-5"}),"Nouvelle note de frais"]})})]}),(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,e.jsxs)(j,{onSubmit:ce,className:"flex w-full sm:w-auto items-center gap-2",children:[(0,e.jsx)(W,{type:"search",name:"search",placeholder:"Rechercher des notes de frais...",defaultValue:d,className:"h-11 text-base w-full sm:w-[300px]"}),(0,e.jsx)(a,{type:"submit",className:"h-11 w-11",children:(0,e.jsx)(Q,{className:"h-5 w-5"})})]}),(0,e.jsxs)("div",{className:"flex gap-2 w-full sm:w-auto",children:[(0,e.jsx)(a,{variant:s==="grid"?"default":"outline",onClick:()=>S("grid"),className:"flex-1 sm:flex-none h-11 w-11",children:(0,e.jsx)(G,{className:"h-5 w-5"})}),(0,e.jsx)(a,{variant:s==="list"?"default":"outline",onClick:()=>S("list"),className:"flex-1 sm:flex-none h-11 w-11",children:(0,e.jsx)(z,{className:"h-5 w-5"})})]})]}),le?(0,e.jsx)(te,{view:s,itemCount:h}):o.results.length>0?s==="grid"?(0,e.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:o.results.map(t=>(0,e.jsxs)(U,{children:[(0,e.jsx)(M,{className:"p-4 sm:p-6",children:(0,e.jsxs)(V,{className:"text-lg sm:text-xl",children:["Note de frais du ",R(t.submissionDate)]})}),(0,e.jsxs)(I,{className:"p-4 sm:p-6 pt-0 space-y-3",children:[(0,e.jsxs)("p",{className:"text-base text-muted-foreground",children:["Montant total : ",F(t.totalAmount)]}),(0,e.jsxs)("p",{className:"text-base text-muted-foreground",children:["Statut : ",t.status]}),(0,e.jsxs)("p",{className:"text-base text-muted-foreground",children:["Pi\xE8ces Jointes : ",t.attachments.length]})]}),(0,e.jsxs)(J,{className:"p-4 sm:p-6 flex justify-between gap-2",children:[i?.view&&(0,e.jsx)(a,{asChild:!0,variant:"outline",className:"h-11 w-11",children:(0,e.jsx)(r,{prefetch:"intent",to:`/o/expense-report/view/${t.id}`,children:(0,e.jsx)(w,{className:"h-5 w-5"})})}),i?.edit&&(0,e.jsx)(a,{asChild:!0,variant:"outline",className:"h-11 w-11",children:(0,e.jsx)(r,{prefetch:"intent",to:`/o/expense-report/edit/${t.id}`,children:(0,e.jsx)(f,{className:"h-5 w-5"})})}),i?.delete&&(0,e.jsxs)(v,{children:[(0,e.jsx)(b,{asChild:!0,children:(0,e.jsx)(a,{variant:"destructive",className:"h-11 w-11",children:(0,e.jsx)(x,{className:"h-5 w-5"})})}),(0,e.jsxs)(D,{className:"sm:max-w-[425px]",children:[(0,e.jsxs)(T,{children:[(0,e.jsx)(L,{className:"text-lg sm:text-xl",children:"\xCAtes-vous s\xFBr de vouloir supprimer cette note de frais ?"}),(0,e.jsx)(B,{className:"text-base",children:"Cette action ne peut pas \xEAtre annul\xE9e."})]}),(0,e.jsxs)(y,{className:"gap-3",children:[(0,e.jsx)(C,{asChild:!0,children:(0,e.jsx)(a,{variant:"outline",className:"h-11 text-base",children:"Annuler"})}),(0,e.jsx)(a,{variant:"destructive",onClick:()=>g(t.id,"delete"),disabled:u,className:"h-11 text-base",children:u?"Suppression...":"Supprimer"})]})]})]})]})]},t.id))}):(0,e.jsx)("div",{className:"rounded-lg border overflow-x-auto",children:(0,e.jsxs)(Z,{children:[(0,e.jsx)(_,{children:(0,e.jsxs)(N,{children:[(0,e.jsx)(n,{className:"text-base whitespace-nowrap",children:"Date de soumission"}),(0,e.jsx)(n,{className:"text-base whitespace-nowrap hidden sm:table-cell",children:"Montant total"}),(0,e.jsx)(n,{className:"text-base whitespace-nowrap hidden sm:table-cell",children:"Statut"}),(0,e.jsx)(n,{className:"text-base whitespace-nowrap hidden sm:table-cell",children:"Pi\xE8ces Jointes"}),(0,e.jsx)(n,{className:"text-base text-right",children:"Actions"})]})}),(0,e.jsx)(ee,{children:o.results.map(t=>(0,e.jsxs)(N,{children:[(0,e.jsx)(l,{className:"font-medium text-base",children:R(t.submissionDate)}),(0,e.jsx)(l,{className:"text-base hidden sm:table-cell",children:F(t.totalAmount)}),(0,e.jsx)(l,{className:"text-base hidden sm:table-cell",children:t.status}),(0,e.jsx)(l,{className:"text-base hidden sm:table-cell",children:t.attachments.length}),(0,e.jsx)(l,{children:(0,e.jsxs)("div",{className:"flex justify-end gap-2",children:[i?.view&&(0,e.jsx)(a,{asChild:!0,variant:"outline",className:"h-11 w-11",children:(0,e.jsx)(r,{prefetch:"intent",to:`/o/expense-report/view/${t.id}`,children:(0,e.jsx)(w,{className:"h-5 w-5"})})}),i?.edit&&(0,e.jsx)(a,{asChild:!0,variant:"outline",className:"h-11 w-11",children:(0,e.jsx)(r,{prefetch:"intent",to:`/o/expense-report/edit/${t.id}`,children:(0,e.jsx)(f,{className:"h-5 w-5"})})}),i?.delete&&(0,e.jsxs)(v,{children:[(0,e.jsx)(b,{asChild:!0,children:(0,e.jsx)(a,{variant:"destructive",className:"h-11 w-11",children:(0,e.jsx)(x,{className:"h-5 w-5"})})}),(0,e.jsxs)(D,{className:"sm:max-w-[425px]",children:[(0,e.jsxs)(T,{children:[(0,e.jsx)(L,{className:"text-lg sm:text-xl",children:"\xCAtes-vous s\xFBr de vouloir supprimer cette note de frais ?"}),(0,e.jsx)(B,{className:"text-base",children:"Cette action ne peut pas \xEAtre annul\xE9e."})]}),(0,e.jsxs)(y,{className:"gap-3",children:[(0,e.jsx)(C,{asChild:!0,children:(0,e.jsx)(a,{variant:"outline",className:"h-11 text-base",children:"Annuler"})}),(0,e.jsx)(a,{variant:"destructive",onClick:()=>g(t.id,"delete"),disabled:u,className:"h-11 text-base",children:u?"Suppression...":"Supprimer"})]})]})]}),t.status==="Pending"&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(a,{variant:"outline",onClick:()=>g(t.id,"approve"),className:"h-11 w-11",children:(0,e.jsx)(X,{className:"h-5 w-5 text-green-500"})}),(0,e.jsx)(a,{variant:"outline",onClick:()=>g(t.id,"reject"),className:"h-11 w-11",children:(0,e.jsx)(q,{className:"h-5 w-5 text-red-500"})})]})]})})]},t.id))})]})}):(0,e.jsx)(Y,{type:"notes de frais",createLink:"/o/expense-report/new",view:s}),o.totalResults>0&&(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4",children:[(0,e.jsx)(a,{onClick:()=>p({search:d,view:s,page:(c-1).toString()}),disabled:c===1,className:"w-full sm:w-auto h-11 text-base",children:"Pr\xE9c\xE9dent"}),(0,e.jsxs)("span",{className:"text-base",children:["Page ",c," sur ",Math.ceil(o.totalResults/h)]}),(0,e.jsx)(a,{onClick:()=>p({search:d,view:s,page:(c+1).toString()}),disabled:c*h>=o.totalResults,className:"w-full sm:w-auto h-11 text-base",children:"Suivant"})]})]})}export{se as default};
