import{a as $}from"/build/_shared/chunk-K42CPUDW.js";import{a as G}from"/build/_shared/chunk-6JFOYO3V.js";import{a as C}from"/build/_shared/chunk-L2TBXS32.js";import{a as I}from"/build/_shared/chunk-A762UFCP.js";import"/build/_shared/chunk-RHTBOEYQ.js";import"/build/_shared/chunk-HNF2M344.js";import"/build/_shared/chunk-IQV4D3C7.js";import"/build/_shared/chunk-H33OI7YH.js";import"/build/_shared/chunk-JBQJJPFB.js";import{b as r}from"/build/_shared/chunk-SS7AQOQ3.js";import{a as L,b as F,c as E}from"/build/_shared/chunk-2MHSPA7K.js";import"/build/_shared/chunk-M3TRH43M.js";import{a as A}from"/build/_shared/chunk-WZRQ3RQI.js";import"/build/_shared/chunk-XNZ6DBKW.js";import"/build/_shared/chunk-YYMCCM4Y.js";import{a as P}from"/build/_shared/chunk-35S5HMBT.js";import"/build/_shared/chunk-2BPW44Z6.js";import"/build/_shared/chunk-5KYGR3MA.js";import"/build/_shared/chunk-KLKNQD3Q.js";import"/build/_shared/chunk-PGURRWG5.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as z}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as b,b as y,c as x,e as N}from"/build/_shared/chunk-G5A27C7O.js";import{h as i}from"/build/_shared/chunk-NVGVVEPD.js";import{X as S,b as w,t as D}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as d,i as p,k as u,l as f,p as h,q as v}from"/build/_shared/chunk-GTSSQFHM.js";import{a as O,b as g}from"/build/_shared/chunk-BBTKOQ57.js";import{e as t}from"/build/_shared/chunk-UED2Q7CE.js";var o=t(O()),J=t(P());var K=t($()),Q=t(G()),X=t(z());var e=t(g());function R(){let{video:s,users:Y,can:T}=h(),n=v(),c=d(),[m,j]=(0,o.useState)(!1),[B,U]=(0,o.useState)(!1),[V,M]=(0,o.useState)(s.attachments||[]),H=p(),W=a=>{j(!0),a.preventDefault();let l=new FormData(a.currentTarget);V.forEach(q=>{l.append("attachments",q.id)}),H(l,{method:"post"})},k=a=>{M(a)};return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8 max-w-4xl",children:[T?.list&&(0,e.jsx)(i,{asChild:!0,variant:"outline",className:"mb-6 h-11 text-base",children:(0,e.jsxs)(u,{prefetch:"intent",to:"/o/enterprise-videos",children:[(0,e.jsx)(w,{className:"mr-2 h-5 w-5"}),"Retour \xE0 la liste"]})}),(0,e.jsxs)(b,{className:"w-full",children:[(0,e.jsx)(y,{className:"p-4 sm:p-6",children:(0,e.jsx)(x,{className:"text-xl sm:text-2xl lg:text-3xl font-bold",children:"Modifier la Connaissance G\xE9nrale"})}),(0,e.jsxs)(N,{className:"p-4 sm:p-6 space-y-6",children:[n?.error&&(0,e.jsxs)(L,{variant:"destructive",className:"mb-6",children:[(0,e.jsx)(D,{className:"h-5 w-5"}),(0,e.jsx)(F,{className:"text-base font-medium",children:"Erreur"}),(0,e.jsx)(E,{className:"text-base",children:n.error})]}),(0,e.jsxs)(f,{method:"post",onSubmit:W,className:"space-y-6",children:[(0,e.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,e.jsx)(r,{htmlFor:"title",className:"text-base font-medium",children:"Titre"}),(0,e.jsx)(A,{id:"title",name:"title",defaultValue:s.title,required:!0,className:"h-11 text-base"})]}),(0,e.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,e.jsx)(r,{htmlFor:"description",className:"text-base font-medium",children:"Description"}),(0,e.jsx)(C,{id:"description",name:"description",defaultValue:s.description,rows:5,className:"min-h-[120px] text-base p-3"})]}),(0,e.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,e.jsx)(r,{htmlFor:"attachments",className:"text-base font-medium",children:"Images & Pi\xE8ces jointes"}),(0,e.jsx)(I,{onSelect:k,multiple:!0,accept:"image/*, video/*,application/pdf",maxSize:5*1024*1024,defaultSelectedDocuments:s.attachments||[],onBusyStateChange:U,className:"w-full"})]}),(0,e.jsx)(i,{type:"submit",className:"w-full h-11 text-base",disabled:m||B||c.state==="submitting",children:m||c.state==="submitting"?(0,e.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,e.jsx)(S,{className:"h-5 w-5 animate-spin"}),"Mise \xE0 jour..."]}):"Mettre \xE0 jour la vid\xE9o"})]})]})]})]})}export{R as default};
