import{a as W,b as _}from"/build/_shared/chunk-ABDDDOIB.js";import{a as X,b as Y,c as Z,d as f,e as s,f as i}from"/build/_shared/chunk-IEDNE26R.js";import{a as m}from"/build/_shared/chunk-OFTXZR4P.js";import{a as me}from"/build/_shared/chunk-SVVENAN2.js";import"/build/_shared/chunk-M3TRH43M.js";import{a as Q}from"/build/_shared/chunk-WZRQ3RQI.js";import{a as N,b as v,c as C,d as D,e as T,f as y,g as L,h as B}from"/build/_shared/chunk-KLKNQD3Q.js";import"/build/_shared/chunk-PGURRWG5.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as de}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as U,b as O,c as V,e as M,f as I}from"/build/_shared/chunk-G5A27C7O.js";import{h as t}from"/build/_shared/chunk-NVGVVEPD.js";import{Ea as w,K as x,Q as q,W as G,k as J,oa as z,ra as K,xa as b}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as k,h as A,i as F,k as n,l as H,p as $,r as E}from"/build/_shared/chunk-GTSSQFHM.js";import{a as ce,b as j}from"/build/_shared/chunk-BBTKOQ57.js";import{e as d}from"/build/_shared/chunk-UED2Q7CE.js";var ee=d(ce());var ue=d(me());var pe=d(de());var e=d(j());function ae(){let{permissionAndLeaves:o,search:u,view:te,page:c,limit:h,can:r}=$(),[p,se]=(0,ee.useState)(!1),[ie,g]=A(),ge=F(),le=E(),re=k().state==="loading",l=ie.get("view")||te,S=a=>{se(!0),le.submit({id:a,action:"delete"},{method:"post"})},oe=a=>{a.preventDefault();let ne=new FormData(a.currentTarget).get("search");g({search:ne,view:l})},P=a=>{g({search:u,view:a})},R=a=>{switch(a){case"Pending":return(0,e.jsx)(m,{variant:"outline",children:"En attente"});case"Approved":return(0,e.jsx)(m,{variant:"success",children:"Approuv\xE9"});case"Rejected":return(0,e.jsx)(m,{variant:"destructive",children:"Rejet\xE9"});default:return(0,e.jsx)(m,{children:a})}};return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8 space-y-6",children:[(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,e.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold",children:"Permissions et Cong\xE9s"}),r?.create&&(0,e.jsx)(t,{asChild:!0,className:"w-full sm:w-auto h-12 text-base",children:(0,e.jsxs)(n,{prefetch:"intent",to:"/o/permission-and-leave/new",children:[(0,e.jsx)(z,{className:"mr-2 h-5 w-5"}),"Nouvelle Demande"]})})]}),(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-4",children:[(0,e.jsxs)(H,{onSubmit:oe,className:"flex items-center gap-2 w-full sm:w-auto sm:flex-1",children:[(0,e.jsx)(Q,{type:"search",name:"search",placeholder:"Rechercher des demandes...",defaultValue:u,className:"h-12 text-base"}),(0,e.jsx)(t,{type:"submit",className:"h-12 w-12 flex-shrink-0",children:(0,e.jsx)(K,{className:"h-5 w-5"})})]}),(0,e.jsxs)("div",{className:"flex gap-2",children:[(0,e.jsx)(t,{variant:l==="grid"?"default":"outline",onClick:()=>P("grid"),className:"flex-1 sm:flex-none h-12",children:(0,e.jsx)(q,{className:"h-5 w-5"})}),(0,e.jsx)(t,{variant:l==="list"?"default":"outline",onClick:()=>P("list"),className:"flex-1 sm:flex-none h-12",children:(0,e.jsx)(G,{className:"h-5 w-5"})})]})]}),re?(0,e.jsx)(_,{view:l,itemCount:h}):o.results.length>0?l==="grid"?(0,e.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:o.results.map(a=>(0,e.jsxs)(U,{children:[(0,e.jsx)(O,{className:"p-4 sm:p-6",children:(0,e.jsxs)(V,{className:"flex items-center text-lg font-bold",children:[(0,e.jsx)(J,{className:"mr-3 h-5 w-5"}),a.user.firstName," ",a.user.lastName]})}),(0,e.jsxs)(M,{className:"p-4 sm:p-6 pt-0 space-y-3",children:[(0,e.jsxs)("p",{className:"text-base text-muted-foreground",children:["Type: ",a.type==="Permission"?"Permission":"Cong\xE9"]}),(0,e.jsxs)("p",{className:"text-base text-muted-foreground",children:["Du: ",new Date(a.startDate).toLocaleString()]}),(0,e.jsxs)("p",{className:"text-base text-muted-foreground",children:["Au: ",new Date(a.endDate).toLocaleString()]}),(0,e.jsxs)("p",{className:"text-base text-muted-foreground",children:["Raison: ",a.reason]}),(0,e.jsxs)("p",{className:"text-base text-muted-foreground",children:["Pi\xE8ces Jointes: ",a.attachments.length]}),(0,e.jsx)("div",{className:"pt-2",children:R(a.status)})]}),(0,e.jsxs)(I,{className:"p-4 sm:p-6 flex justify-between gap-3",children:[r?.view&&(0,e.jsx)(t,{asChild:!0,variant:"outline",className:"flex-1 h-12 text-base",children:(0,e.jsx)(n,{prefetch:"intent",to:`/o/permission-and-leave/view/${a.id}`,children:(0,e.jsx)(x,{className:"mr-2 h-5 w-5"})})}),r?.edit&&(0,e.jsx)(t,{asChild:!0,variant:"outline",className:"flex-1 h-12 text-base",children:(0,e.jsx)(n,{prefetch:"intent",to:`/o/permission-and-leave/edit/${a.id}`,children:(0,e.jsx)(b,{className:"mr-2 h-5 w-5"})})}),r?.delete&&(0,e.jsxs)(N,{children:[(0,e.jsx)(v,{asChild:!0,children:(0,e.jsx)(t,{variant:"destructive",className:"flex-1 h-12 text-base",children:(0,e.jsx)(w,{className:"mr-2 h-5 w-5"})})}),(0,e.jsxs)(D,{className:"sm:max-w-[425px]",children:[(0,e.jsxs)(T,{children:[(0,e.jsx)(L,{className:"text-xl",children:"\xCAtes-vous s\xFBr de vouloir supprimer cette demande ?"}),(0,e.jsx)(B,{className:"text-base",children:"Cette action ne peut pas \xEAtre annul\xE9e."})]}),(0,e.jsxs)(y,{className:"gap-3 sm:gap-0",children:[(0,e.jsx)(C,{asChild:!0,children:(0,e.jsx)(t,{variant:"outline",className:"h-12 text-base",children:"Annuler"})}),(0,e.jsx)(t,{variant:"destructive",onClick:()=>S(a.id),disabled:p,className:"h-12 text-base",children:p?"Suppression...":"Supprimer"})]})]})]})]})]},a.id))}):(0,e.jsx)("div",{className:"rounded-lg border overflow-x-auto",children:(0,e.jsxs)(X,{children:[(0,e.jsx)(Y,{children:(0,e.jsxs)(f,{children:[(0,e.jsx)(s,{className:"text-base whitespace-nowrap",children:"Employ\xE9"}),(0,e.jsx)(s,{className:"text-base whitespace-nowrap hidden sm:table-cell",children:"Type"}),(0,e.jsx)(s,{className:"text-base whitespace-nowrap hidden lg:table-cell",children:"Du"}),(0,e.jsx)(s,{className:"text-base whitespace-nowrap hidden lg:table-cell",children:"Au"}),(0,e.jsx)(s,{className:"text-base whitespace-nowrap hidden md:table-cell",children:"Raison"}),(0,e.jsx)(s,{className:"text-base whitespace-nowrap",children:"Statut"}),(0,e.jsx)(s,{className:"text-base whitespace-nowrap hidden sm:table-cell",children:"Pi\xE8ces Jointes"}),(0,e.jsx)(s,{className:"text-base text-right",children:"Actions"})]})}),(0,e.jsx)(Z,{children:o.results.map(a=>(0,e.jsxs)(f,{children:[(0,e.jsxs)(i,{className:"font-medium text-base",children:[a.user.firstName," ",a.user.lastName]}),(0,e.jsx)(i,{className:"hidden sm:table-cell text-base",children:a.type==="Permission"?"Permission":"Cong\xE9"}),(0,e.jsx)(i,{className:"hidden lg:table-cell text-base",children:new Date(a.startDate).toLocaleString()}),(0,e.jsx)(i,{className:"hidden lg:table-cell text-base",children:new Date(a.endDate).toLocaleString()}),(0,e.jsx)(i,{className:"hidden md:table-cell text-base max-w-xs truncate",children:a.reason}),(0,e.jsx)(i,{className:"text-base",children:R(a.status)}),(0,e.jsx)(i,{className:"hidden sm:table-cell text-base",children:a.attachments.length}),(0,e.jsx)(i,{children:(0,e.jsxs)("div",{className:"flex justify-end gap-2",children:[r?.view&&(0,e.jsx)(t,{asChild:!0,variant:"outline",className:"h-12 text-base px-3",children:(0,e.jsx)(n,{prefetch:"intent",to:`/o/permission-and-leave/view/${a.id}`,children:(0,e.jsx)(x,{className:"h-5 w-5"})})}),r?.edit&&(0,e.jsx)(t,{asChild:!0,variant:"outline",className:"h-12 text-base px-3",children:(0,e.jsx)(n,{prefetch:"intent",to:`/o/permission-and-leave/edit/${a.id}`,children:(0,e.jsx)(b,{className:"h-5 w-5"})})}),r?.delete&&(0,e.jsxs)(N,{children:[(0,e.jsx)(v,{asChild:!0,children:(0,e.jsx)(t,{variant:"destructive",className:"h-12 text-base px-3",children:(0,e.jsx)(w,{className:"h-5 w-5"})})}),(0,e.jsxs)(D,{className:"sm:max-w-[425px]",children:[(0,e.jsxs)(T,{children:[(0,e.jsx)(L,{className:"text-xl",children:"\xCAtes-vous s\xFBr de vouloir supprimer cette demande ?"}),(0,e.jsx)(B,{className:"text-base",children:"Cette action ne peut pas \xEAtre annul\xE9e."})]}),(0,e.jsxs)(y,{className:"gap-3 sm:gap-0",children:[(0,e.jsx)(C,{asChild:!0,children:(0,e.jsx)(t,{variant:"outline",className:"h-12 text-base",children:"Annuler"})}),(0,e.jsx)(t,{variant:"destructive",onClick:()=>S(a.id),disabled:p,className:"h-12 text-base",children:p?"Suppression...":"Supprimer"})]})]})]})]})})]},a.id))})]})}):(0,e.jsx)(W,{type:"permissions et cong\xE9s",createLink:"/o/permission-and-leave/new",view:l}),o.totalResults>0&&(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4",children:[(0,e.jsx)(t,{onClick:()=>g({search:u,view:l,page:(c-1).toString()}),disabled:c===1,className:"w-full sm:w-auto h-12 text-base",children:"Pr\xE9c\xE9dent"}),(0,e.jsxs)("span",{className:"text-base",children:["Page ",c," sur"," ",Math.ceil(o.totalResults/h)]}),(0,e.jsx)(t,{onClick:()=>g({search:u,view:l,page:(c+1).toString()}),disabled:c*h>=o.totalResults,className:"w-full sm:w-auto h-12 text-base",children:"Suivant"})]})]})}export{ae as default};
