import{a as G}from"/build/_shared/chunk-FGQ3HQSB.js";import{a as R,b as A}from"/build/_shared/chunk-ABDDDOIB.js";import{a as B,b as H,c as P,d as u,e as l,f as i}from"/build/_shared/chunk-IEDNE26R.js";import{a as $}from"/build/_shared/chunk-OFTXZR4P.js";import"/build/_shared/chunk-M3TRH43M.js";import{a as D}from"/build/_shared/chunk-WZRQ3RQI.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as q}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as N,b,c as y,e as C,f as T}from"/build/_shared/chunk-G5A27C7O.js";import{h as s}from"/build/_shared/chunk-NVGVVEPD.js";import{K as L,Q as F,W as E,ra as S}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as f,h as v,k as g,l as w,p as x}from"/build/_shared/chunk-GTSSQFHM.js";import{b as h}from"/build/_shared/chunk-BBTKOQ57.js";import{e as m}from"/build/_shared/chunk-UED2Q7CE.js";var z=m(q()),J=m(G());var e=m(h());function M(){let{evaluations:r,search:n,view:j,page:o,limit:d,can:I}=x(),[O,c]=v(),U=f().state==="loading",t=O.get("view")||j,K=a=>{a.preventDefault();let k=new FormData(a.currentTarget).get("search");c({search:k,view:t})},p=a=>{c({search:n,view:a})};return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8 space-y-6",children:[(0,e.jsx)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:(0,e.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold",children:"Inventaire des Evaluations"})}),(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-4",children:[(0,e.jsxs)(w,{onSubmit:K,className:"flex items-center gap-2 w-full sm:w-auto sm:flex-1",children:[(0,e.jsx)(D,{type:"search",name:"search",placeholder:"Rechercher dans l'inventaire des evaluations...",defaultValue:n,className:"h-12 text-base"}),(0,e.jsx)(s,{type:"submit",className:"h-12 w-12 flex-shrink-0",children:(0,e.jsx)(S,{className:"h-5 w-5"})})]}),(0,e.jsxs)("div",{className:"flex gap-2",children:[(0,e.jsx)(s,{variant:t==="grid"?"default":"outline",onClick:()=>p("grid"),className:"flex-1 sm:flex-none h-12",children:(0,e.jsx)(F,{className:"h-5 w-5"})}),(0,e.jsx)(s,{variant:t==="list"?"default":"outline",onClick:()=>p("list"),className:"flex-1 sm:flex-none h-12",children:(0,e.jsx)(E,{className:"h-5 w-5"})})]})]}),U?(0,e.jsx)(A,{view:t,itemCount:d}):r?.results?.length>0?t==="grid"?(0,e.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:r?.results?.map(a=>(0,e.jsxs)(N,{children:[(0,e.jsx)(b,{className:"p-4 sm:p-6",children:(0,e.jsx)(y,{className:"flex items-center text-lg font-bold",children:(0,e.jsxs)("div",{className:"space-y-1",children:[(0,e.jsxs)("div",{children:["Evaluations de ",a.user?.firstName," ",a.user?.lastName]}),(0,e.jsxs)("div",{className:"text-base font-normal text-muted-foreground",children:["Evalu\xE9 le"," ",new Date(a.createdAt).toLocaleString()]}),(0,e.jsxs)("div",{className:"text-base font-normal text-muted-foreground",children:["Par ",a.evaluator?.firstName," ",a.evaluator?.lastName]})]})})}),(0,e.jsx)(C,{className:"p-4 sm:p-6 pt-0 space-y-6 flex items-center",children:(0,e.jsx)("div",{className:"space-y-3",children:(0,e.jsxs)($,{variant:"outline",className:"mt-2 bg-primary/90 text-white px-3 py-1 text-base",children:["Moyenne Des Notes: ",a.meanScore.toFixed(2)]})})}),(0,e.jsxs)(T,{children:["KPI: ",a.kpiForm?.title]}),I?.view&&(0,e.jsx)("div",{className:"flex justify-center mb-4",children:(0,e.jsx)(s,{asChild:!0,variant:"outline",className:"h-12 text-base px-3",children:(0,e.jsxs)(g,{prefetch:"intent",to:`/o/evaluations/view/${a.id}`,children:[(0,e.jsx)(L,{className:"h-5 w-5"})," Details"]})})})]},a.id))}):(0,e.jsx)("div",{className:"rounded-lg border overflow-x-auto",children:(0,e.jsxs)(B,{children:[(0,e.jsx)(H,{children:(0,e.jsxs)(u,{children:[(0,e.jsx)(l,{className:"text-base whitespace-nowrap",children:"Employ\xE9"}),(0,e.jsx)(l,{className:"text-base whitespace-nowrap hidden sm:table-cell",children:"Date Evaluation"}),(0,e.jsx)(l,{className:"text-base whitespace-nowrap hidden sm:table-cell",children:"Evaluateur"}),(0,e.jsx)(l,{className:"text-base whitespace-nowrap",children:"Moyenne Des Notes"})]})}),(0,e.jsx)(P,{children:r.results?.map(a=>(0,e.jsxs)(u,{children:[(0,e.jsxs)(i,{className:"font-medium text-base",children:[a.user.firstName," ",a.user.lastName]}),(0,e.jsx)(i,{className:"hidden sm:table-cell text-base",children:new Date(a.createdAt).toLocaleString()}),(0,e.jsxs)(i,{className:"font-medium text-base",children:[a.evaluator?.firstName," ",a.evaluator?.lastName]}),(0,e.jsx)(i,{className:"text-base",children:a.meanScore.toFixed(2)})]},a.id))})]})}):(0,e.jsx)(R,{type:"Evaluations d'Employ\xE9",view:t}),r.totalResults>0&&(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4",children:[(0,e.jsx)(s,{onClick:()=>c({search:n,view:t,page:(o-1).toString()}),disabled:o===1,className:"w-full sm:w-auto h-12 text-base",children:"Pr\xE9c\xE9dent"}),(0,e.jsxs)("span",{className:"text-base",children:["Page ",o," sur ",Math.ceil(r.totalResults/d)]}),(0,e.jsx)(s,{onClick:()=>c({search:n,view:t,page:(o+1).toString()}),disabled:o*d>=r.totalResults,className:"w-full sm:w-auto h-12 text-base",children:"Suivant"})]})]})}export{M as default};
