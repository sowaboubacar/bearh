import{a as U}from"/build/_shared/chunk-6QXFNV75.js";import{a as K}from"/build/_shared/chunk-M3SJMO64.js";import{a as R}from"/build/_shared/chunk-XDNDK56N.js";import"/build/_shared/chunk-KAUQO2FD.js";import"/build/_shared/chunk-7ZNTUDLC.js";import{a as E}from"/build/_shared/chunk-IR4IBHGU.js";import"/build/_shared/chunk-EJG3POZ2.js";import{a as B}from"/build/_shared/chunk-OFTXZR4P.js";import{a as J}from"/build/_shared/chunk-35S5HMBT.js";import{a as L,b as P,d as S,e as F,f as T,g as j,h as k}from"/build/_shared/chunk-KLKNQD3Q.js";import{b as y}from"/build/_shared/chunk-PGURRWG5.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as M}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as l,b as c,c as m,e as d,f as x}from"/build/_shared/chunk-G5A27C7O.js";import{h as i}from"/build/_shared/chunk-NVGVVEPD.js";import{Ea as C,Oa as A,P as v,Y as w,b,xa as D}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as g,k as o,p as f,r as h}from"/build/_shared/chunk-GTSSQFHM.js";import{a as z,b as N}from"/build/_shared/chunk-BBTKOQ57.js";import{e as s}from"/build/_shared/chunk-UED2Q7CE.js";var H=s(z()),I=s(J());var Q=s(K()),W=s(M());var e=s(N());function $(){let{news:t,can:n}=f(),u=g(),G=h(),[p,O]=(0,H.useState)(!1),V=()=>{O(!0),G.submit({intent:"delete"},{method:"post"})},q=a=>{switch(a){case"Private":return(0,e.jsx)(w,{className:"h-4 w-4"});case"Public":return(0,e.jsx)(v,{className:"h-4 w-4"});case"Shared":return(0,e.jsx)(A,{className:"h-4 w-4"});default:return null}};return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8",children:[n?.list&&(0,e.jsx)(i,{asChild:!0,variant:"outline",className:"mb-6 h-12 text-base",children:(0,e.jsxs)(o,{prefetch:"intent",to:"/o/news",children:[(0,e.jsx)(b,{className:"mr-2 h-5 w-5"}),"Retour \xE0 la liste"]})}),(0,e.jsxs)(l,{className:"max-w-4xl mx-auto",children:[(0,e.jsx)(c,{className:"p-4 sm:p-6",children:(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,e.jsx)(m,{className:"text-xl sm:text-2xl lg:text-3xl font-bold",children:t.title}),(0,e.jsxs)(B,{variant:t.isPublic?"default":"secondary",className:"h-8 text-base px-3 py-1",children:[q(t.isPublic?"Public":"Private"),(0,e.jsx)("span",{className:"ml-2",children:t.isPublic?"Public":"Priv\xE9"})]})]})}),t.attachments?.length>0&&(0,e.jsx)("div",{className:"relative w-full",children:(0,e.jsx)("div",{className:"w-full h-[200px] sm:h-[300px] lg:h-[400px] object-cover relativ  bg-cover bg-center rounded-md mt-4",style:{backgroundImage:`url(${U(t.attachments)?.file?.url})`},children:t.isEmergency==!0&&(0,e.jsx)("div",{className:"absolute top-2 left-2 bg-red-600 text-white px-2 py-1 rounded-md",children:"Urgence"})})}),(0,e.jsxs)(d,{className:"p-4 sm:p-6 space-y-6",children:[(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)("h3",{className:"text-lg sm:text-xl font-semibold",children:"Contenu"}),(0,e.jsx)("p",{className:"text-base leading-relaxed",children:t.content})]}),(0,e.jsxs)("div",{className:"space-y-3",children:[(0,e.jsx)("h3",{className:"text-lg sm:text-xl font-semibold",children:"D\xE9tails"}),(0,e.jsxs)("div",{className:"space-y-2 text-base",children:[(0,e.jsxs)("p",{children:[(0,e.jsx)("span",{className:"font-medium",children:"Type:"})," ",t.type]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("span",{className:"font-medium",children:"Auteur:"})," ",t.author.firstName," ",t.author.lastName]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("span",{className:"font-medium",children:"Date de cr\xE9ation:"})," ",new Date(t.createdAt).toLocaleString()]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("span",{className:"font-medium",children:"Derni\xE8re mise \xE0 jour:"})," ",new Date(t.updatedAt).toLocaleString()]}),(0,e.jsxs)("p",{children:[(0,e.jsx)("span",{className:"font-medium",children:"Statut de publication:"})," ",t.isPublished?"Publi\xE9":"Non publi\xE9"]}),t.publishedAt&&(0,e.jsxs)("p",{children:[(0,e.jsx)("span",{className:"font-medium",children:"Date de publication:"})," ",new Date(t.updatedAt).toLocaleString()]})]})]}),!t.isPublic&&t.targetAudience&&(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsx)("h3",{className:"text-lg sm:text-xl font-semibold",children:"Public cible"}),(0,e.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:["users","positions","teams","departments","hourGroups","access"].map(a=>t.targetAudience[a]&&t.targetAudience[a].length>0&&(0,e.jsxs)(l,{className:"shadow-none border",children:[(0,e.jsx)(c,{className:"p-4",children:(0,e.jsx)(m,{className:"text-base font-semibold capitalize",children:a})}),(0,e.jsx)(d,{className:"p-0",children:(0,e.jsx)(R,{className:"h-40 px-4",children:t.targetAudience[a].map(r=>(0,e.jsx)("div",{className:"py-2 text-base",children:a==="users"?`${r.firstName} ${r.lastName}`:r.name||r.title},r.id))})})]},a))})]}),t.attachments&&t.attachments.length>0&&(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsx)("h3",{className:"text-lg sm:text-xl font-semibold",children:"Pi\xE8ces jointes"}),(0,e.jsx)(E,{attachments:t.attachments})]})]}),(0,e.jsxs)(x,{className:"p-4 sm:p-6 flex justify-between gap-4",children:[n?.edit&&(0,e.jsx)(i,{asChild:!0,variant:"outline",className:"h-12 text-base flex-1 sm:flex-none",children:(0,e.jsxs)(o,{prefetch:"intent",to:`/o/news/edit/${t.id}`,children:[(0,e.jsx)(D,{className:"mr-2 h-5 w-5"}),"Modifier"]})}),n?.delete&&(0,e.jsxs)(L,{children:[(0,e.jsx)(P,{asChild:!0,children:(0,e.jsxs)(i,{variant:"destructive",className:"h-12 text-base flex-1 sm:flex-none",children:[(0,e.jsx)(C,{className:"mr-2 h-5 w-5"}),"Supprimer"]})}),(0,e.jsxs)(S,{className:"sm:max-w-[425px]",children:[(0,e.jsxs)(F,{children:[(0,e.jsx)(j,{className:"text-xl",children:"\xCAtes-vous s\xFBr de vouloir supprimer cette actualit\xE9 ?"}),(0,e.jsx)(k,{className:"text-base",children:"Cette action ne peut pas \xEAtre annul\xE9e. Cela supprimera d\xE9finitivement cette actualit\xE9."})]}),(0,e.jsxs)(T,{className:"gap-3 sm:gap-0",children:[(0,e.jsx)(y,{asChild:!0,children:(0,e.jsx)(i,{variant:"outline",className:"h-12 text-base",children:"Annuler"})}),(0,e.jsx)(i,{variant:"destructive",onClick:V,disabled:p||u.state==="submitting",className:"h-12 text-base",children:p||u.state==="submitting"?"Suppression...":"Supprimer"})]})]})]})]})]})]})}export{$ as default};
