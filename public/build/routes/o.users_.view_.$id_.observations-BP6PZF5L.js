import{a as G}from"/build/_shared/chunk-2BB2EQBE.js";import{a as R,b as F}from"/build/_shared/chunk-ABDDDOIB.js";import{a as S}from"/build/_shared/chunk-LZOQ52E6.js";import"/build/_shared/chunk-MRGZKXS3.js";import{a as H,b as $,c as B,d as p,e as t,f as s}from"/build/_shared/chunk-IEDNE26R.js";import{b as n}from"/build/_shared/chunk-FB4U2LCE.js";import{a as z}from"/build/_shared/chunk-6JFOYO3V.js";import"/build/_shared/chunk-M3TRH43M.js";import{a as L}from"/build/_shared/chunk-WZRQ3RQI.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as q}from"/build/_shared/chunk-B6OA2ZRE.js";import"/build/_shared/chunk-G5A27C7O.js";import{h as l}from"/build/_shared/chunk-NVGVVEPD.js";import{Ca as C,Da as P,K as T,ra as D}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as b,h as f,i as g,k as w,l as x,p as v,r as N}from"/build/_shared/chunk-GTSSQFHM.js";import{a as V,b as y}from"/build/_shared/chunk-BBTKOQ57.js";import{e as o}from"/build/_shared/chunk-UED2Q7CE.js";var J=o(q()),U=o(V());var K=o(G());var Q=o(z());var e=o(y());function k(){let{observations:r,search:c,page:i,limit:m,user:d,can:h}=v(),[W,I]=(0,U.useState)(!1),[X,u]=f(),Y=g(),O=N(),E=b().state==="loading",_=a=>{I(!0),O.submit({id:a,action:"delete"},{method:"post"})},j=a=>{a.preventDefault();let M=new FormData(a.currentTarget).get("search");u({search:M})},A=a=>a==="Positive"?(0,e.jsx)(P,{className:"h-4 w-4 text-green-500"}):(0,e.jsx)(C,{className:"h-4 w-4 text-red-500"});return(0,e.jsxs)(n.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"container mx-auto p-4 space-y-6 max-w-8xl",children:[(0,e.jsxs)(n.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},className:"mb-6",children:[(0,e.jsx)(S,{user:d,can:h}),(0,e.jsxs)("h1",{className:"text-3xl font-bold mt-4 text-center",children:["Observation faites \xE0 ",d.firstName," ",d.lastName]})]}),(0,e.jsx)(n.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4,duration:.5},children:(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8 space-y-6",children:[(0,e.jsx)("div",{className:"flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-4",children:(0,e.jsxs)(x,{onSubmit:j,className:"flex items-center gap-2 w-full sm:w-auto sm:flex-1  rounded-full border-2 border-primary",children:[(0,e.jsx)(L,{type:"search",name:"search",placeholder:"Rechercher des remarques...",defaultValue:c,className:"h-12 text-base"}),(0,e.jsx)(l,{type:"submit",className:"h-12 w-12 flex-shrink-0  rounded-full border-2 border-primary",children:(0,e.jsx)(D,{className:"h-5 w-5"})})]})}),E?(0,e.jsx)(F,{view:"list",itemCount:m}):r.results.length>0?(0,e.jsx)("div",{className:"rounded-lg border overflow-scroll",children:(0,e.jsxs)(H,{className:"overflow-scroll",children:[(0,e.jsx)($,{children:(0,e.jsxs)(p,{children:[(0,e.jsx)(t,{className:"text-base whitespace-nowrap",children:"Pour"}),(0,e.jsx)(t,{className:"text-base whitespace-nowrap",children:"Type"}),(0,e.jsx)(t,{className:"text-base whitespace-nowrap hidden md:table-cell",children:"Contenu"}),(0,e.jsx)(t,{className:"text-base whitespace-nowrap hidden sm:table-cell",children:"Par"}),(0,e.jsx)(t,{className:"text-base whitespace-nowrap hidden lg:table-cell",children:"Le"}),(0,e.jsx)(t,{className:"text-base text-right",children:"Actions"})]})}),(0,e.jsx)(B,{children:r.results.map(a=>(0,e.jsxs)(p,{children:[(0,e.jsxs)(s,{className:"font-medium text-base",children:[a.user.firstName," ",a.user.lastName]}),(0,e.jsx)(s,{children:(0,e.jsxs)("div",{className:"h-8 text-base px-3 py-1 flex",children:[A(a.type),(0,e.jsx)("span",{className:"ml-2",children:a.type})]})}),(0,e.jsx)(s,{className:"max-w-xs truncate hidden md:table-cell text-base",children:a.content}),(0,e.jsxs)(s,{className:"hidden sm:table-cell text-base",children:[a.author.firstName," ",a.author.lastName]}),(0,e.jsx)(s,{className:"hidden lg:table-cell text-base",children:new Date(a.createdAt).toLocaleString()}),(0,e.jsx)(s,{children:(0,e.jsx)("div",{className:"flex justify-end gap-2",children:h?.observation?.view&&(0,e.jsx)(l,{asChild:!0,variant:"outline",className:"h-12 text-base px-3",children:(0,e.jsx)(w,{prefetch:"intent",to:`/o/observation/view/${a.id}`,children:(0,e.jsx)(T,{className:"h-5 w-5"})})})})})]},a.id))})]})}):(0,e.jsx)(R,{type:"observations",createLink:"/o/observation/new",view:"list"}),r.totalResults>0&&(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4",children:[(0,e.jsx)(l,{onClick:()=>u({search:c,page:(i-1).toString()}),disabled:i===1,className:"w-full sm:w-auto h-12 text-base",children:"Pr\xE9c\xE9dent"}),(0,e.jsxs)("span",{className:"text-base",children:["Page ",i," sur ",Math.ceil(r.totalResults/m)]}),(0,e.jsx)(l,{onClick:()=>u({search:c,page:(i+1).toString()}),disabled:i*m>=r.totalResults,className:"w-full sm:w-auto h-12 text-base",children:"Suivant"})]})]})})]})}export{k as default};
