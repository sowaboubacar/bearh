import{a as J}from"/build/_shared/chunk-OT2QTX4F.js";import{a as R,b as A}from"/build/_shared/chunk-ABDDDOIB.js";import{a as B}from"/build/_shared/chunk-LZOQ52E6.js";import"/build/_shared/chunk-MRGZKXS3.js";import{a as S,b as M,c as $,d as u,e as l,f as c}from"/build/_shared/chunk-IEDNE26R.js";import{b as n}from"/build/_shared/chunk-FB4U2LCE.js";import{a as q}from"/build/_shared/chunk-6JFOYO3V.js";import"/build/_shared/chunk-M3TRH43M.js";import{a as L}from"/build/_shared/chunk-WZRQ3RQI.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as z}from"/build/_shared/chunk-B6OA2ZRE.js";import"/build/_shared/chunk-G5A27C7O.js";import{h as i}from"/build/_shared/chunk-NVGVVEPD.js";import{D as C,K as D,f as d,ra as P,t as v,x as k}from"/build/_shared/chunk-PNJDYZ5P.js";import{e as f,i as w,k as b,l as x,p as T,r as y}from"/build/_shared/chunk-GTSSQFHM.js";import{a as O,b as N}from"/build/_shared/chunk-BBTKOQ57.js";import{e as a}from"/build/_shared/chunk-UED2Q7CE.js";var K=a(z()),H=a(O());var Q=a(J());var W=a(q());var e=a(N());function U(){let{tasks:o,search:I,user:E,page:r,limit:m,can:p}=T(),[X,F]=(0,H.useState)(!1),g=w(),h=y(),V=f(),Y=t=>{F(!0),h.submit({id:t,action:"delete"},{method:"post"})},Z=t=>{h.submit({id:t,action:"toggleComplete"},{method:"post",action:"/o/task"})},j=t=>{switch(t){case"To Do":return(0,e.jsxs)("div",{className:"text-base px-3 py-1 text-yellow-500 font-bold flex",children:[(0,e.jsx)(C,{className:"mr-2 h-5 w-5"})," \xC0 faire"]});case"In Progress":return(0,e.jsxs)("div",{className:"text-base px-3 py-1 text-primary font-bold flex",children:[(0,e.jsx)(v,{className:"mr-2 h-5 w-5"})," En cours"]});case"Completed":return(0,e.jsxs)(d,{className:"text-base px-3 py-1 text-green-500 font-bold flex",children:[(0,e.jsx)(k,{className:"mr-2 h-5 w-5"})," Termin\xE9"]});default:return(0,e.jsx)(d,{className:"text-base px-3 py-1",children:t})}},_=t=>[...t.users,...t.positions,...t.teams,...t.departments,...t.hourGroups,...t.access].map(s=>s.firstName&&s.lastName?`${s.firstName} ${s.lastName}`:s.name||s.title).join(", "),G=V.state==="loading";return(0,e.jsxs)(n.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"container mx-auto p-4 space-y-6 max-w-8xl",children:[(0,e.jsxs)(n.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},className:"mb-6",children:[(0,e.jsx)(B,{user:E,can:p}),(0,e.jsx)("h1",{className:"text-3xl font-bold mt-4 text-center",children:"T\xE2che en Eours/Assign\xE9/Effectu\xE9"})]}),(0,e.jsx)(n.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4,duration:.5},children:(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8 space-y-6",children:[(0,e.jsx)("div",{className:"flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-4",children:(0,e.jsxs)(x,{className:"flex items-center gap-2 w-full sm:w-auto sm:flex-1",children:[(0,e.jsx)(L,{type:"search",name:"search",placeholder:"Rechercher des t\xE2ches...",defaultValue:I??"",className:"h-12 text-base"}),(0,e.jsx)(i,{type:"submit",className:"h-12 w-12 flex-shrink-0",children:(0,e.jsx)(P,{className:"h-5 w-5"})})]})}),G?(0,e.jsx)(A,{view:"list",itemCount:m}):o.results.length>0?(0,e.jsx)("div",{className:"rounded-lg border overflow-x-auto",children:(0,e.jsxs)(S,{children:[(0,e.jsx)(M,{children:(0,e.jsxs)(u,{children:[(0,e.jsx)(l,{className:"text-base",children:"Titre"}),(0,e.jsx)(l,{className:"text-base hidden md:table-cell",children:"Statut"}),(0,e.jsx)(l,{className:"text-base text-right",children:"Actions"})]})}),(0,e.jsx)($,{children:o.results.map(t=>(0,e.jsxs)(u,{children:[(0,e.jsx)(c,{className:"font-medium text-base",children:t.title}),(0,e.jsx)(c,{className:"hidden md:table-cell",children:j(t.status)}),(0,e.jsx)(c,{className:"text-right",children:p?.task?.view&&(0,e.jsx)(b,{to:`/o/task/view/${t.id}`,children:(0,e.jsxs)(i,{variant:"ghost",className:"h-12 w-12",children:[(0,e.jsx)(D,{className:"h-5 w-5"}),(0,e.jsx)("span",{className:"sr-only",children:"Voir"})]})})})]},t.id))})]})}):(0,e.jsx)(R,{type:"tasks",createLink:"/o/task/new",view:"list"}),o.totalResults>0&&(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4",children:[(0,e.jsx)(i,{onClick:()=>g({page:r-1},{method:"get"}),disabled:r===1,className:"w-full sm:w-auto h-12 text-base",children:"Pr\xE9c\xE9dent"}),(0,e.jsxs)("span",{className:"text-base",children:["Page ",r," sur ",Math.ceil(o.totalResults/m)]}),(0,e.jsx)(i,{onClick:()=>g({page:r+1},{method:"get"}),disabled:r*m>=o.totalResults,className:"w-full sm:w-auto h-12 text-base",children:"Suivant"})]})]})})]})}export{U as default};
