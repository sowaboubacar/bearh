import{a as k}from"/build/_shared/chunk-6QXFNV75.js";import{a as w,b as N,c as v,d as C,e as D,f as A,g as T,h as y,i as L}from"/build/_shared/chunk-3QGBS752.js";import{a as ne}from"/build/_shared/chunk-XKJ5LF2E.js";import{a as X,b as ee}from"/build/_shared/chunk-ABDDDOIB.js";import{a as Y,b as Z,c as _,d as b,e as i,f as n}from"/build/_shared/chunk-IEDNE26R.js";import"/build/_shared/chunk-M3TRH43M.js";import{a as W}from"/build/_shared/chunk-WZRQ3RQI.js";import"/build/_shared/chunk-PGURRWG5.js";import"/build/_shared/chunk-AQWSFLPG.js";import"/build/_shared/chunk-GFAY22KF.js";import"/build/_shared/chunk-NGC74IU4.js";import"/build/_shared/chunk-WKQOSWRL.js";import"/build/_shared/chunk-Z5RMMUMH.js";import"/build/_shared/chunk-SUJVG5FV.js";import"/build/_shared/chunk-OMO5CWS2.js";import"/build/_shared/chunk-PVX4NJUU.js";import{a as oe}from"/build/_shared/chunk-B6OA2ZRE.js";import{a as M,b as I,c as V,e as G,f as J}from"/build/_shared/chunk-G5A27C7O.js";import{h as a}from"/build/_shared/chunk-NVGVVEPD.js";import{Ea as f,Oa as Q,S as h,V as O,W as q,oa as z,ra as K,xa as x}from"/build/_shared/chunk-PNJDYZ5P.js";import{d as P,e as H,h as S,k as p,l as j,p as E,r as U}from"/build/_shared/chunk-GTSSQFHM.js";import{b as $}from"/build/_shared/chunk-BBTKOQ57.js";import{e as u}from"/build/_shared/chunk-UED2Q7CE.js";var ce=u(ne());var me=u(oe());var e=u($());function te(){let{positions:r,search:m,view:ae,page:c,limit:g,can:l}=E(),[se,d]=S(),F=P(),R=U(),le=H().state==="loading",s=se.get("view")||ae,re=t=>{t.preventDefault();let ie=new FormData(t.currentTarget).get("search");d({search:ie,view:s})},B=t=>{d({search:m,view:t})};return(0,e.jsxs)("div",{className:"container mx-auto p-4 sm:p-6 lg:p-8 space-y-6",children:[(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,e.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold",children:"Liste des Postes"}),l?.create&&(0,e.jsx)(a,{asChild:!0,className:"w-full sm:w-auto h-12 text-base",children:(0,e.jsxs)(p,{prefetch:"intent",to:"/o/positions/new",children:[(0,e.jsx)(z,{className:"mr-2 h-5 w-5"}),"Ajouter un poste"]})})]}),(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-4",children:[(0,e.jsxs)(j,{onSubmit:re,className:"relative w-full sm:w-auto sm:flex-1 max-w-xl",children:[(0,e.jsx)(K,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 transform text-muted-foreground"}),(0,e.jsx)(W,{name:"search",placeholder:"Rechercher un poste...",defaultValue:m,className:"pl-10 h-12 text-base"})]}),(0,e.jsxs)("div",{className:"flex gap-2",children:[(0,e.jsx)(a,{variant:s==="grid"?"default":"outline",onClick:()=>B("grid"),className:"flex-1 sm:flex-none h-12 px-4",children:(0,e.jsx)(O,{className:"h-5 w-5"})}),(0,e.jsx)(a,{variant:s==="list"?"default":"outline",onClick:()=>B("list"),className:"flex-1 sm:flex-none h-12 px-4",children:(0,e.jsx)(q,{className:"h-5 w-5"})})]})]}),le?(0,e.jsx)(ee,{view:s,itemCount:g}):r.results.length>0?s==="grid"?(0,e.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:r.results.map(t=>(0,e.jsxs)(M,{className:"flex flex-col",children:[(0,e.jsxs)(I,{className:"p-4 sm:p-6",children:[(0,e.jsx)(V,{className:"text-xl font-bold mb-4",children:t.title}),t.attachments.length>0&&(0,e.jsx)("img",{src:k(t.attachments)?.file?.url,alt:k(t.attachments)?.label||"",className:"w-full h-48 object-cover rounded-md"})]}),(0,e.jsxs)(G,{className:"p-4 sm:p-6 pt-0 flex-grow",children:[(0,e.jsx)("p",{className:"text-base text-muted-foreground",children:t.description||"Aucune description"}),(0,e.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,e.jsx)(Q,{className:"h-5 w-5 mr-2"}),(0,e.jsxs)("span",{className:"text-base",children:[t.members.length," membres"]})]})]}),(0,e.jsxs)(J,{className:"p-4 sm:p-6 flex flex-wrap gap-2",children:[l?.view&&(0,e.jsx)(a,{variant:"outline",className:"flex-1 h-12 text-base",onClick:()=>F(`/o/positions/view/${o=t.id}`),children:(0,e.jsx)(h,{className:"h-5 w-5 mr-2"})}),l?.edit&&(0,e.jsx)(a,{variant:"outline",className:"flex-1 h-12 text-base",onClick:()=>F(`/o/positions/edit/${t.id}`),children:(0,e.jsx)(x,{className:"h-5 w-5 mr-2"})}),l?.delete&&(0,e.jsxs)(w,{children:[(0,e.jsx)(N,{asChild:!0,children:(0,e.jsx)(a,{variant:"outline",className:"flex-1 h-12 text-base",children:(0,e.jsx)(f,{className:"h-5 w-5 mr-2"})})}),(0,e.jsxs)(v,{className:"sm:max-w-[425px]",children:[(0,e.jsxs)(C,{children:[(0,e.jsx)(A,{className:"text-xl",children:"\xCAtes-vous s\xFBr ?"}),(0,e.jsx)(T,{className:"text-base",children:"Cette action ne peut pas \xEAtre annul\xE9e. Cela supprimera d\xE9finitivement la fiche."})]}),(0,e.jsxs)(D,{className:"gap-3 sm:gap-0",children:[(0,e.jsx)(L,{className:"h-12 text-base",children:"Annuler"}),(0,e.jsx)(y,{onClick:()=>{R.submit({id:t.id},{method:"delete",action:"/o/positions"})},className:"h-12 text-base",children:"Supprimer"})]})]})]})]})]},t.id))}):(0,e.jsx)("div",{className:"rounded-lg border overflow-x-auto",children:(0,e.jsxs)(Y,{children:[(0,e.jsx)(Z,{children:(0,e.jsxs)(b,{children:[(0,e.jsx)(i,{className:"text-base whitespace-nowrap",children:"Titre"}),(0,e.jsx)(i,{className:"text-base whitespace-nowrap hidden md:table-cell",children:"Description"}),(0,e.jsx)(i,{className:"text-base whitespace-nowrap hidden sm:table-cell",children:"Pi\xE8ces Jointes"}),(0,e.jsx)(i,{className:"text-base whitespace-nowrap hidden sm:table-cell",children:"Membres"}),(0,e.jsx)(i,{className:"text-base text-right",children:"Actions"})]})}),(0,e.jsx)(_,{children:r.results.map(t=>(0,e.jsxs)(b,{children:[(0,e.jsx)(n,{className:"font-medium text-base",children:t.title}),(0,e.jsx)(n,{className:"hidden md:table-cell text-base",children:t.description||"Aucune description"}),(0,e.jsx)(n,{className:"hidden sm:table-cell text-base",children:t.attachments?.length}),(0,e.jsx)(n,{className:"hidden sm:table-cell text-base",children:t.members?.length}),(0,e.jsx)(n,{children:(0,e.jsxs)("div",{className:"flex justify-end gap-2",children:[l?.view&&(0,e.jsx)(a,{variant:"ghost",className:"h-12 text-base px-3",asChild:!0,children:(0,e.jsx)(p,{prefetch:"intent",to:`/o/positions/view/${t.id}`,children:(0,e.jsx)(h,{className:"h-5 w-5"})})}),l?.edit&&(0,e.jsx)(a,{variant:"ghost",className:"h-12 text-base px-3",asChild:!0,children:(0,e.jsx)(p,{prefetch:"intent",to:`/o/positions/edit/${t.id}`,children:(0,e.jsx)(x,{className:"h-5 w-5"})})}),l?.delete&&(0,e.jsxs)(w,{children:[(0,e.jsx)(N,{asChild:!0,children:(0,e.jsx)(a,{variant:"ghost",className:"h-12 text-base px-3",children:(0,e.jsx)(f,{className:"h-5 w-5"})})}),(0,e.jsxs)(v,{children:[(0,e.jsxs)(C,{children:[(0,e.jsx)(A,{className:"text-xl",children:"\xCAtes-vous s\xFBr ?"}),(0,e.jsx)(T,{className:"text-base",children:"Cette action ne peut pas \xEAtre annul\xE9e. Cela supprimera d\xE9finitivement le poste."})]}),(0,e.jsxs)(D,{className:"gap-3 sm:gap-0",children:[(0,e.jsx)(L,{className:"h-12 text-base",children:"Annuler"}),(0,e.jsx)(y,{onClick:()=>{R.submit({id:t.id},{method:"delete",action:"/o/positions"})},className:"h-12 text-base",children:"Supprimer"})]})]})]})]})})]},t.id))})]})}):(0,e.jsx)(X,{type:"postes",createLink:"/o/positions/new",view:s}),r.totalResults>0&&(0,e.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4",children:[(0,e.jsx)(a,{variant:"outline",onClick:()=>d({search:m,view:s,page:(c-1).toString()}),disabled:c===1,className:"w-full sm:w-auto h-12 text-base",children:"Pr\xE9c\xE9dent"}),(0,e.jsxs)("span",{className:"text-base",children:["Page ",c," sur ",Math.ceil(r.totalResults/g)]}),(0,e.jsx)(a,{variant:"outline",onClick:()=>d({search:m,view:s,page:(c+1).toString()}),disabled:c*g>=r.totalResults,className:"w-full sm:w-auto h-12 text-base",children:"Suivant"})]})]})}export{te as default};
