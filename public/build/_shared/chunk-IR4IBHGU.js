import{b as y}from"/build/_shared/chunk-EJG3POZ2.js";import{a as x,b as h,d as N}from"/build/_shared/chunk-KLKNQD3Q.js";import{a as g,h as n}from"/build/_shared/chunk-NVGVVEPD.js";import{J as v,N as c,na as b}from"/build/_shared/chunk-PNJDYZ5P.js";import{a as j,b as p}from"/build/_shared/chunk-BBTKOQ57.js";import{e as o}from"/build/_shared/chunk-UED2Q7CE.js";var i=o(j());var e=o(p());function B({attachments:w}){let[t,I]=(0,i.useState)(null),[m,a]=(0,i.useState)(!1),[d,r]=(0,i.useState)(null),u=l=>l.file.meta.mimeType.startsWith("image/"),f=l=>l.file.meta.mimeType.startsWith("video/"),k=l=>{l&&(m?l.pause():l.play().catch(s=>{r("Erreur lors de la lecture de la vid\xE9o"),console.error("Video playback error:",s)}),a(!m))},D=()=>{r("Impossible de charger la vid\xE9o")},P=()=>{a(!1),r(null)};return(0,e.jsx)("div",{className:"space-y-6",children:(0,e.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:w.map(l=>(0,e.jsxs)(x,{onOpenChange:s=>{I(s?l:null),s||P()},children:[(0,e.jsx)(h,{asChild:!0,children:(0,e.jsx)(n,{variant:"outline",className:g("w-full h-40 sm:h-32 p-4 overflow-hidden flex flex-col items-center justify-center","relative group hover:border-primary transition-colors"),children:u(l)?(0,e.jsxs)("div",{className:"relative w-full h-full",children:[(0,e.jsx)("img",{src:l.file.url,alt:l.label||"Image",className:"w-full h-full object-cover rounded-md"}),(0,e.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white p-2 truncate",children:(0,e.jsx)("span",{className:"text-base",children:l.label||"Image"})})]}):f(l)?(0,e.jsxs)("div",{className:"relative w-full h-full",children:[(0,e.jsx)("video",{src:l.file.url,className:"w-full h-full object-cover rounded-md",muted:!0,playsInline:!0}),(0,e.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 group-hover:bg-black/40 transition-colors",children:(0,e.jsx)(b,{className:"w-12 h-12 text-white opacity-80 group-hover:opacity-100"})}),(0,e.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white p-2 truncate",children:(0,e.jsx)("span",{className:"text-base",children:l.label||"Vid\xE9o"})})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(c,{className:"w-12 h-12 mb-4"}),(0,e.jsx)("span",{className:"text-base text-center truncate w-full",children:l.label||l.file.meta.extension.toUpperCase()})]})})}),(0,e.jsx)(N,{className:"sm:max-w-[725px] p-6",children:t&&(0,e.jsxs)("div",{className:"flex flex-col items-center space-y-6",children:[(0,e.jsx)("h3",{className:"text-xl sm:text-2xl font-semibold text-center",children:t.label||"Pi\xE8ce jointe"}),u(t)?(0,e.jsx)("img",{src:t.file.url,alt:t.label||"Image",className:"w-full h-auto max-h-[60vh] object-contain rounded-lg"}):f(t)?(0,e.jsxs)("div",{className:"relative w-full aspect-video",children:[(0,e.jsxs)("video",{src:t.file.url,className:"w-full h-full rounded-lg",controls:!0,playsInline:!0,onError:D,onPlay:()=>a(!0),onPause:()=>a(!1),children:[(0,e.jsx)("track",{kind:"captions",src:`/captions/${t.id}.vtt`,srcLang:"fr",label:"Fran\xE7ais",default:!0}),"Votre navigateur ne prend pas en charge la lecture de vid\xE9os."]}),d&&(0,e.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-lg",children:(0,e.jsx)("p",{className:"text-base text-white",children:d})})]}):(0,e.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,e.jsx)(c,{className:"w-20 h-20 mb-4"}),(0,e.jsxs)("p",{className:"text-lg",children:[t.file.meta.extension.toUpperCase()," File"]})]}),t.description&&(0,e.jsx)("p",{className:"text-base text-muted-foreground text-center",children:t.description}),(0,e.jsxs)("div",{className:"flex items-center justify-between w-full text-base text-muted-foreground",children:[(0,e.jsx)("span",{children:t.file.meta.mimeType}),(0,e.jsx)("span",{children:y(t.file.meta.size)})]}),(0,e.jsx)(n,{asChild:!0,className:"w-full h-12 text-base",children:(0,e.jsxs)("a",{href:t.file.url,download:t.label||"download",className:"flex items-center justify-center gap-2",children:[(0,e.jsx)(v,{className:"h-5 w-5"}),"T\xE9l\xE9charger"]})})]})})]},l.id))})})}export{B as a};
