import{a as Ae,b as Pe,c as Be,d as S,e as Q}from"/build/_shared/chunk-GE2LZYMT.js";import{a as Nt}from"/build/_shared/chunk-FB55SS72.js";import{a as Te,b as Me,c as ke}from"/build/_shared/chunk-MRGZKXS3.js";import{a as mt,b as ct,c as pt,d as Ye,e as te,f as ae}from"/build/_shared/chunk-IEDNE26R.js";import{a as I,b as y,c as T,d as M,e as C}from"/build/_shared/chunk-NCY4KUS2.js";import{a as je}from"/build/_shared/chunk-OFTXZR4P.js";import{a as ut}from"/build/_shared/chunk-L2TBXS32.js";import{a as bt}from"/build/_shared/chunk-H33OI7YH.js";import{a as Ze,b as dt}from"/build/_shared/chunk-SS7AQOQ3.js";import{a as ft,b as gt,c as ht}from"/build/_shared/chunk-2MHSPA7K.js";import{a as it}from"/build/_shared/chunk-WZRQ3RQI.js";import{a as k,d as A,e as P,f as F,g as B}from"/build/_shared/chunk-KLKNQD3Q.js";import{a as at,b as ot,c as st,e as we,f as xe}from"/build/_shared/chunk-G5A27C7O.js";import{a as de,h as n}from"/build/_shared/chunk-NVGVVEPD.js";import{B as ve,D as Se,Ea as Ie,La as ye,Oa as ee,S as Ce,U as j,X as lt,d as rt,g as Z,la as De,t as nt}from"/build/_shared/chunk-PNJDYZ5P.js";import{k as Y,l as tt,r as x}from"/build/_shared/chunk-GTSSQFHM.js";import{a as K,b as v}from"/build/_shared/chunk-BBTKOQ57.js";import{e as m}from"/build/_shared/chunk-UED2Q7CE.js";var _=m(K());var X=m(K());var h=m(v());function Fe({isOpen:s,onClose:r,user:N}){let[c,p]=(0,X.useState)(""),[w,o]=(0,X.useState)("Positive"),[u,f]=(0,X.useState)(""),l=x(),[a,d]=(0,X.useState)(s),D=()=>{let R=new FormData;R.append("type",w),R.append("content",c),R.append("user",N?.id),l.submit(R,{method:"POST",action:"/api/observation"})};return(0,X.useEffect)(()=>{l.data&&l.data.success?r():l.data&&l.data.error&&f(l.data.error)},[l.data]),(0,h.jsx)(k,{open:s,onOpenChange:r,children:(0,h.jsxs)(A,{className:"sm:max-w-[425px] p-4 sm:p-6",children:[(0,h.jsx)(P,{className:"space-y-3",children:(0,h.jsxs)(B,{className:"text-xl sm:text-2xl font-bold",children:["Une remarque \xE0 ",N.firstName," ",N.lastName]})}),(0,h.jsxs)(tt,{method:"post",onSubmit:D,children:[(0,h.jsxs)(we,{className:"p-4 sm:p-6 space-y-6",children:[u&&(0,h.jsxs)(ft,{variant:"destructive",children:[(0,h.jsx)(nt,{className:"h-5 w-5"}),(0,h.jsx)(gt,{className:"text-base font-medium",children:"Erreur"}),(0,h.jsx)(ht,{className:"text-base",children:u})]}),(0,h.jsxs)("div",{className:"py-4",children:[(0,h.jsx)(Ze,{htmlFor:"type",className:"text-base font-medium",children:"Type de Remarque"}),(0,h.jsxs)(I,{value:w,name:"type",required:!0,onValueChange:R=>o(R),children:[(0,h.jsx)(T,{className:"w-full h-11",children:(0,h.jsx)(y,{placeholder:"Type de remarque",className:"text-base"})}),(0,h.jsxs)(M,{children:[(0,h.jsx)(C,{value:"Positive",className:"text-base py-3",children:"Positive"}),(0,h.jsx)(C,{value:"Negative",className:"text-base py-3",children:"N\xE9gative"})]})]})]}),(0,h.jsxs)("div",{className:"space-y-3",children:[(0,h.jsx)(Ze,{htmlFor:"content",className:"text-base font-medium",children:"Contenu"}),(0,h.jsx)(ut,{id:"content",name:"content",required:!0,value:c,onChange:R=>p(R.target.value),placeholder:"Entrez votre observation ici...",className:"min-h-[150px] text-base p-3 resize-none"})]})]}),(0,h.jsx)(xe,{className:"p-4 sm:p-6",children:(0,h.jsx)(n,{type:"submit",className:"w-full h-12 text-base",disabled:l.state==="submitting",children:l.state==="submitting"?(0,h.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,h.jsx)(lt,{className:"h-5 w-5 animate-spin"}),"Remarques en cours..."]}):"Faire la remarque"})})]})]})})}var oe=m(K());var b=m(v());function Oe({isOpen:s,onClose:r,user:N,applicableKpis:c=[]}){let[p,w]=(0,oe.useState)(""),o=x(),[u,f]=(0,oe.useState)(""),[l,a]=(0,oe.useState)({}),d=c.find(g=>g.id===p),D=()=>{let g=Object.entries(l).map(([W,J])=>({criterionName:W,score:J})),L=new FormData;L.append("kpiForm",p),L.append("user",N?.id),L.append("scores",JSON.stringify(g)),o.submit(L,{method:"POST",action:"/api/kpi"})};(0,oe.useEffect)(()=>{o.data&&o.data.success?r():o.data&&o.data.error&&f(o.data.error)},[o.data]);let R=(g,L,W)=>{L>W?a(J=>({...J,[g]:W})):a(J=>({...J,[g]:L}))};return(0,b.jsx)(k,{open:s,onOpenChange:r,children:(0,b.jsxs)(A,{className:"sm:max-w-[425px] p-4 sm:p-6 max-h-[80vh] overflow-y-auto",children:[(0,b.jsx)(P,{className:"space-y-3",children:(0,b.jsxs)(B,{className:"text-xl sm:text-2xl font-bold",children:["\xC9valuer ",N.firstName," ",N.lastName]})}),u&&(0,b.jsx)("div",{className:"text-red-500 text-sm font-semibold py-4",children:u}),c&&c.length>0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"py-4",children:(0,b.jsxs)(I,{value:p,onValueChange:w,children:[(0,b.jsx)(T,{className:"w-full h-11",children:(0,b.jsx)(y,{placeholder:"S\xE9lectionnez un formulaire KPI",className:"text-base"})}),(0,b.jsx)(M,{children:c.map(g=>(0,b.jsx)(C,{value:g.id,className:"text-base py-3",children:g.title},g.id))})]})}),d&&(0,b.jsxs)("div",{className:"py-4 space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:d.title}),d.criteria.map(g=>(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(dt,{htmlFor:g.name,children:g.name}),g.description&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:g.description}),(0,b.jsx)(it,{id:g.name,type:"number",min:"0",max:g.maxScore,value:l[g.name]??"",onChange:L=>R(g.name,Number(L.target.value),g.maxScore),className:"h-11"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Max score: ",g.maxScore]})]},g.name))]}),(0,b.jsxs)(F,{className:"gap-3 sm:gap-0",children:[(0,b.jsx)(n,{variant:"outline",onClick:r,className:"w-full sm:w-auto h-11 text-base",children:"Annuler"}),(0,b.jsx)(n,{onClick:D,disabled:!p,className:"w-full sm:w-auto h-11 text-base",children:"\xC9valuer"})]})]}):(0,b.jsx)("div",{className:"text-center text-sm font-semibold py-4",children:"Aucun formulaire KPI disponible pour cet employ\xE9"})]})})}var ue=m(K());var O=m(v());function He({isOpen:s,onClose:r,user:N,accesses:c=[]}){let[p,w]=(0,ue.useState)(""),o=x(),[u,f]=(0,ue.useState)(""),l=()=>{let a=new FormData;a.append("_action","quickAssign"),a.append("user",N?.id),a.append("access",p),o.submit(a,{method:"POST",action:"/api/access"})};return(0,ue.useEffect)(()=>{o.data&&o.data.success?(console.log("Data: ",o.data),r()):o.data&&o.data.error&&f(o.data.error)},[o.data]),(0,O.jsx)(k,{open:s,onOpenChange:r,children:(0,O.jsxs)(A,{className:"sm:max-w-[425px] p-4 sm:p-6",children:[(0,O.jsx)(P,{className:"space-y-3",children:(0,O.jsx)(B,{className:"text-xl sm:text-2xl font-bold",children:"Modifier les droits d'acc\xE8s"})}),u&&(0,O.jsx)("div",{className:"text-red-500 text-sm font-semibold py-4",children:u}),(0,O.jsx)("div",{className:"py-4",children:(0,O.jsxs)(I,{value:p,onValueChange:w,children:[(0,O.jsx)(T,{className:"w-full h-11",children:(0,O.jsx)(y,{placeholder:"S\xE9lectionnez une t\xE2che",className:"text-base"})}),(0,O.jsx)(M,{children:c?.length>0&&c.map(a=>(0,O.jsx)(C,{value:a.id,className:"text-base py-3",children:a.name},a.id))})]})}),(0,O.jsxs)(F,{className:"gap-3 sm:gap-0",children:[(0,O.jsx)(n,{variant:"outline",onClick:r,className:"w-full sm:w-auto h-11 text-base",children:"Annuler"}),(0,O.jsx)(n,{onClick:l,className:"w-full sm:w-auto h-11 text-base",children:"Enregistrer"})]})]})})}var fe=m(K());var H=m(v());function Ee({isOpen:s,onClose:r,user:N,departments:c=[]}){let[p,w]=(0,fe.useState)(""),o=x(),[u,f]=(0,fe.useState)(""),l=()=>{let a=new FormData;a.append("_action","quickAssign"),a.append("user",N?.id),a.append("department",p),o.submit(a,{method:"POST",action:"/api/departments"})};return(0,fe.useEffect)(()=>{o.data&&o.data.success?r():o.data&&o.data.error&&f(o.data.error)},[o.data]),(0,H.jsx)(k,{open:s,onOpenChange:r,children:(0,H.jsxs)(A,{className:"sm:max-w-[425px] p-4 sm:p-6",children:[(0,H.jsx)(P,{className:"space-y-3",children:(0,H.jsx)(B,{className:"text-xl sm:text-2xl font-bold",children:"Ajouter \xE0 un d\xE9partement"})}),u&&(0,H.jsx)("div",{className:"text-red-500 text-sm font-semibold py-4",children:u}),(0,H.jsx)("div",{className:"py-4",children:(0,H.jsxs)(I,{value:p,onValueChange:w,children:[(0,H.jsx)(T,{className:"w-full h-11",children:(0,H.jsx)(y,{placeholder:"S\xE9lectionnez une t\xE2che",className:"text-base"})}),(0,H.jsx)(M,{children:c?.length>0&&c.map(a=>(0,H.jsx)(C,{value:a.id,className:"text-base py-3",children:a.name},a.id))})]})}),(0,H.jsxs)(F,{className:"gap-3 sm:gap-0",children:[(0,H.jsx)(n,{variant:"outline",onClick:r,className:"w-full sm:w-auto h-11 text-base",children:"Annuler"}),(0,H.jsx)(n,{onClick:l,className:"w-full sm:w-auto h-11 text-base",children:"Enregistrer"})]})]})})}var ge=m(K());var E=m(v());function qe({isOpen:s,onClose:r,user:N,positions:c=[]}){let[p,w]=(0,ge.useState)(""),o=x(),[u,f]=(0,ge.useState)(""),l=()=>{let a=new FormData;a.append("_action","quickAssign"),a.append("user",N?.id),a.append("position",p),o.submit(a,{method:"POST",action:"/api/positions"})};return(0,ge.useEffect)(()=>{o.data&&o.data.success?r():o.data&&o.data.error&&f(o.data.error)},[o.data]),(0,E.jsx)(k,{open:s,onOpenChange:r,children:(0,E.jsxs)(A,{className:"sm:max-w-[425px] p-4 sm:p-6",children:[(0,E.jsx)(P,{className:"space-y-3",children:(0,E.jsx)(B,{className:"text-xl sm:text-2xl font-bold",children:"Ajouter \xE0 une fiche de poste"})}),u&&(0,E.jsx)("div",{className:"text-red-500 text-sm font-semibold py-4",children:u}),(0,E.jsx)("div",{className:"py-4",children:(0,E.jsxs)(I,{value:p,onValueChange:w,children:[(0,E.jsx)(T,{className:"w-full h-11",children:(0,E.jsx)(y,{placeholder:"S\xE9lectionnez une t\xE2che",className:"text-base"})}),(0,E.jsx)(M,{children:c?.length>0&&c.map(a=>(0,E.jsx)(C,{value:a.id,className:"text-base py-3",children:a.title},a.id))})]})}),(0,E.jsxs)(F,{className:"gap-3 sm:gap-0",children:[(0,E.jsx)(n,{variant:"outline",onClick:r,className:"w-full sm:w-auto h-11 text-base",children:"Annuler"}),(0,E.jsx)(n,{onClick:l,className:"w-full sm:w-auto h-11 text-base",children:"Enregistrer"})]})]})})}var he=m(K());var q=m(v());function Ue({isOpen:s,onClose:r,user:N,hourGroups:c=[]}){let[p,w]=(0,he.useState)(""),o=x(),[u,f]=(0,he.useState)(""),l=()=>{let a=new FormData;a.append("_action","quickAssign"),a.append("user",N?.id),a.append("hourGroup",p),o.submit(a,{method:"POST",action:"/api/hourGroups"})};return(0,he.useEffect)(()=>{o.data&&o.data.success?r():o.data&&o.data.error&&f(o.data.error)},[o.data]),(0,q.jsx)(k,{open:s,onOpenChange:r,children:(0,q.jsxs)(A,{className:"sm:max-w-[425px] p-4 sm:p-6",children:[(0,q.jsx)(P,{className:"space-y-3",children:(0,q.jsx)(B,{className:"text-xl sm:text-2xl font-bold",children:"Ajouter \xE0 une Programmation"})}),u&&(0,q.jsx)("div",{className:"text-red-500 text-sm font-semibold py-4",children:u}),(0,q.jsx)("div",{className:"py-4",children:(0,q.jsxs)(I,{value:p,onValueChange:w,children:[(0,q.jsx)(T,{className:"w-full h-11",children:(0,q.jsx)(y,{placeholder:"S\xE9lectionnez une t\xE2che",className:"text-base"})}),(0,q.jsx)(M,{children:c?.length>0&&c.map(a=>(0,q.jsx)(C,{value:a.id,className:"text-base py-3",children:a.name},a.id))})]})}),(0,q.jsxs)(F,{className:"gap-3 sm:gap-0",children:[(0,q.jsx)(n,{variant:"outline",onClick:r,className:"w-full sm:w-auto h-11 text-base",children:"Annuler"}),(0,q.jsx)(n,{onClick:l,className:"w-full sm:w-auto h-11 text-base",children:"Enregistrer"})]})]})})}var be=m(K());var U=m(v());function Ge({isOpen:s,onClose:r,user:N,teams:c=[]}){let[p,w]=(0,be.useState)(""),o=x(),[u,f]=(0,be.useState)(""),l=()=>{let a=new FormData;a.append("_action","quickAssign"),a.append("user",N?.id),a.append("team",p),o.submit(a,{method:"POST",action:"/api/teams"})};return(0,be.useEffect)(()=>{o.data&&o.data.success?r():o.data&&o.data.error&&f(o.data.error)},[o.data]),(0,U.jsx)(k,{open:s,onOpenChange:r,children:(0,U.jsxs)(A,{className:"sm:max-w-[425px] p-4 sm:p-6",children:[(0,U.jsx)(P,{className:"space-y-3",children:(0,U.jsx)(B,{className:"text-xl sm:text-2xl font-bold",children:"Ajouter \xE0 un Equipe"})}),u&&(0,U.jsx)("div",{className:"text-red-500 text-sm font-semibold py-4",children:u}),(0,U.jsx)("div",{className:"py-4",children:(0,U.jsxs)(I,{value:p,onValueChange:w,children:[(0,U.jsx)(T,{className:"w-full h-11",children:(0,U.jsx)(y,{placeholder:"S\xE9lectionnez une t\xE2che",className:"text-base"})}),(0,U.jsx)(M,{children:c?.length>0&&c.map(a=>(0,U.jsx)(C,{value:a.id,className:"text-base py-3",children:a.name},a.id))})]})}),(0,U.jsxs)(F,{className:"gap-3 sm:gap-0",children:[(0,U.jsx)(n,{variant:"outline",onClick:r,className:"w-full sm:w-auto h-11 text-base",children:"Annuler"}),(0,U.jsx)(n,{onClick:l,className:"w-full sm:w-auto h-11 text-base",children:"Enregistrer"})]})]})})}var se=m(K());var G=m(v());function Ve({isOpen:s,onClose:r,user:N,tasks:c=[]}){let[p,w]=(0,se.useState)(""),[o,u]=(0,se.useState)("quickAssignNewTask"),f=x(),[l,a]=(0,se.useState)(""),d=()=>{if(o=="quickAssign"){let D=new FormData;D.append("_action","quickAssign"),D.append("user",N?.id),D.append("task",p),f.submit(D,{method:"POST",action:"/api/task"});return}};return(0,se.useEffect)(()=>{f.data&&f.data.success?(console.log("Data: ",f.data),r()):f.data&&f.data.error&&a(f.data.error)},[f.data]),(0,G.jsx)(k,{open:s,onOpenChange:r,children:(0,G.jsxs)(A,{className:"sm:max-w-[425px] p-4 sm:p-6",children:[(0,G.jsx)(P,{className:"space-y-3",children:(0,G.jsx)(B,{className:"text-xl sm:text-2xl font-bold",children:"Assigner une t\xE2che"})}),l&&(0,G.jsx)("div",{className:"text-red-500 text-sm font-semibold py-4",children:l}),(0,G.jsx)("div",{className:"py-4",children:(0,G.jsxs)(I,{value:p,onValueChange:D=>{w(D),u("quickAssign")},children:[(0,G.jsx)(T,{className:"w-full h-11",children:(0,G.jsx)(y,{placeholder:"S\xE9lectionnez une t\xE2che",className:"text-base"})}),(0,G.jsx)(M,{children:c?.length>0&&c.map(D=>(0,G.jsx)(C,{value:D.id,className:"text-base py-3",children:D.title},D.id))})]})}),(0,G.jsxs)(F,{className:"flex-col sm:flex-row gap-3 sm:gap-2",children:[(0,G.jsx)(n,{variant:"outline",onClick:r,className:"w-full sm:w-auto h-11 text-base",children:"Annuler"}),(0,G.jsx)(n,{onClick:d,disabled:!p,className:"w-full sm:w-auto h-11 text-base",children:"Assigner"})]})]})})}var Ne=m(K());var V=m(v());function Re({isOpen:s,onClose:r,user:N,bonusCategories:c=[]}){let[p,w]=(0,Ne.useState)(""),o=x(),[u,f]=(0,Ne.useState)(""),l=()=>{let a=new FormData;a.append("_action","quickAssign"),a.append("user",N?.id),a.append("bonusCategory",p),o.submit(a,{method:"POST",action:"/api/bonusCategories"})};return(0,Ne.useEffect)(()=>{o.data&&o.data.success?r():o.data&&o.data.error&&f(o.data.error)},[o.data]),(0,V.jsx)(k,{open:s,onOpenChange:r,children:(0,V.jsxs)(A,{className:"sm:max-w-[425px] p-4 sm:p-6",children:[(0,V.jsx)(P,{className:"space-y-3",children:(0,V.jsx)(B,{className:"text-xl sm:text-2xl font-bold",children:"Ajouter \xE0 une Cat\xE9gorie de prime"})}),u&&(0,V.jsx)("div",{className:"text-red-500 text-sm font-semibold py-4",children:u}),(0,V.jsx)("div",{className:"py-4",children:(0,V.jsxs)(I,{value:p,onValueChange:w,children:[(0,V.jsx)(T,{className:"w-full h-11",children:(0,V.jsx)(y,{placeholder:"S\xE9lectionnez une t\xE2che",className:"text-base"})}),(0,V.jsx)(M,{children:c?.length>0&&c.map(a=>(0,V.jsx)(C,{value:a.id,className:"text-base py-3",children:a.name},a.id))})]})}),(0,V.jsxs)(F,{className:"gap-3 sm:gap-0",children:[(0,V.jsx)(n,{variant:"outline",onClick:r,className:"w-full sm:w-auto h-11 text-base",children:"Annuler"}),(0,V.jsx)(n,{onClick:l,className:"w-full sm:w-auto h-11 text-base",children:"Enregistrer"})]})]})})}var e=m(v());function La({user:s,applicableKpis:r,tasks:N,accesses:c,departments:p,hourGroups:w,teams:o,positions:u,bonusCategories:f,className:l="",isWinnerRecords:a,can:d}){let D=x(),[R,g]=(0,_.useState)(!1),[L,W]=(0,_.useState)(!1),[J,re]=(0,_.useState)(!1),[Le,ne]=(0,_.useState)(!1),[ze,le]=(0,_.useState)(!1),[Ke,ie]=(0,_.useState)(!1),[_e,me]=(0,_.useState)(!1),[$e,ce]=(0,_.useState)(!1),[et,We]=(0,_.useState)(!1),[Je,z]=(0,_.useState)(!1),{toast:Qe}=bt();if(!s)return null;let i=()=>{if(confirm("\xCAtes-vous s\xFBr de vouloir supprimer cet utilisateur ?")){let pe=new FormData;pe.append("_action","delete"),pe.append("userId",s.id),D.submit(pe,{method:"post",action:"/o/users"})}},Xe=(pe="Succ\xE8s",wt="Votre op\xE9ration est enregistr\xE9")=>{Qe({title:pe,description:wt})};return(0,e.jsxs)(at,{className:de("overflow-hidden transition-all duration-300 hover:shadow-lg  w-full",l),children:[(0,e.jsx)(Nt,{}),(0,e.jsx)(ot,{className:"bg-primary text-white p-4 sm:p-6",children:(0,e.jsxs)(st,{className:"flex flex-col sm:flex-row items-center gap-4",children:[(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsxs)(Te,{className:de("h-20 w-20 sm:h-16 sm:w-16 border-2 border-primary",{"border-yellow-300":a?.isWinner===!0,"border-white":a?.isWinner!==!0}),children:[(0,e.jsx)(Me,{src:s.avatar?.file?.url,alt:`${s.firstName} ${s.lastName}`}),(0,e.jsxs)(ke,{className:"text-lg text-primary font-semibold",children:[s.firstName[0],s.lastName[0]]})]}),a?.isWinner&&(0,e.jsx)("div",{className:"absolute -top-2 -right-2 bg-yellow-400 rounded-full p-1",title:"Points de r\xE9compense",children:(0,e.jsx)(rt,{className:"h-5 w-5 text-primary"})})]}),(0,e.jsxs)("div",{className:"text-center sm:text-left",children:[(0,e.jsxs)("h2",{className:"text-xl sm:text-2xl font-bold",children:[s.firstName," ",s.lastName]}),(0,e.jsx)(je,{variant:"outline",className:"mt-2 bg-white/20 text-white px-3 py-1 text-base",children:s.currentPosition?s.currentPosition?.title:"Aucun poste"})]})]})}),(0,e.jsx)(we,{className:"p-4 sm:p-6",children:(0,e.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)("p",{className:"text-base text-muted-foreground",children:"Email"}),(0,e.jsx)("p",{className:"text-base font-medium break-all truncate",children:s.email})]}),(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)("p",{className:"text-base text-muted-foreground",children:"Statut"}),(0,e.jsx)("p",{className:"text-base font-medium",children:s.status&&(0,e.jsx)(je,{className:" bg-emerald-800 text-white",children:s.status})})]})]})}),(0,e.jsxs)(xe,{className:"flex flex-col sm:flex-row justify-between gap-4 bg-muted/50 p-4 sm:p-6",children:[d?.view&&(0,e.jsx)(n,{asChild:!0,variant:"outline",className:"w-full sm:w-auto h-11 text-base",children:(0,e.jsx)(Y,{to:`/o/users/view/${s.id}`,children:(0,e.jsx)(Ce,{className:"mr-2 h-5 w-5"})})}),(0,e.jsxs)("div",{className:"flex flex-wrap items-center justify-end gap-3",children:[d?.edit&&(0,e.jsx)(n,{variant:"outline",size:"icon",className:"h-11 w-11",asChild:!0,children:(0,e.jsx)(Y,{to:`/o/users/edit/${s.id}`,children:(0,e.jsx)(De,{className:"h-5 w-5"})})}),d?.delete_&&(0,e.jsx)(n,{variant:"destructive",size:"icon",className:"h-11 w-11",onClick:i,children:(0,e.jsx)(Ie,{className:"h-5 w-5"})}),(0,e.jsxs)(Ae,{children:[(0,e.jsx)(Pe,{asChild:!0,children:(0,e.jsx)(n,{variant:"outline",className:"h-11 text-base",children:"Actions"})}),(0,e.jsxs)(Be,{className:"w-72 p-2",align:"end",children:[d?.quickMakeObservation&&(0,e.jsxs)(S,{className:"h-11 text-base",onSelect:()=>g(!0),children:[(0,e.jsx)(ve,{className:"mr-2 h-5 w-5"}),(0,e.jsx)("span",{children:"Observation"})]}),d?.quickMakeKpiEvaluation&&(0,e.jsxs)(S,{className:"h-11 text-base",onSelect:()=>W(!0),children:[(0,e.jsx)(ye,{className:"mr-2 h-5 w-5"}),(0,e.jsx)("span",{children:"\xC9valuer"})]}),d?.quickAssignTask&&(0,e.jsxs)(S,{className:"h-11 text-base",onSelect:()=>re(!0),children:[(0,e.jsx)(Z,{className:"mr-2 h-5 w-5"}),(0,e.jsx)("span",{children:"Assigner t\xE2che"})]}),(0,e.jsx)(Q,{className:"my-2"}),d?.quickChangeAccess&&(0,e.jsxs)(S,{className:"h-11 text-base",onSelect:()=>ne(!0),children:[(0,e.jsx)(j,{className:"mr-2 h-5 w-5"}),(0,e.jsx)("span",{children:"Droits d'acc\xE8s"})]}),d?.quickChangeDepartment&&(0,e.jsxs)(S,{className:"h-11 text-base",onSelect:()=>le(!0),children:[(0,e.jsx)(ee,{className:"mr-2 h-5 w-5"}),(0,e.jsx)("span",{children:"D\xE9partement"})]}),d?.quickChangePosition&&(0,e.jsxs)(S,{className:"h-11 text-base",onSelect:()=>ie(!0),children:[(0,e.jsx)(Z,{className:"mr-2 h-5 w-5"}),(0,e.jsx)("span",{children:"Poste"})]}),d?.quickChangeHourGroup&&(0,e.jsxs)(S,{className:"h-11 text-base",onSelect:()=>me(!0),children:[(0,e.jsx)(Se,{className:"mr-2 h-5 w-5"}),(0,e.jsx)("span",{children:"Groupe horaire"})]}),d?.quickChangeTeam&&(0,e.jsxs)(S,{className:"h-11 text-base",onSelect:()=>ce(!0),children:[(0,e.jsx)(ee,{className:"mr-2 h-5 w-5"}),(0,e.jsx)("span",{children:"\xC9quipe"})]}),(0,e.jsx)(Q,{className:"my-2"}),d?.quickChangeBonusCategory&&(0,e.jsxs)(S,{className:"h-11 text-base",onSelect:()=>z(!0),children:[(0,e.jsx)(j,{className:"mr-2 h-5 w-5"}),(0,e.jsx)("span",{children:"Cat\xE9gories de prime"})]}),(0,e.jsx)(Q,{className:"my-2"})]})]})]})]}),(0,e.jsx)(Fe,{isOpen:R,onClose:()=>{Xe(),g(!1)},user:s}),(0,e.jsx)(Oe,{isOpen:L,onClose:()=>{W(!1)},user:s,applicableKpis:r}),(0,e.jsx)(Ve,{isOpen:J,onClose:()=>re(!1),user:s,tasks:N}),(0,e.jsx)(He,{isOpen:Le,onClose:()=>ne(!1),user:s,accesses:c}),(0,e.jsx)(Ee,{isOpen:ze,onClose:()=>le(!1),user:s,departments:p}),(0,e.jsx)(qe,{isOpen:Ke,onClose:()=>ie(!1),user:s,positions:u}),(0,e.jsx)(Ue,{isOpen:_e,onClose:()=>me(!1),user:s,hourGroups:w}),(0,e.jsx)(Ge,{isOpen:$e,onClose:()=>ce(!1),user:s,teams:o}),(0,e.jsx)(Re,{isOpen:Je,onClose:()=>z(!1),user:s,bonusCategories:f})]})}var $=m(K());var t=m(v());function po({users:s,applicableKpis:r={},tasks:N,accesses:c,departments:p,hourGroups:w,teams:o,positions:u,bonusCategories:f,isWinnerRecords:l,can:a}){let[d,D]=(0,$.useState)(null),[R,g]=(0,$.useState)(!1),[L,W]=(0,$.useState)(!1),[J,re]=(0,$.useState)(!1),[Le,ne]=(0,$.useState)(!1),[ze,le]=(0,$.useState)(!1),[Ke,ie]=(0,$.useState)(!1),[_e,me]=(0,$.useState)(!1),[$e,ce]=(0,$.useState)(!1),[et,We]=(0,$.useState)(!1),Je=x(),z=(i,Xe)=>{switch(D(i),Xe){case"observation":g(!0);break;case"evaluation":W(!0);break;case"task":re(!0);break;case"access":ne(!0);break;case"department":le(!0);break;case"position":ie(!0);break;case"hourGroup":me(!0);break;case"team":ce(!0);break;case"bonusCategory":We(!0);break}},Qe=i=>{confirm("\xCAtes-vous s\xFBr de vouloir supprimer cet utilisateur ?")&&Je.submit({_action:"delete",userId:i},{method:"post",action:"/o/users"})};return(0,t.jsxs)("div",{className:"w-full overflow-auto",children:[(0,t.jsxs)(mt,{className:"min-w-[800px]",children:[(0,t.jsx)(ct,{children:(0,t.jsxs)(Ye,{children:[(0,t.jsx)(te,{className:"text-base font-semibold whitespace-nowrap",children:"Nom"}),(0,t.jsx)(te,{className:"text-base font-semibold whitespace-nowrap",children:"Email"}),(0,t.jsx)(te,{className:"text-base font-semibold whitespace-nowrap",children:"Poste"}),(0,t.jsx)(te,{className:"text-base font-semibold whitespace-nowrap",children:"Statut"}),(0,t.jsx)(te,{className:"text-base font-semibold whitespace-nowrap",children:"Actions"})]})}),(0,t.jsx)(pt,{children:s&&s?.map(i=>(0,t.jsxs)(Ye,{children:[(0,t.jsx)(ae,{className:"text-base font-medium whitespace-nowrap truncate ",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(Te,{className:de("h-20 w-20 sm:h-16 sm:w-16",{"border-yellow-300 border-2":l&&l[i.id]?.isWinner===!0,"border-white":l[i.id]?.isWinner!==!0}),children:[(0,t.jsx)(Me,{src:i.avatar?.file?.url,alt:`${i.firstName} ${i.lastName}`}),(0,t.jsxs)(ke,{className:"text-lg text-primary font-semibold",children:[i.firstName[0],i.lastName[0]]})]}),i.firstName," ",i.lastName]})}),(0,t.jsx)(ae,{className:"text-base whitespace-nowrap",children:i.email}),(0,t.jsx)(ae,{className:"text-base whitespace-nowrap",children:i.currentPosition?i.currentPosition?.title:"Aucun poste"}),(0,t.jsx)(ae,{className:"text-base whitespace-nowrap",children:i.status&&(0,t.jsx)("div",{className:" bg-emerald-600 text-white px-2 py-1 rounded-md",children:i.status})}),(0,t.jsx)(ae,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[a?.view&&(0,t.jsx)(n,{variant:"outline",size:"icon",asChild:!0,className:"h-10 w-10",children:(0,t.jsx)(Y,{to:`/o/users/view/${i.id}`,children:(0,t.jsx)(Ce,{className:"h-5 w-5"})})}),a?.edit&&(0,t.jsx)(n,{variant:"outline",size:"icon",asChild:!0,className:"h-10 w-10",children:(0,t.jsx)(Y,{to:`/o/users/edit/${i.id}`,children:(0,t.jsx)(De,{className:"h-5 w-5"})})}),a?.delete_&&(0,t.jsx)(n,{variant:"destructive",size:"icon",onClick:()=>Qe(i.id),className:"h-10 w-10",children:(0,t.jsx)(Ie,{className:"h-5 w-5"})}),(0,t.jsxs)(Ae,{children:[(0,t.jsx)(Pe,{asChild:!0,children:(0,t.jsx)(n,{variant:"outline",className:"h-10 px-4 text-base",children:"Actions"})}),(0,t.jsxs)(Be,{className:"w-56",align:"end",children:[a?.quickMakeObservation&&(0,t.jsxs)(S,{onSelect:()=>z(i,"observation"),className:"text-base py-2",children:[(0,t.jsx)(ve,{className:"mr-2 h-5 w-5"}),(0,t.jsx)("span",{children:"Observation"})]}),a?.quickMakeKpiEvaluation&&(0,t.jsxs)(S,{onSelect:()=>z(i,"evaluation"),className:"text-base py-2",children:[(0,t.jsx)(ye,{className:"mr-2 h-5 w-5"}),(0,t.jsx)("span",{children:"\xC9valuer"})]}),a?.quickAssignTask&&(0,t.jsxs)(S,{onSelect:()=>z(i,"task"),className:"text-base py-2",children:[(0,t.jsx)(Z,{className:"mr-2 h-5 w-5"}),(0,t.jsx)("span",{children:"Assigner t\xE2che"})]}),(0,t.jsx)(Q,{}),a?.quickChangeAccess&&(0,t.jsxs)(S,{onSelect:()=>z(i,"access"),className:"text-base py-2",children:[(0,t.jsx)(j,{className:"mr-2 h-5 w-5"}),(0,t.jsx)("span",{children:"Droits d'acc\xE8s"})]}),a?.quickChangeDepartment&&(0,t.jsxs)(S,{onSelect:()=>z(i,"department"),className:"text-base py-2",children:[(0,t.jsx)(ee,{className:"mr-2 h-5 w-5"}),(0,t.jsx)("span",{children:"D\xE9partement"})]}),a?.quickChangePosition&&(0,t.jsxs)(S,{onSelect:()=>z(i,"position"),className:"text-base py-2",children:[(0,t.jsx)(Z,{className:"mr-2 h-5 w-5"}),(0,t.jsx)("span",{children:"Poste"})]}),a?.quickChangeHourGroup&&(0,t.jsxs)(S,{onSelect:()=>z(i,"hourGroup"),className:"text-base py-2",children:[(0,t.jsx)(Se,{className:"mr-2 h-5 w-5"}),(0,t.jsx)("span",{children:"Groupe horaire"})]}),a?.quickChangeTeam&&(0,t.jsxs)(S,{onSelect:()=>z(i,"team"),className:"text-base py-2",children:[(0,t.jsx)(ee,{className:"mr-2 h-5 w-5"}),(0,t.jsx)("span",{children:"\xC9quipe"})]}),(0,t.jsx)(Q,{}),a?.quickChangeBonusCategory&&(0,t.jsxs)(S,{onSelect:()=>z(i,"bonusCategory"),className:"text-base py-2",children:[(0,t.jsx)(j,{className:"mr-2 h-5 w-5"}),(0,t.jsx)("span",{children:"Cat\xE9gories de prime"})]})]})]})]})})]},i.id))})]}),d&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Fe,{isOpen:R,onClose:()=>g(!1),user:d}),(0,t.jsx)(Oe,{isOpen:L,onClose:()=>W(!1),user:d,applicableKpis:r?r[d?.id]:[]}),(0,t.jsx)(Ve,{isOpen:J,onClose:()=>re(!1),user:d,tasks:N}),(0,t.jsx)(He,{isOpen:Le,onClose:()=>ne(!1),user:d,accesses:c}),(0,t.jsx)(Ee,{isOpen:ze,onClose:()=>le(!1),user:d,departments:p}),(0,t.jsx)(qe,{isOpen:Ke,onClose:()=>ie(!1),user:d,positions:u}),(0,t.jsx)(Ue,{isOpen:_e,onClose:()=>me(!1),user:d,hourGroups:w}),(0,t.jsx)(Ge,{isOpen:$e,onClose:()=>ce(!1),user:d,teams:o}),(0,t.jsx)(Re,{isOpen:et,onClose:()=>We(!1),user:d,bonusCategories:f})]})]})}export{La as a,po as b};
