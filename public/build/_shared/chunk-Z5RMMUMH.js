import{d as p}from"/build/_shared/chunk-SUJVG5FV.js";import{c as g}from"/build/_shared/chunk-NVGVVEPD.js";import{a as M}from"/build/_shared/chunk-BBTKOQ57.js";import{e as A}from"/build/_shared/chunk-UED2Q7CE.js";function I(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}var r=A(M(),1);var O=A(M(),1);function v(n,e){return O.useReducer((t,o)=>e[t][o]??t,n)}var P=n=>{let{present:e,children:t}=n,o=h(e),i=typeof t=="function"?t({present:o.isPresent}):r.Children.only(t),u=g(o.ref,w(i));return typeof t=="function"||o.isPresent?r.cloneElement(i,{ref:u}):null};P.displayName="Presence";function h(n){let[e,t]=r.useState(),o=r.useRef(null),i=r.useRef(n),u=r.useRef("none"),R=n?"mounted":"unmounted",[N,s]=v(R,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return r.useEffect(()=>{let a=l(o.current);u.current=N==="mounted"?a:"none"},[N]),p(()=>{let a=o.current,m=i.current;if(m!==n){let f=u.current,c=l(a);n?s("MOUNT"):c==="none"||a?.display==="none"?s("UNMOUNT"):s(m&&f!==c?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,s]),p(()=>{if(e){let a,m=e.ownerDocument.defaultView??window,d=c=>{let E=l(o.current).includes(c.animationName);if(c.target===e&&E&&(s("ANIMATION_END"),!i.current)){let T=e.style.animationFillMode;e.style.animationFillMode="forwards",a=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=T)})}},f=c=>{c.target===e&&(u.current=l(o.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{m.clearTimeout(a),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else s("ANIMATION_END")},[e,s]),{isPresent:["mounted","unmountSuspended"].includes(N),ref:r.useCallback(a=>{o.current=a?getComputedStyle(a):null,t(a)},[])}}function l(n){return n?.animationName||"none"}function w(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}export{I as a,P as b};
