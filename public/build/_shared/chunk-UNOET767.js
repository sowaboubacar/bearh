import{a as L}from"/build/_shared/chunk-7ZNTUDLC.js";import{a as k}from"/build/_shared/chunk-2BPW44Z6.js";import{a as U}from"/build/_shared/chunk-GFAY22KF.js";import{a as B}from"/build/_shared/chunk-WKQOSWRL.js";import{a as m}from"/build/_shared/chunk-Z5RMMUMH.js";import{b as K,c as M}from"/build/_shared/chunk-SUJVG5FV.js";import{a as y}from"/build/_shared/chunk-OMO5CWS2.js";import{c as O}from"/build/_shared/chunk-NVGVVEPD.js";import{a as Z,b as $}from"/build/_shared/chunk-BBTKOQ57.js";import{e as N}from"/build/_shared/chunk-UED2Q7CE.js";var t=N(Z(),1);var f=N($(),1),D="rovingFocusGroup.onEntryFocus",ee={bubbles:!1,cancelable:!0},R="RovingFocusGroup",[P,Y,te]=k(R),[oe,ge]=K(R,[te]),[re,ne]=oe(R),H=t.forwardRef((e,n)=>(0,f.jsx)(P.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,f.jsx)(P.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,f.jsx)(ce,{...e,ref:n})})}));H.displayName=R;var ce=t.forwardRef((e,n)=>{let{__scopeRovingFocusGroup:s,orientation:o,loop:T=!1,dir:w,currentTabStopId:v,defaultCurrentTabStopId:C,onCurrentTabStopIdChange:S,onEntryFocus:p,preventScrollOnEntryFocus:a=!1,...I}=e,b=t.useRef(null),F=O(n,b),g=L(w),[E,r]=B({prop:v,defaultProp:C??null,onChange:S,caller:R}),[i,h]=t.useState(!1),u=M(p),l=Y(s),A=t.useRef(!1),[q,x]=t.useState(0);return t.useEffect(()=>{let c=b.current;if(c)return c.addEventListener(D,u),()=>c.removeEventListener(D,u)},[u]),(0,f.jsx)(re,{scope:s,orientation:o,dir:g,loop:T,currentTabStopId:E,onItemFocus:t.useCallback(c=>r(c),[r]),onItemShiftTab:t.useCallback(()=>h(!0),[]),onFocusableItemAdd:t.useCallback(()=>x(c=>c+1),[]),onFocusableItemRemove:t.useCallback(()=>x(c=>c-1),[]),children:(0,f.jsx)(y.div,{tabIndex:i||q===0?-1:0,"data-orientation":o,...I,ref:F,style:{outline:"none",...e.style},onMouseDown:m(e.onMouseDown,()=>{A.current=!0}),onFocus:m(e.onFocus,c=>{let J=!A.current;if(c.target===c.currentTarget&&J&&!i){let G=new CustomEvent(D,ee);if(c.currentTarget.dispatchEvent(G),!G.defaultPrevented){let _=l().filter(d=>d.focusable),Q=_.find(d=>d.active),W=_.find(d=>d.id===E),X=[Q,W,..._].filter(Boolean).map(d=>d.ref.current);z(X,a)}}A.current=!1}),onBlur:m(e.onBlur,()=>h(!1))})})}),V="RovingFocusGroupItem",j=t.forwardRef((e,n)=>{let{__scopeRovingFocusGroup:s,focusable:o=!0,active:T=!1,tabStopId:w,children:v,...C}=e,S=U(),p=w||S,a=ne(V,s),I=a.currentTabStopId===p,b=Y(s),{onFocusableItemAdd:F,onFocusableItemRemove:g,currentTabStopId:E}=a;return t.useEffect(()=>{if(o)return F(),()=>g()},[o,F,g]),(0,f.jsx)(P.ItemSlot,{scope:s,id:p,focusable:o,active:T,children:(0,f.jsx)(y.span,{tabIndex:I?0:-1,"data-orientation":a.orientation,...C,ref:n,onMouseDown:m(e.onMouseDown,r=>{o?a.onItemFocus(p):r.preventDefault()}),onFocus:m(e.onFocus,()=>a.onItemFocus(p)),onKeyDown:m(e.onKeyDown,r=>{if(r.key==="Tab"&&r.shiftKey){a.onItemShiftTab();return}if(r.target!==r.currentTarget)return;let i=ue(r,a.orientation,a.dir);if(i!==void 0){if(r.metaKey||r.ctrlKey||r.altKey||r.shiftKey)return;r.preventDefault();let u=b().filter(l=>l.focusable).map(l=>l.ref.current);if(i==="last")u.reverse();else if(i==="prev"||i==="next"){i==="prev"&&u.reverse();let l=u.indexOf(r.currentTarget);u=a.loop?ie(u,l+1):u.slice(l+1)}setTimeout(()=>z(u))}}),children:typeof v=="function"?v({isCurrentTabStop:I,hasTabStop:E!=null}):v})})});j.displayName=V;var se={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ae(e,n){return n!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ue(e,n,s){let o=ae(e.key,s);if(!(n==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(n==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return se[o]}function z(e,n=!1){let s=document.activeElement;for(let o of e)if(o===s||(o.focus({preventScroll:n}),document.activeElement!==s))return}function ie(e,n){return e.map((s,o)=>e[(n+o)%e.length])}var Ee=H,Te=j;export{ge as a,Ee as b,Te as c};
